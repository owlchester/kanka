import{d as f,r as y,b as i,c as s,a as t,n as _,e as n,F as g,f as m,h as T,i as v,o as L,x as M,q as H}from"./vue.esm-bundler-51152e6d.js";const x=["data-tags"],w={class:"ability-box p-4 rounded bg-box shadow-xs flex flex-col md:flex-row items-center md:items-start gap-2 md:gap-4"},$={key:0,class:""},C=["href"],A={class:"flex flex-col gap-4 w-full"},B={class:"flex gap-2 md:gap-4 items-center w-full"},I={class:"flex gap-2 items-center text-xl grow"},N=["href","innerHTML"],j=["title"],z=["title"],D=["title"],E=["title"],F=["title"],V=["innerHTML"],q={key:1,class:""},P=["title"],S=["innerHTML"],U={key:0,class:"visible md:hidden"},G=["innerHTML"],J=["innerHTML"],K={key:2,class:"flex gap-2 items-center"},O=["href","innerHTML"],Q=["innerHTML"],R={key:4,class:"flex gap-2 md:gap-4 ability-charges w-full items-end"},W={class:"flex gap-1 flex-wrap grow"},X=["onClick"],Y=["innerHTML"],Z={class:"flex-none"},ee=["innerHTML"],ie=["innerHTML"],se=f({__name:"Ability",props:{ability:{},permission:{}},setup(b){y(!1);const a=b,o=()=>a.permission.value,c=()=>a.ability.images.thumb?{backgroundImage:"url("+a.ability.images.thumb+")"}:{},p=e=>{window.openDialog("abilities-dialog",e.actions.edit)},l=()=>a.ability.charges-a.ability.used_charges,h=()=>a.ability.i18n.left.replace(/:amount/,""),r=(e,d)=>{d>e.used_charges?e.used_charges+=1:e.used_charges-=1,axios.post(e.actions.use,{used:e.used_charges}).then(u=>{u.data.success||(e.used_charges-=1)}).catch(()=>{e.used_charges-=1})};return(e,d)=>(i(),s("div",{class:"ability","data-tags":e.ability.class},[t("div",w,[e.ability.images.has?(i(),s("div",$,[t("a",{class:"ability-image rounded-xl block w-40 h-40 cover-background",href:e.ability.images.url,style:_(c())},null,12,C)])):n("",!0),t("div",A,[t("div",B,[t("div",I,[t("a",{href:e.ability.actions.view,class:"ability-name text-2xl",innerHTML:e.ability.name},null,8,N),e.ability.visibility_id===2?(i(),s("i",{key:0,class:"fa-solid fa-lock",title:e.ability.visibility},null,8,j)):n("",!0),e.ability.visibility_id===3?(i(),s("i",{key:1,class:"fa-solid fa-user-lock",title:e.ability.visibility},null,8,z)):n("",!0),e.ability.visibility_id===5?(i(),s("i",{key:2,class:"fa-solid fa-users",title:e.ability.visibility},null,8,D)):n("",!0),e.ability.visibility_id===4?(i(),s("i",{key:3,class:"fa-solid fa-user-secret",title:e.ability.visibility},null,8,E)):n("",!0),e.ability.visibility_id===1?(i(),s("i",{key:4,class:"fa-solid fa-eye",title:e.ability.visibility},null,8,F)):n("",!0)]),e.ability.type?(i(),s("div",{key:0,class:"hidden md:inline bg-base-200 p-2 rounded-xl flex-none",innerHTML:e.ability.type},null,8,V)):n("",!0),e.permission?(i(),s("div",q,[o?(i(),s("a",{key:0,role:"button",onClick:d[0]||(d[0]=u=>p(e.ability)),class:"btn2 btn-ghost btn-sm",title:e.ability.i18n.edit},[d[1]||(d[1]=t("i",{class:"fa-solid fa-pencil text-xl","aria-hidden":"true"},null,-1)),t("span",{class:"sr-only",innerHTML:e.ability.i18n.edit},null,8,S)],8,P)):n("",!0)])):n("",!0)]),e.ability.type?(i(),s("div",U,[t("div",{class:"inline-block bg-base-200 p-2 rounded-xl",innerHTML:e.ability.type},null,8,G)])):n("",!0),e.ability.entry?(i(),s("div",{key:1,class:"entity-content",innerHTML:e.ability.entry},null,8,J)):n("",!0),e.ability.tags?(i(),s("div",K,[(i(!0),s(g,null,m(e.ability.tags,u=>(i(),s("a",{class:"rounded-lg bg-base-200 text-xs py-1 px-2 text-base-content",href:u.url,innerHTML:u.name},null,8,O))),256))])):n("",!0),e.ability.note?(i(),s("div",{key:3,class:"entity-content",innerHTML:e.ability.note},null,8,Q)):n("",!0),e.ability.charges&&e.permission?(i(),s("div",R,[t("div",W,[(i(!0),s(g,null,m(e.ability.charges,u=>(i(),s("div",{class:T(["charge cursor-pointer rounded-full p-2 hover:bg-accent hover:text-accent-content w-8 h-8 flex items-center justify-center",{"bg-base-200 charge-used":e.ability.used_charges>=u}]),onClick:ke=>r(e.ability,u)},[t("span",{innerHTML:u},null,8,Y)],10,X))),256))]),t("div",Z,[t("span",{class:"text-2xl",innerHTML:l()},null,8,ee),t("span",{innerHTML:h()},null,8,ie)])])):n("",!0)])])],8,x))}}),te={class:"ability-parent flex flex-col gap-5 w-full"},ne={class:"parent-head flex gap-2 md:gap-5 items-center"},le={class:"flex flex-col gap-1 grow overflow-hidden"},ae={key:0},oe=["href","innerHTML"],re=["innerHTML"],de=["innerHTML"],ue={class:"flex-none self-end"},ce={key:0,"aria-hidden":"true",class:"fa-thin fa-chevron-circle-up fa-2x"},pe={key:1,"aria-hidden":"true",class:"fa-thin fa-chevron-circle-down fa-2x"},he={key:2,class:"sr-only"},ye={key:3,class:"sr-only"},be={key:0,class:"parent-abilities flex flex-col gap-5"},ge=f({__name:"Parent",props:{group:{},permission:{},meta:{}},setup(b){const a=b,o=y(!1),c=()=>a.group.has_image?{backgroundImage:"url("+a.group.image+")"}:{},p=l=>{o.value=!o.value};return(l,h)=>(i(),s("div",te,[t("div",ne,[l.group.has_image?(i(),s("div",{key:0,class:"parent-image rounded-full w-12 h-12 md:w-16 md:h-16 cover-background flex-none",style:_(c())},null,4)):n("",!0),t("div",le,[l.group.url?(i(),s("div",ae,[t("a",{href:l.group.url,innerHTML:l.group.name,class:"parent-name text-xl md:text-2xl"},null,8,oe)])):(i(),s("span",{key:1,class:"parent-name text-xl md:text-2xl",innerHTML:l.group.name},null,8,re)),t("p",{class:"md:text-lg truncate",innerHTML:l.group.type},null,8,de)]),t("div",ue,[t("span",{role:"button",onClick:h[0]||(h[0]=r=>p(l.group)),class:"cursor-pointer inline-block"},[o.value?(i(),s("i",pe)):(i(),s("i",ce)),o.value?(i(),s("span",ye,"Collapse section")):(i(),s("span",he,"Expand section"))])])]),o.value?n("",!0):(i(),s("div",be,[(i(!0),s(g,null,m(l.group.abilities,r=>(i(),v(se,{key:r.id,ability:r,permission:l.permission,meta:l.meta},null,8,["ability","permission","meta"]))),128))]))]))}}),me={class:"viewport box-abilities relative flex flex-col gap-5"},fe={key:0,class:"load more text-center text-2xl"},_e={class:"flex gap-5 flex-wrap"},ve=f({__name:"Abilities",props:{id:{},api:{},permission:{}},setup(b){const a=b,o=y([]),c=y([]),p=y(!0),l=y(!0),h=()=>{axios.get(a.api).then(r=>{o.value=r.data.data.groups,c.value=r.data.data.meta,p.value=!1,l.value=!1})};return L(()=>{h()}),M(()=>{window.ajaxTooltip()}),(r,e)=>(i(),s("div",me,[p.value?(i(),s("div",fe,e[0]||(e[0]=[t("i",{class:"fa-solid fa-spin fa-spinner","aria-hidden":"true"},null,-1)]))):n("",!0),t("div",_e,[(i(!0),s(g,null,m(o.value,d=>(i(),v(ge,{key:d.id,group:d,permission:r.permission,meta:c.value},null,8,["group","permission","meta"]))),128))])]))}}),k=H({});k.component("abilities",ve);k.mount("#abilities");
