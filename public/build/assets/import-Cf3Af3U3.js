import{a as p}from"./index-Dq7h7Pqt.js";const l=document.querySelector(".progress-uploading"),c=document.querySelector(".progress-validating");let a;const u=()=>{const t=document.getElementById("campaign-import-form");t&&(a=document.querySelector(".progress"),t.onsubmit=i=>{i.preventDefault();let n=0,e=new FormData,o=document.getElementById("export-files");Array.from(o.files).forEach(r=>{r.name.endsWith(".zip")&&(n++,e.append("files[]",r))});let s=document.querySelector('input[name="campaign"]');e.append("campaign",s.value);let d=document.querySelector('input[name="token"]');if(e.append("token",d.value),n>0&&n<2)m(t,e);else{alert("Please select the campaign export zip files.");let r=document.querySelector(".loading");return r&&r.classList.remove("loading"),!1}})},m=(t,i)=>{t.classList.add("hidden");let n={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){let o=Math.round(e.loaded*100/e.total);document.querySelector('[role="progressbar"]').style.width=o+"%",o===100&&(l.classList.add("hidden"),c.classList.remove("hidden"));const s=document.querySelector(".progress-percent");s.classList.remove("hidden"),s.innerHTML=o}};a.classList.remove("hidden"),l.classList.remove("hidden"),c.classList.add("hidden"),p.post(t.action,i,n).then(function(e){a.classList.add("hidden"),e.data.success&&window.location.reload()}).catch(function(e){if(t.classList.remove("hidden"),a.classList.add("hidden"),e.status===413)window.showToast("File is too big for our servers to handle.","error");else if(e.code=="ERR_NETWORK")window.showToast("Network error, the upload server seems to be down.","error");else if(e.response&&e.response.data.errors){let s=e.response.data.errors;Object.keys(s).forEach(r=>{window.showToast(s[r],"error")})}let o=document.querySelector(".loading");o&&o.classList.remove("loading")})};u();
