import{d as x,a as t,c as i,b as s,n as T,f as n,F as f,r as v,e as k,i as p,h as b,o as M,A as w,q as H}from"./vendor-tiptap-BMQcrX0l.js";const _=["data-tags"],$={class:"ability-box p-4 rounded-lg bg-box shadow-xs flex flex-col md:flex-row items-center md:items-start gap-2 md:gap-4"},C={key:0,class:""},A=["href"],B={class:"flex flex-col gap-4 w-full"},I={class:"flex gap-2 md:gap-4 items-center w-full"},j={class:"flex gap-2 items-center text-lg grow"},N=["href","innerHTML"],z=["title"],D=["title"],E=["title"],F=["title"],V=["title"],q=["innerHTML"],P={key:1,class:""},S=["title"],U=["innerHTML"],G={key:0,class:"visible md:hidden"},J=["innerHTML"],K=["innerHTML"],O={key:2,class:"flex gap-2 items-center ability-tags"},Q=["href","data-url","innerHTML"],R=["innerHTML"],W={key:4,class:"flex gap-2 md:gap-4 ability-charges w-full items-end"},X={class:"flex gap-1 flex-wrap grow"},Y=["onClick"],Z=["innerHTML"],ee={class:"flex-none"},te=["innerHTML"],ie=["innerHTML"],se=x({__name:"Ability",props:{ability:{},permission:{}},setup(e){const l=e,r=()=>l.permission.value,u=()=>l.ability.images.thumb?{backgroundImage:"url("+l.ability.images.thumb+")"}:{},g=a=>{window.openDialog("abilities-dialog",a.actions.edit)},h=()=>l.ability.charges-l.ability.used_charges,y=()=>l.ability.i18n.left.replace(/:amount/,""),c=a=>{let d="rounded-xl bg-base-200 text-xs py-1 px-3 text-base-content";return d+=" "+a.class},m=(a,d)=>{d>a.used_charges?a.used_charges+=1:a.used_charges-=1,axios.post(a.actions.use,{used:a.used_charges}).then(o=>{o.data.success||(a.used_charges-=1)}).catch(()=>{a.used_charges-=1})};return(a,d)=>(t(),i("div",{class:"ability","data-tags":e.ability.class},[s("div",$,[e.ability.images.has?(t(),i("div",C,[s("a",{class:"ability-image rounded-lg block w-40 h-40 cover-background",href:e.ability.images.url,style:T(u())},null,12,A)])):n("",!0),s("div",B,[s("div",I,[s("div",j,[s("a",{href:e.ability.actions.view,class:"ability-name text-lg text-link",innerHTML:e.ability.name},null,8,N),e.ability.visibility_id===2?(t(),i("i",{key:0,class:"fa-regular fa-lock",title:e.ability.visibility},null,8,z)):n("",!0),e.ability.visibility_id===3?(t(),i("i",{key:1,class:"fa-regular fa-user-lock",title:e.ability.visibility},null,8,D)):n("",!0),e.ability.visibility_id===5?(t(),i("i",{key:2,class:"fa-regular fa-users",title:e.ability.visibility},null,8,E)):n("",!0),e.ability.visibility_id===4?(t(),i("i",{key:3,class:"fa-regular fa-user-secret",title:e.ability.visibility},null,8,F)):n("",!0),e.ability.visibility_id===1?(t(),i("i",{key:4,class:"fa-regular fa-eye",title:e.ability.visibility},null,8,V)):n("",!0)]),e.ability.type?(t(),i("div",{key:0,class:"hidden md:inline bg-base-200 p-2 px-3 rounded-2xl flex-none",innerHTML:e.ability.type},null,8,q)):n("",!0),e.permission?(t(),i("div",P,[r?(t(),i("a",{key:0,role:"button",onClick:d[0]||(d[0]=o=>g(e.ability)),class:"btn2 btn-ghost btn-sm",title:e.ability.i18n.edit},[d[1]||(d[1]=s("i",{class:"fa-regular fa-pencil","aria-hidden":"true"},null,-1)),s("span",{class:"sr-only",innerHTML:e.ability.i18n.edit},null,8,U)],8,S)):n("",!0)])):n("",!0)]),e.ability.type?(t(),i("div",G,[s("div",{class:"inline-block bg-base-200 p-2 rounded-xl",innerHTML:e.ability.type},null,8,J)])):n("",!0),e.ability.entry?(t(),i("div",{key:1,class:"entity-content",innerHTML:e.ability.entry},null,8,K)):n("",!0),e.ability.tags?(t(),i("div",O,[(t(!0),i(f,null,v(e.ability.tags,o=>(t(),i("a",{class:k(c(o)),href:o.url,"data-toggle":"tooltip-ajax","data-url":o.tooltip,innerHTML:o.name},null,10,Q))),256))])):n("",!0),e.ability.note?(t(),i("div",{key:3,class:"entity-content text-sm text-neutral-content",innerHTML:e.ability.note},null,8,R)):n("",!0),e.ability.charges&&e.permission?(t(),i("div",W,[s("div",X,[(t(!0),i(f,null,v(e.ability.charges,o=>(t(),i("div",{class:k(["charge cursor-pointer rounded-full p-2 hover:bg-accent hover:text-accent-content w-8 h-8 flex items-center justify-center",{"bg-base-200 charge-used":e.ability.used_charges>=o}]),onClick:pe=>m(e.ability,o)},[s("span",{innerHTML:o},null,8,Z)],10,Y))),256))]),s("div",ee,[s("span",{class:"text-lg",innerHTML:h()},null,8,te),s("span",{innerHTML:y()},null,8,ie)])])):n("",!0)])])],8,_))}}),ne={class:"ability-parent flex flex-col gap-5 w-full"},ae={class:"parent-head flex gap-2 md:gap-5 items-center"},le={class:"flex flex-col gap-1 grow overflow-hidden"},oe={key:0},re=["href","innerHTML"],ce=["innerHTML"],de=["innerHTML","data-title"],ue={class:"flex-none self-end"},ge={key:0,"aria-hidden":"true",class:"fa-thin fa-chevron-circle-up fa-2x"},ye={key:1,"aria-hidden":"true",class:"fa-thin fa-chevron-circle-down fa-2x"},he={key:2,class:"sr-only"},be={key:3,class:"sr-only"},me={key:0,class:"parent-abilities flex flex-col gap-5"},fe=x({__name:"Parent",props:{group:{},permission:{},meta:{}},setup(e){const l=e,r=b(!1),u=()=>l.group.has_image?{backgroundImage:"url("+l.group.image+")"}:{},g=h=>{r.value=!r.value};return(h,y)=>(t(),i("div",ne,[s("div",ae,[e.group.has_image?(t(),i("div",{key:0,class:"parent-image rounded-full w-12 h-12 md:w-16 md:h-16 cover-background flex-none",style:T(u())},null,4)):n("",!0),s("div",le,[e.group.url?(t(),i("div",oe,[s("a",{href:e.group.url,innerHTML:e.group.name,class:"parent-name text-xl"},null,8,re)])):(t(),i("span",{key:1,class:"parent-name text-xl",innerHTML:e.group.name},null,8,ce)),s("p",{class:"truncate",innerHTML:e.group.type,"data-toggle":"tooltip","data-title":e.group.type},null,8,de)]),s("div",ue,[s("span",{role:"button",onClick:y[0]||(y[0]=c=>g(e.group)),class:"cursor-pointer inline-block"},[r.value?(t(),i("i",ye)):(t(),i("i",ge)),r.value?(t(),i("span",be,"Collapse section")):(t(),i("span",he,"Expand section"))])])]),r.value?n("",!0):(t(),i("div",me,[(t(!0),i(f,null,v(e.group.abilities,c=>(t(),p(se,{key:c.id,ability:c,permission:e.permission,meta:e.meta},null,8,["ability","permission","meta"]))),128))]))]))}}),ve={class:"viewport box-abilities relative flex flex-col gap-5"},xe={key:0,class:"load more text-center text-2xl"},ke={class:"flex gap-5 flex-wrap"},Te=x({__name:"Abilities",props:{id:{},api:{},permission:{}},setup(e){const l=e,r=b([]),u=b([]),g=b(!0),h=b(!0),y=()=>{axios.get(l.api).then(c=>{r.value=c.data.data.groups,u.value=c.data.data.meta,g.value=!1,h.value=!1})};return M(()=>{y()}),w(()=>{window.ajaxTooltip(),window.initTooltips()}),(c,m)=>(t(),i("div",ve,[g.value?(t(),i("div",xe,[...m[0]||(m[0]=[s("i",{class:"fa-solid fa-spin fa-spinner","aria-hidden":"true"},null,-1)])])):n("",!0),s("div",ke,[(t(!0),i(f,null,v(r.value,a=>(t(),p(fe,{key:a.id,group:a,permission:e.permission,meta:u.value},null,8,["group","permission","meta"]))),128))])]))}}),L=H({});L.component("abilities",Te);L.mount("#abilities");
