import{m as ie,a,i as G,J as Pe,c as l,Q as j,b as t,R as ne,P as ke,F as C,r as B,t as Ce,f as c,d as we,o as $e,A as ae,y as le,B as je,s as Be,e as _,H as Ue,h as f,p as R,n as se,q as Ee}from"./vue.esm-bundler-C87APpr1.js";import{t as Ae}from"./tippy.esm-CnBRltuW.js";const Re={emits:["pagination-change-page"],props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},keepLength:{type:Boolean,default:!1}},computed:{isApiResource(){return!!this.data.meta},currentPage(){var n;return this.isApiResource?this.data.meta.current_page:(n=this.data.current_page)!=null?n:null},firstPageUrl(){var n,p,r,i,g;return(g=(i=(p=this.data.first_page_url)!=null?p:(n=this.data.meta)==null?void 0:n.first_page_url)!=null?i:(r=this.data.links)==null?void 0:r.first)!=null?g:null},from(){var n;return this.isApiResource?this.data.meta.from:(n=this.data.from)!=null?n:null},lastPage(){var n;return this.isApiResource?this.data.meta.last_page:(n=this.data.last_page)!=null?n:null},lastPageUrl(){var n,p,r,i,g;return(g=(i=(p=this.data.last_page_url)!=null?p:(n=this.data.meta)==null?void 0:n.last_page_url)!=null?i:(r=this.data.links)==null?void 0:r.last)!=null?g:null},nextPageUrl(){var n,p,r,i,g;return(g=(i=(p=this.data.next_page_url)!=null?p:(n=this.data.meta)==null?void 0:n.next_page_url)!=null?i:(r=this.data.links)==null?void 0:r.next)!=null?g:null},perPage(){var n;return this.isApiResource?this.data.meta.per_page:(n=this.data.per_page)!=null?n:null},prevPageUrl(){var n,p,r,i,g;return(g=(i=(p=this.data.prev_page_url)!=null?p:(n=this.data.meta)==null?void 0:n.prev_page_url)!=null?i:(r=this.data.links)==null?void 0:r.prev)!=null?g:null},to(){var n;return this.isApiResource?this.data.meta.to:(n=this.data.to)!=null?n:null},total(){var n;return this.isApiResource?this.data.meta.total:(n=this.data.total)!=null?n:null},pageRange(){if(this.limit===-1)return 0;if(this.limit===0)return this.lastPage;for(var n=this.currentPage,p=this.keepLength,r=this.lastPage,i=this.limit,g=n-i,m=n+i,M=(i+2)*2,v=(i+2)*2-1,k=[],x=[],y,h=1;h<=r;h++)(h===1||h===r||h>=g&&h<=m||p&&h<M&&n<M-2||p&&h>r-v&&n>r-v+2)&&k.push(h);return k.forEach(function(H){y&&(H-y===2?x.push(y+1):H-y!==1&&x.push("...")),x.push(H),y=H}),x}},methods:{previousPage(){this.selectPage(this.currentPage-1)},nextPage(){this.selectPage(this.currentPage+1)},selectPage(n){n==="..."||n===this.currentPage||this.$emit("pagination-change-page",n)}},render(){return this.$slots.default({data:this.data,limit:this.limit,computed:{isApiResource:this.isApiResource,currentPage:this.currentPage,firstPageUrl:this.firstPageUrl,from:this.from,lastPage:this.lastPage,lastPageUrl:this.lastPageUrl,nextPageUrl:this.nextPageUrl,perPage:this.perPage,prevPageUrl:this.prevPageUrl,to:this.to,total:this.total,pageRange:this.pageRange},prevButtonEvents:{click:n=>{n.preventDefault(),this.previousPage()}},nextButtonEvents:{click:n=>{n.preventDefault(),this.nextPage()}},pageButtonEvents:n=>({click:p=>{p.preventDefault(),this.selectPage(n)}})})}},Se=(n,p)=>{const r=n.__vccOpts||n;for(const[i,g]of p)r[i]=g;return r},De={compatConfig:{MODE:3},inheritAttrs:!1,emits:["pagination-change-page"],components:{RenderlessPagination:Re},props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},keepLength:{type:Boolean,default:!1},itemClasses:{type:Array,default:()=>["bg-white","text-gray-500","border-gray-300","hover:bg-gray-50"]},activeClasses:{type:Array,default:()=>["bg-blue-50","border-blue-500","text-blue-600"]}},methods:{onPaginationChangePage(n){this.$emit("pagination-change-page",n)}}},ze=["disabled"],Oe=t("span",{class:"sr-only"},"Previous",-1),qe=t("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})],-1),Fe=["aria-current","disabled"],Ie=["disabled"],Ne=t("span",{class:"sr-only"},"Next",-1),Ge=t("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1);function Je(n,p,r,i,g,m){const M=ie("RenderlessPagination");return a(),G(M,{data:r.data,limit:r.limit,"keep-length":r.keepLength,onPaginationChangePage:m.onPaginationChangePage},{default:Pe(v=>[v.computed.total>v.computed.perPage?(a(),l("nav",j({key:0},n.$attrs,{class:"inline-flex -space-x-px rounded-md shadow-sm isolate ltr:flex-row rtl:flex-row-reverse","aria-label":"Pagination"}),[t("button",j({class:["relative inline-flex items-center px-2 py-2 text-sm font-medium border rounded-l-md focus:z-20 disabled:opacity-50",r.itemClasses],disabled:!v.computed.prevPageUrl},ne(v.prevButtonEvents,!0)),[ke(n.$slots,"prev-nav",{},()=>[Oe,qe])],16,ze),(a(!0),l(C,null,B(v.computed.pageRange,(k,x)=>(a(),l("button",j({class:["relative inline-flex items-center px-4 py-2 text-sm font-medium border focus:z-20",[k==v.computed.currentPage?r.activeClasses:r.itemClasses,k==v.computed.currentPage?"z-30":""]],"aria-current":v.computed.currentPage?"page":null,key:x},ne(v.pageButtonEvents(k),!0),{disabled:k===v.computed.currentPage}),Ce(k),17,Fe))),128)),t("button",j({class:["relative inline-flex items-center px-2 py-2 text-sm font-medium border rounded-r-md focus:z-20 disabled:opacity-50",r.itemClasses],disabled:!v.computed.nextPageUrl},ne(v.nextButtonEvents,!0)),[ke(n.$slots,"next-nav",{},()=>[Ne,Ge])],16,Ie)],16)):c("",!0)]),_:3},8,["data","limit","keep-length","onPaginationChangePage"])}const Qe=Se(De,[["render",Je]]),Ve={key:0,class:"flex flex-col gap-4 w-full"},Ke={class:"flex gap-2 justify-between items-center"},We=["innerHTML"],Xe={key:1,class:"flex flex-col gap-4 w-full"},Ye={class:"flex gap-2 justify-between items-center flex-wrap"},Ze={class:"flex gap-1 items-center flex-wrap"},et=["innerHTML"],tt={key:0,class:"bg-base-200 flex items-stretch gap-1 rounded-xl"},nt=["aria-label","title"],at=["title"],lt=["aria-label"],st=["href"],it={key:1},rt=["aria-label","title"],ot=["innerHTML"],ut=["innerHTML"],dt=["innerHTML"],ct={key:0,class:"flex gap-2 items-center"},pt={key:0,class:"btn2"},ft={key:1},vt=["title"],gt={key:2},ht={key:0,class:"btn2"},yt=["title"],mt=["innerHTML"],bt=["title"],xt=["innerHTML"],kt={key:3},wt=["title"],Lt=["innerHTML"],Mt=["title"],Tt=["innerHTML"],_t={key:4,class:"join"},Ht=["href"],Pt=["innerHTML"],Ct={key:0},$t=["innerHTML"],jt={key:1,class:"flex gap-2 items-center"},Bt={class:"join"},Ut=["innerHTML"],Et=["innerHTML"],At={key:2},Rt=["innerHTML"],St={class:"flex gap-1 items-start"},Dt=["href"],zt={class:"block text-center p-4 h-12 bg-box"},Ot=["innerHTML"],qt=["href"],Ft={class:""},It=["innerHTML"],Nt={key:0,class:"flex items-center justify-end gap-1 h-12"},Gt={key:1,class:"flex items-center"},Jt=["innerHTML"],Qt=["innerHTML"],Vt=["innerHTML"],Kt=["innerHTML"],Wt=["href"],Xt=["innerHTML"],Yt={key:0,class:"m-0"},Zt={href:"https://docs.kanka.io/en/latest/guides/templates.html",class:"px-2 py-2 hover:bg-base-200 rounded-xl flex items-center gap-1.5 transition-all duration-150 text-base-content text-sm"},en=["innerHTML"],tn=["innerHTML"],nn=["innerHTML"],an=["innerHTML"],ln=["innerHTML"],sn=["innerHTML"],rn=["innerHTML"],on=["action"],un=["value"],dn=["value"],cn=we({__name:"Explorer",props:{api:{},module:{},mode:{}},setup(n){const p=n,r=f([]),i=f(),g=f(),m=f(),M=f(),v=f(),k=f(),x=f(),y=f({}),h=f(0),H=f(0),U=f(),S=f(!0),E=f(!1),D=f(!1),T=f(!1),u=f(!0),b=f([]),z=f(),w=f(),oe=f(),ue=f(),F=f(),de=f(),J=f(),P=f(!1),d=f({}),ce=f(!1),$=f("grid");$e(()=>{$.value=p.mode,fetch(p.api).then(s=>s.json()).then(s=>{he(s),h.value=s.filters.unfilteredCount,H.value=s.filters.count,U.value=s.filters.urls,d.value=s.i18n,u.value=s.nested,i.value=s.parent,b.value=s.templates,m.value=s.permissions,ce.value=s.bookmarkable,y.value=s.urls,v.value=s.entityType,ye()})});const pe=()=>{P.value=!P.value,r.value.forEach(s=>{s.selected=!1})},Le=()=>{if(!r.value.length)return;const s=!r.value[0].selected;r.value.forEach(e=>{e.selected=s})},fe=()=>{window.openDialog("datagrid-filters",U.value.form)},A=s=>{F.value?._tippy?.hide();let e=ee();if(e.length===0)return;let L=new URL(s,window.location.origin),o=L.searchParams;e.forEach(xe=>{o.append("entities[]",xe)}),window.openDialog("primary-dialog",L.toString())},ve=()=>{T.value=!0;let s=p.api;u.value=!u.value,I(te(s,"n",u.value?"1":"0"));const e=new URL(window.location.href);e.searchParams.set("n",u.value?1:0),window.history.pushState({},"",e)},ge=()=>{let s=p.api;q()?$.value="table":$.value="grid",I(te(s,"m",$.value));const e=new URL(window.location.href);e.searchParams.set("m",$.value),window.history.pushState({},"",e)},Me=async(s=1)=>{D.value=!0,I(te(p.api,"page",s))},I=s=>{fetch(s).then(e=>e.json()).then(e=>{he(e),ye()})},he=s=>{r.value=[],k.value=s.entities,s.entities.data.forEach(e=>{r.value.push(e)}),g.value=s.csrf,x.value=s.order},ye=()=>{S.value=!1,D.value=!1,T.value=!1,E.value=!1};let Q=[];const me=()=>{Q.forEach(s=>{const e=s.props.content;e instanceof Element&&J.value&&J.value.appendChild(e),s.destroy()}),Q=[]},V=(s,e,L="bottom")=>{if(!s.value||!e.value)return;const o=Ae(s.value,{content:e.value,theme:"kanka-dropdown",placement:L,interactive:!0,trigger:"click",allowHTML:!0,arrow:!0,zIndex:890});Q.push(o)},K=()=>{me(),V(z,w,"bottom"),V(oe,ue,"bottom-end"),V(F,de,"bottom-end")};ae(S,s=>{s||le(K)}),ae(E,(s,e)=>{e&&!s&&le(K)}),ae(P,()=>{le(K)}),je(()=>{me()});const W=s=>{z.value?._tippy?.hide(),E.value=!0;let e=new URL(p.api,window.location.origin),L=e.searchParams;L.set("order",s),Z(s)?L.set("desc","1"):L.delete("desc"),e=e.toString(),I(e);const o=new URL(window.location.href);o.searchParams.set("order",s),Z(s)?o.searchParams.set("desc","1"):o.searchParams.delete("desc"),window.history.pushState({},"",o)},X=s=>{let e="flex items-center gap-2 px-2";return N(s)?e+" font-extrabold":e},Y=s=>Z(s)?"fa-regular fa-arrow-down-z-a":"fa-fa-regular fa-arrow-down-a-z",N=s=>x.value[s],Z=s=>x.value[s]==="ASC";Be(()=>{window.ajaxTooltip()});const be=()=>{F.value?._tippy?.hide(),ee().length!==0&&M.value.submit()},Te=()=>{window.openDialog("primary-dialog",y.value.bookmark)},_e=()=>{A(y.value.delete)},ee=()=>{let s=[];return r.value.filter(e=>e.selected).forEach(e=>{s.push(e.id)}),s},O=()=>m.value,He=()=>q()?"entities-grid flex flex-wrap gap-3 lg:gap-5 w-full":"entities-grid flex flex-col gap-1 w-full",q=()=>$.value==="grid",te=(s,e,L)=>{let o=new URL(s,window.location.origin);return o.searchParams.set(e,L),o.toString()};return(s,e)=>{const L=ie("entities-entity");return S.value?(a(),l("div",Ve,[t("div",Ke,[t("h1",{class:"grow text-2xl category-title truncate",innerHTML:p.module},null,8,We),e[18]||(e[18]=t("div",{class:"flex gap-2 items-center"},[t("button",{class:"btn2 btn-disabled",disabled:"disabled"},[t("i",{class:"fa-solid fa-spinner fa-spin","aria-label":"Loading"})])],-1))]),e[19]||(e[19]=t("div",{class:"flex gap-2 items-start"},[t("div",{class:"rounded shadow-xs w-[47%] xs:w-[25%] sm:w-48 aspect-square flex items-center justify-center text-xl text-neutral-content"},[t("i",{class:"fa-solid fa-spinner fa-spin","aria-label":"Loading"})])],-1))])):(a(),l("div",Xe,[t("div",Ye,[t("div",Ze,[t("h1",{class:"grow text-2xl category-title truncate",innerHTML:p.module},null,8,et),H.value>0?(a(),l("div",tt,[t("div",{class:"flex items-center rounded-2xl gap-2 hover:bg-base-300 px-2 py-2 cursor-pointer","aria-label":d.value.filters,title:d.value.filters,onClick:fe},[...e[20]||(e[20]=[t("i",{class:"fa-regular fa-filter hover:bg-base-300","aria-label":"Filter"},null,-1),t("span",{class:"rounded bg-primary text-primary-content px-2 text-sm"},"1",-1)])],8,nt),ce.value?(a(),l("div",{key:0,class:"flex items-center justify-center rounded-xl gap-2 hover:bg-base-300 px-3 py-2 cursor-pointer hover:text-primary",title:d.value.bookmark,onClick:Te},[t("i",{class:"fa-regular fa-bookmark","aria-label":d.value.bookmark},null,8,lt)],8,at)):c("",!0),e[22]||(e[22]=t("div",{class:"w-0 h-auto my-2 border-base-content border-l"},null,-1)),t("a",{class:"flex items-center rounded-xl gap-2 hover:bg-base-300 px-2 py-2 text-base-content hover:text-primary",href:U.value.clear},[...e[21]||(e[21]=[t("i",{class:"fa-regular fa-eraser","aria-label":"Clear"},null,-1)])],8,st)])):(a(),l("div",it,[t("i",{class:"fa-regular fa-filter text-lg rounded-lg hover:text-primary-content cursor-pointer px-2 py-1 hover:bg-primary","aria-label":d.value.filters,title:d.value.filters,onClick:fe},null,8,rt)])),O()&&!P.value?(a(),l("button",{key:2,onClick:e[0]||(e[0]=o=>pe()),class:"rounded-full border-primary text-primary border px-3 py-1 text-xs uppercase hover:bg-primary hover:text-primary-content",innerHTML:d.value.select},null,8,ot)):c("",!0),O()&&P.value?(a(),l("button",{key:3,onClick:e[1]||(e[1]=o=>pe()),class:"rounded-full bg-primary text-primary-content px-3 py-1 text-xs uppercase",innerHTML:d.value.done},null,8,ut)):c("",!0),O()&&P.value?(a(),l("button",{key:4,onClick:e[2]||(e[2]=o=>Le()),class:"rounded-full border-primary text-primary border px-3 py-1 text-xs uppercase hover:bg-primary hover:text-primary-content",innerHTML:d.value.selectAll},null,8,dt)):c("",!0)]),P.value?(a(),l("div",jt,[t("div",Bt,[m.value.admin?(a(),l("button",{key:0,class:"btn2 btn-primary join-item btn-bulk-batch",onClick:e[7]||(e[7]=o=>A(y.value.batch))},[e[32]||(e[32]=t("i",{class:"fa-regular fa-pencil","aria-hidden":"true"},null,-1)),t("span",{class:"hidden md:inline",innerHTML:d.value.bulkEdit},null,8,Ut)])):(a(),l("button",{key:1,class:"btn2 join-item btn-primary",onClick:e[8]||(e[8]=o=>be())},[e[33]||(e[33]=t("i",{class:"fa-regular fa-print","aria-hidden":"true"},null,-1)),t("span",{class:"hidden md:inline",innerHTML:d.value.bulkPrint},null,8,Et)])),O()?(a(),l("div",At,[t("button",{ref_key:"actionsBtn",ref:F,type:"button",class:"btn2 btn-primary join-item","aria-expanded":"false","aria-label":"Actions","aria-haspopup":"menu"},[e[34]||(e[34]=t("i",{class:"fa-regular fa-caret-down","aria-hidden":"true"},null,-1)),t("span",{class:"sr-only",innerHTML:d.value.actions},null,8,Rt)],512)])):c("",!0)])])):(a(),l("div",ct,[E.value?(a(),l("button",pt,[...e[23]||(e[23]=[t("i",{class:"fa-solid fa-spinner fa-spin","aria-label":"Loading"},null,-1)])])):(a(),l("div",ft,[t("button",{ref_key:"orderBtn",ref:z,class:"btn2",title:d.value.order},[...e[24]||(e[24]=[t("i",{class:"fa-regular fa-arrow-down-a-z","aria-hidden":"true"},null,-1)])],8,vt)])),v.value.is_nested?(a(),l("div",gt,[T.value?(a(),l("button",ht,[...e[25]||(e[25]=[t("i",{class:"fa-solid fa-spinner fa-spin","aria-label":"Loading"},null,-1)])])):c("",!0),u.value&&!T.value?(a(),l("button",{key:1,onClick:e[3]||(e[3]=o=>ve()),class:"btn2",title:d.value.flatten},[e[26]||(e[26]=t("i",{class:"fa-regular fa-boxes-stacked","aria-hidden":"true"},null,-1)),t("span",{class:"sr-only",innerHTML:d.value.flatten},null,8,mt)],8,yt)):T.value?c("",!0):(a(),l("button",{key:2,onClick:e[4]||(e[4]=o=>ve()),class:"btn2",title:d.value.nest},[e[27]||(e[27]=t("i",{class:"fa-regular fa-layer-group","aria-hidden":"true"},null,-1)),t("span",{class:"sr-only",innerHTML:d.value.nest},null,8,xt)],8,bt))])):c("",!0),v.value.has_table?(a(),l("div",kt,[q()?(a(),l("button",{key:0,onClick:e[5]||(e[5]=o=>ge()),class:"btn2",title:d.value.layout_table},[e[28]||(e[28]=t("i",{class:"fa-regular fa-list-ul","aria-hidden":"true"},null,-1)),t("span",{class:"sr-only",innerHTML:d.value.layout_table},null,8,Lt)],8,wt)):(a(),l("button",{key:1,onClick:e[6]||(e[6]=o=>ge()),class:"btn2",title:d.value.layout_grid},[e[29]||(e[29]=t("i",{class:"fa-regular fa-grid-2","aria-hidden":"true"},null,-1)),t("span",{class:"sr-only",innerHTML:d.value.layout_grid},null,8,Tt)],8,Mt))])):c("",!0),O()&&m.value.create?(a(),l("div",_t,[t("a",{href:y.value.create,class:"btn2 btn-primary join-item btn-new-entity"},[e[30]||(e[30]=t("i",{class:"fa-regular fa-plus","aria-hidden":"true"},null,-1)),t("span",{class:"hidden md:inline",innerHTML:v.value.singular},null,8,Pt)],8,Ht),m.value.template?(a(),l("div",Ct,[t("button",{ref_key:"templateBtn",ref:oe,type:"button",class:"btn2 btn-primary join-item","aria-expanded":"false","aria-label":"Create from template","aria-haspopup":"menu","aria-controls":"templates-submenu"},[e[31]||(e[31]=t("i",{class:"fa-regular fa-caret-down","aria-hidden":"true"},null,-1)),t("span",{class:"sr-only",innerHTML:d.value.actions},null,8,$t)],512)])):c("",!0)])):c("",!0)]))]),t("div",St,[t("div",{class:_(He())},[i.value&&q()?(a(),l("a",{key:0,href:i.value.urls.parent,class:"entity w-[47%] xs:w-[25%] sm:w-48 overflow-hidden rounded flex flex-col shadow-xs hover:shadow-md sm text-link"},[e[35]||(e[35]=t("div",{class:"w-46 flex items-center justify-center grow text-6xl"},[t("i",{class:"fa-regular fa-arrow-left","aria-hidden":"true"})],-1)),t("div",zt,[t("span",{innerHTML:i.value.links.back},null,8,Ot)])],8,Dt)):i.value&&!q()?(a(),l("a",{key:1,href:i.value.urls.parent,class:"rounded-xl flex bg-base-100 shadow-xs items-center gap-4 py-2 px-4 overflow-hidden text-link"},[e[36]||(e[36]=t("div",{class:""},[t("i",{class:"fa-regular fa-arrow-left","aria-hidden":"true"})],-1)),t("div",Ft,[t("span",{innerHTML:i.value.links.back},null,8,It)])],8,qt)):c("",!0),(a(!0),l(C,null,B(r.value,o=>(a(),G(L,{key:o.id,entity:o,"is-parent":!1,i18n:d.value,selecting:P.value,layout:$.value,nesting:u.value},null,8,["entity","i18n","selecting","layout","nesting"]))),128))],2)]),(a(),l("div",Nt,[D.value?(a(),l("div",Gt,[...e[37]||(e[37]=[t("i",{class:"fa-solid fa-spinner fa-spin","aria-label":"Loading"},null,-1)])])):(a(),G(Ue(Qe),{key:0,data:k.value,itemClasses:["bg-base-200","text-base-content","border-none","hover:bg-base-300"],activeClasses:["bg-base-100","border-none","text-base-content"],onPaginationChangePage:Me},null,8,["data"]))])),r.value.length===0?(a(),l("p",{key:1,class:"help-text italic",innerHTML:d.value.noResults},null,8,Jt)):c("",!0),t("div",{ref_key:"hiddenMenus",ref:J,style:{display:"none"}},[t("div",{ref_key:"orderMenu",ref:w,class:"flex flex-col gap-1"},[t("button",{onClick:e[9]||(e[9]=o=>W("name")),class:_([X("name"),"px-2 py-2 hover:bg-base-200 rounded-xl flex items-center gap-1.5 text-sm transition-all duration-150 text-base-content"])},[N("name")?(a(),l("i",{key:0,class:_(Y("name"))},null,2)):c("",!0),t("span",{innerHTML:d.value.fields.name},null,8,Qt)],2),t("button",{onClick:e[10]||(e[10]=o=>W("type")),class:_([X("type"),"px-2 py-2 hover:bg-base-200 rounded-xl flex items-center gap-1.5 text-sm transition-all duration-150 text-base-content"])},[N("type")?(a(),l("i",{key:0,class:_(Y("type"))},null,2)):c("",!0),t("span",{innerHTML:d.value.fields.type},null,8,Vt)],2),t("button",{onClick:e[11]||(e[11]=o=>W("is_private")),class:_([X("is_private"),"px-2 py-2 hover:bg-base-200 rounded-xl flex items-center gap-1.5 text-sm transition-all duration-150 text-base-content"])},[N("is_private")?(a(),l("i",{key:0,class:_(Y("is_private"))},null,2)):c("",!0),t("span",{innerHTML:d.value.fields.is_private},null,8,Kt)],2)],512),t("div",{ref_key:"templateMenu",ref:ue,class:"flex flex-col gap-1"},[(a(!0),l(C,null,B(b.value,o=>(a(),l("a",{href:o.url,key:o.id,class:"px-2 py-2 hover:bg-base-200 rounded-xl flex items-center gap-1.5 text-sm transition-all duration-150 text-base-content"},[e[38]||(e[38]=t("i",{class:"fa-regular fa-star","aria-hidden":"true"},null,-1)),t("span",{innerHTML:o.name},null,8,Xt)],8,Wt))),128)),b.value.length>0?(a(),l("hr",Yt)):c("",!0),t("a",Zt,[e[39]||(e[39]=t("i",{class:"fa-regular fa-external-link","aria-hidden":"true"},null,-1)),t("span",{class:"text-nowrap",innerHTML:d.value.templates},null,8,en)])],512),m.value?(a(),l("div",{key:0,ref_key:"actionsMenu",ref:de,class:"flex flex-col gap-1"},[m.value?.admin?(a(),l("button",{key:0,onClick:e[12]||(e[12]=o=>A(y.value.permissions)),class:"flex items-center gap-2 px-2 py-1 cursor-pointer text-nowrap hover:text-primary"},[e[40]||(e[40]=t("i",{class:"fa-regular fa-lock","aria-hidden":"true"},null,-1)),t("span",{innerHTML:d.value.bulkPermissions},null,8,tn)])):c("",!0),m.value?.admin?(a(),l("button",{key:1,onClick:e[13]||(e[13]=o=>A(y.value.transform)),class:"flex items-center gap-2 px-2 py-1 cursor-pointer text-nowrap hover:text-primary"},[e[41]||(e[41]=t("i",{class:"fa-regular fa-exchange-alt","aria-hidden":"true"},null,-1)),t("span",{innerHTML:d.value.bulkTransform},null,8,nn)])):c("",!0),t("button",{onClick:e[14]||(e[14]=o=>A(y.value.copy)),class:"flex items-center gap-2 px-2 py-1 cursor-pointer text-nowrap hover:text-primary"},[e[42]||(e[42]=t("i",{class:"fa-regular fa-clone","aria-hidden":"true"},null,-1)),t("span",{innerHTML:d.value.bulkCopy},null,8,an)]),m.value?.admin?(a(),l("button",{key:2,onClick:e[15]||(e[15]=o=>A(y.value.template)),class:"flex items-center gap-2 px-2 py-1 cursor-pointer text-nowrap hover:text-primary"},[e[43]||(e[43]=t("i",{class:"fa-regular fa-table","aria-hidden":"true"},null,-1)),t("span",{innerHTML:d.value.bulkTemplate},null,8,ln)])):c("",!0),m.value?.admin?(a(),l("button",{key:3,onClick:e[16]||(e[16]=o=>be()),class:"flex items-center gap-2 px-2 py-1 cursor-pointer text-nowrap hover:text-primary"},[e[44]||(e[44]=t("i",{class:"fa-regular fa-print","aria-hidden":"true"},null,-1)),t("span",{innerHTML:d.value.bulkPrint},null,8,sn)])):c("",!0),m.value?.delete?(a(),l("button",{key:4,onClick:e[17]||(e[17]=o=>_e()),class:"flex items-center gap-2 px-2 py-1 cursor-pointer text-error hover:bg-error hover:text-error-content rounded"},[e[45]||(e[45]=t("i",{class:"fa-regular fa-trash-can","aria-hidden":"true"},null,-1)),t("span",{innerHTML:d.value.bulkDelete},null,8,rn)])):c("",!0)],512)):c("",!0)],512),t("form",{method:"POST",action:y.value.print,ref_key:"printForm",ref:M},[(a(!0),l(C,null,B(ee(),o=>(a(),l("input",{type:"hidden",name:"model[]",value:o},null,8,un))),256)),t("input",{type:"hidden",name:"_token",value:g.value},null,8,dn)],8,on)]))}}}),pn=["data-stack"],fn=["href","title"],vn=["title"],gn=["aria-label"],hn={key:0,class:"fa-regular fa-check","aria-label":"selected"},yn=["href","data-id","data-url","innerHTML"],mn=["data-stack"],bn=["href","title"],xn=["title"],kn=["aria-label"],wn={key:0,class:"fa-regular fa-check","aria-label":"selected"},Ln=["href","data-id","data-url","innerHTML"],Mn={class:"flex items-center gap-4"},Tn={key:0,class:"w-5 h-5 cursor-pointer border rounded-full text-center"},_n={key:0,class:"fa-regular fa-check","aria-label":"selected"},Hn=["href","title"],Pn=["href","data-id","data-url","innerHTML"],Cn={class:"text-neutral-content lg:w-40 truncate"},$n=["innerHTML"],jn={class:"flex items-center gap-4 justify-between"},Bn={class:"flex items-center gap-1"},Un=["href","innerHTML","title"],En=["aria-label","title"],An=["title"],Rn=["innerHTML"],Sn={key:4,class:"text-center"},Dn={key:5,class:"flex flex-col gap-1 pl-2"},zn=we({__name:"Entity",props:{entity:{},isParent:{type:Boolean},selecting:{type:Boolean},i18n:{},layout:{},nesting:{type:Boolean}},setup(n){const p=f(!1),r=f(null),i=n,g=()=>{let u="entity overflow-hidden rounded shadow-xs hover:shadow-md w-[47%] xs:w-[25%] sm:w-48 aspect-square flex flex-col bg-box";return i.isParent&&(u+="shadow-lg stacking-parent font-bold"),u},m=()=>{let u="rounded-xl flex bg-base-100 shadow-xs items-center gap-4 py-2 px-4 overflow-hidden justify-between";return i.isParent&&(u+=" shadow-lg stacking-parent"),i.selecting&&(u+=" cursor-pointer"),u},M=()=>({backgroundImage:"url('"+i.entity.images.thumb+"')"}),v=()=>!(!T()&&!i.nesting),k=()=>i.entity.children&&!T()&&!p.value&&!r.value,x=()=>{let u={};return u["data-entity"]=i.entity.id,u["data-entity-type"]=i.entity.entityType.code,u["data-type"]=i.entity.type,i.entity.attributes.forEach(b=>{u[`data-${b}`]=!0}),u},y=()=>i.entity.children>0,h=u=>{i.selecting?H():u.target&&u.target.href&&(window.location.href=u.target.href)},H=()=>{i.entity.selected=!i.entity.selected},U=()=>{let u="rounded rounded-full opacity-80 h-6 w-6 absolute left-1.5 top-1.5 border border-primary flex items-center justify-center text-xl";return i.entity.selected?u+" bg-primary text-primary-content":u+" bg-base-100 "},S=()=>{p.value=!0,fetch(i.entity.urls.children_api).then(u=>u.json()).then(u=>{E(u),p.value=!1})},E=u=>{r.value=[],u.entities.data.forEach(b=>{r.value.push(b)})},D=u=>" tag rounded-full text-xs flex items-center justify-center badge cursor-pointer hover:shadow-xs "+u.colour,T=()=>i.layout==="grid";return(u,b)=>{const z=ie("Entity",!0);return a(),l(C,null,[T()&&y()?(a(),l("div",{key:0,class:"stack inline-grid items-center align-items-end w-[47%] xs:w-[25%] sm:w-48","data-stack":n.entity.children},[t("div",j({class:"entity overflow-hidden rounded shadow-xs hover:shadow-md aspect-square w-full flex flex-col bg-box"},x()),[t("a",{href:n.entity.urls.children,title:n.entity.name,class:"block avatar grow relative cover-background overflow-hidden text-center text-link",style:se(M()),onClick:R(h,["prevent"])},[n.entity.is_private&&!n.selecting?(a(),l("div",{key:0,class:"bubble-private absolute left-1.5 top-1.5 text-xs shadow-xs flex justify-center align-items-center items-center aspect-square rounded-full w-6 h-6 bg-box opacity-80 text-base-content",title:n.i18n.is_private},[t("i",{class:"fa-regular fa-lock","aria-label":n.i18n.is_private},null,8,gn)],8,vn)):n.selecting?(a(),l("div",{key:1,class:_(U())},[n.entity.selected?(a(),l("i",hn)):c("",!0)],2)):c("",!0)],12,fn),t("a",{href:n.entity.urls.show,class:"block text-center relative truncate h-12 p-4 text-link","data-toggle":"tooltip-ajax","data-id":n.entity.id,"data-url":n.entity.urls.tooltip,innerHTML:n.entity.name,onClick:R(h,["prevent"])},null,8,yn)],16),(a(!0),l(C,null,B(n.entity.children,w=>(a(),l("div",{class:"entity entity-stack bg-base-300 w-full overflow-hidden rounded aspect-square flex flex-col shadow-xs",title:"{{ __('datagrids.tooltips.nested') }}","data-stack":w},[...b[1]||(b[1]=[t("div",{class:"block grow"},null,-1),t("div",{class:"block h-12 p-4 bg-box"},null,-1)])],8,mn))),256))],8,pn)):T()?(a(),l("div",j({key:1,class:g()},x()),[t("a",{href:n.entity.urls.show,class:"block avatar grow relative cover-background",style:se(M()),title:n.entity.name,onClick:R(h,["prevent"])},[n.entity.is_private&&!n.selecting?(a(),l("div",{key:0,class:"bubble-private absolute left-1.5 top-1.5 text-xs shadow-xs flex justify-center align-items-center items-center aspect-square rounded-full w-6 h-6 bg-box opacity-80 text-base-content",title:n.i18n.is_private},[t("i",{class:"fa-regular fa-lock","aria-label":n.i18n.is_private},null,8,kn)],8,xn)):n.selecting?(a(),l("div",{key:1,class:_(U())},[n.entity.selected?(a(),l("i",wn)):c("",!0)],2)):c("",!0)],12,bn),t("a",{href:n.entity.urls.show,class:"block text-center relative truncate h-12 p-4 text-link","data-toggle":"tooltip-ajax","data-id":n.entity.id,"data-url":n.entity.urls.tooltip,innerHTML:n.entity.name,onClick:R(h,["prevent"])},null,8,Ln)],16)):(a(),l("div",j({key:2,class:m()},x(),{onClick:h}),[t("div",Mn,[n.selecting?(a(),l("div",Tn,[n.entity.selected?(a(),l("i",_n)):c("",!0)])):c("",!0),t("a",{href:n.entity.urls.show,class:"block avatar w-8 h-8 rounded-full relative cover-background",style:se(M()),title:n.entity.name,onClick:R(h,["prevent"])},null,12,Hn),t("a",{href:n.entity.urls.show,class:"truncate lg:w-40 text-link","data-toggle":"tooltip-ajax","data-id":n.entity.id,"data-url":n.entity.urls.tooltip,innerHTML:n.entity.name,onClick:R(h,["prevent"])},null,8,Pn),t("div",Cn,[t("span",{innerHTML:n.entity.type},null,8,$n)])]),t("div",jn,[t("div",Bn,[(a(!0),l(C,null,B(n.entity.tags,w=>(a(),l("a",{href:w.urls.show,class:_(D(w)),innerHTML:w.shortname,title:w.name},null,10,Un))),256))]),n.entity.is_private?(a(),l("i",{key:0,class:"fa-regular fa-lock","aria-label":n.i18n.is_private,title:n.i18n.is_private},null,8,En)):c("",!0)])],16)),v()&&k()?(a(),l("div",{key:3,onClick:b[0]||(b[0]=w=>S()),title:n.entity.name,class:"flex items-center justify-center gap-2 cursor-pointer text-xs p-0.5 hover:bg-base-200 rounded-xl","aria-label":"Show children"},[b[2]||(b[2]=t("i",{class:"fa-regular fa-angles-down","aria-hidden":"true"},null,-1)),t("span",{innerHTML:n.entity.children},null,8,Rn)],8,An)):c("",!0),p.value?(a(),l("span",Sn,[...b[3]||(b[3]=[t("i",{class:"fa-solid fa-spinner fa-spin","aria-label":"Loading"},null,-1)])])):c("",!0),v()&&r.value?(a(),l("div",Dn,[(a(!0),l(C,null,B(r.value,w=>(a(),G(z,{key:w.id,entity:w,"is-parent":!1,i18n:n.i18n,selecting:n.selecting,layout:n.layout,nesting:n.nesting},null,8,["entity","i18n","selecting","layout","nesting"]))),128))])):c("",!0)],64)}}}),re=Ee({});re.component("entities-explorer",cn);re.component("entities-entity",zn);re.mount("#entities-explorer");
