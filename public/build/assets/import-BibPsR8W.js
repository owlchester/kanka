import{a as p}from"./axios-upsvKRUO.js";const l=document.querySelector(".progress-uploading"),c=document.querySelector(".progress-validating");let n;const m=()=>{const t=document.getElementById("campaign-import-form");t&&(n=document.querySelector(".progress"),t.onsubmit=d=>{d.preventDefault();let a=0,e=new FormData,s=document.getElementById("export-files");Array.from(s.files).forEach(r=>{r.name.endsWith(".zip")&&(a++,e.append("files[]",r))});let o=document.querySelector('input[name="campaign"]');e.append("campaign",o.value);let i=document.querySelector('input[name="token"]');if(e.append("token",i.value),a>0&&a<2)u(t,e);else return alert("Please select the campaign export zip files."),document.querySelector(".loading").classList.remove("loading"),!1})},u=(t,d)=>{t.classList.add("hidden");let a={headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){let s=Math.round(e.loaded*100/e.total);document.querySelector('[role="progressbar"]').style.width=s+"%",s===100&&(l.classList.add("hidden"),c.classList.remove("hidden"));const o=document.querySelector(".progress-percent");o.classList.remove("hidden"),o.innerHTML=s}};n.classList.remove("hidden"),l.classList.remove("hidden"),c.classList.add("hidden"),p.post(t.action,d,a).then(function(e){n.classList.add("hidden"),e.data.success&&window.location.reload()}).catch(function(e){if(t.classList.remove("hidden"),n.classList.add("hidden"),e.response&&e.response.data.message){fileError.text(e.response.data.message).fadeToggle();let o=e.response.data.errors;Object.keys(o).forEach(r=>{window.showToast(o[r],"error")})}document.querySelector(".loading").classList.remove("loading")})};m();
