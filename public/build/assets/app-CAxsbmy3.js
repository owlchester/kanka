import{S as pt}from"./sortable.esm-DdTU3J9A.js";import"./dialog-DWzDCZv8.js";import{C as fe}from"./coloris-DsKOFKq5.js";import{d as B,o as pe,a as i,c as r,b as o,t as h,n as W,e as S,f as g,F as q,r as C,g as R,h as y,i as Q,w as K,j as X,v as ce,k as ne,l as gt,m as be,p as ue,q as Ae,u as yt,s as Qe,x as bt,y as Z,z as sn}from"./vendor-tiptap-BMQcrX0l.js";import{v as xt}from"./v-click-outside.umd-Cl-Y_A58.js";import{_ as on}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{_ as rn}from"./Browser.vue_vue_type_script_setup_true_lang-GW2tDcap.js";import{T as ln,p as cn}from"./vue-tippy.esm-browser-DmwBS-cR.js";import{t as ge}from"./tippy.esm-CnBRltuW.js";import"./_commonjsHelpers-Cpj98o6Y.js";const wt="kanka.default";window.triggerEvent=function(e){e=e||wt;const t=new Event(e);document.dispatchEvent(t)};window.onEvent=function(e,t){t=t||wt,document.addEventListener(t,e)};window.onReady=function(e){document.readyState==="complete"||document.readyState==="interactive"?setTimeout(e,1):document.addEventListener("DOMContentLoaded",e)};window.initTags=function(){document.querySelectorAll(".form-tags")?.forEach(function(e){e.classList.contains("select2-hidden-accessible")||e.dataset.loaded!==1&&(e.dataset.loaded=1,$(e).select2({tags:e.dataset.allowNew==="true",allowClear:e.dataset.allowClear==="true",dropdownParent:e.dataset.dropdownParent||"",minimumInputLength:0,ajax:{quietMillis:500,delay:500,url:e.dataset.url,dataType:"json",data:function(t){return{q:t.term?.trim()}},processResults:function(t){return{results:t}},cache:!0},escapeMarkup:function(t){return t},createTag:function(t){const n=t.term?.trim();return n===""?null:{id:n,text:n,newTag:!0}},templateResult:function(t){const n=document.createElement("span");return n.classList.add("block","grow","text-left"),n.innerHTML=t.text,t.colour&&(n.classList.add("flex","gap-2","items-center","text-left"),n.innerHTML="<span class='rounded-full flex-none w-6 h-6 "+t.colour+"' /></span><span class='grow'>"+t.text+"</span>"),n},templateSelection:function(t,n){if(t.newTag){const l=document.createElement("span");return l.classList.add("new-tag"),l.title=e.dataset.newTag,l.innerHTML=t.text+' <i class="fa-solid fa-flag" aria-hidden="true"></i>',l}let a=t.element,s=[];return t.colour?s=t.colour.trim().split(" "):a.dataset.colour&&(s=a.dataset.colour.trim().split(" ")),s.length>0&&s.forEach(l=>{l.trim().length!==0&&n[0].classList.add(l)}),n[0].classList.add("text-left"),t.text}}))}),document.querySelectorAll(".position-dropdown")?.forEach(function(e){e.classList.contains("select2-hidden-accessible")||e.dataset.loaded!==1&&(e.dataset.loaded=1,$(e).select2({tags:!0,allowClear:!0,dropdownParent:e.dataset.dropdownParent||"",placeholder:e.dataset.placeholder,minimumInputLength:0,createTag:function(t){const n=t.term?.trim();return n===""?null:{id:n,text:n,newTag:!0}}}))})};window.initTags();var Oe={};var Ue;function un(){return Ue||(Ue=1,(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/de",[],function(){return{errorLoading:function(){return"Die Ergebnisse konnten nicht geladen werden."},inputTooLong:function(t){return"Bitte "+(t.input.length-t.maximum)+" Zeichen weniger eingeben"},inputTooShort:function(t){return"Bitte "+(t.minimum-t.input.length)+" Zeichen mehr eingeben"},loadingMore:function(){return"Lade mehr Ergebnisse…"},maximumSelected:function(t){var n="Sie können nur "+t.maximum+" Element";return t.maximum!=1&&(n+="e"),n+=" auswählen"},noResults:function(){return"Keine Übereinstimmungen gefunden"},searching:function(){return"Suche…"},removeAllItems:function(){return"Entferne alle Elemente"}}}),e.define,e.require})()),Oe}un();var ze={};var Ke;function dn(){return Ke||(Ke=1,(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(t){var n=t.input.length-t.maximum,a="Please delete "+n+" character";return n!=1&&(a+="s"),a},inputTooShort:function(t){return"Please enter "+(t.minimum-t.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(t){var n="You can only select "+t.maximum+" item";return t.maximum!=1&&(n+="s"),n},noResults:function(){return"No results found"},searching:function(){return"Searching…"},removeAllItems:function(){return"Remove all items"}}}),e.define,e.require})()),ze}dn();var Ve={};var We;function mn(){return We||(We=1,(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/es",[],function(){return{errorLoading:function(){return"No se pudieron cargar los resultados"},inputTooLong:function(t){var n=t.input.length-t.maximum,a="Por favor, elimine "+n+" car";return a+=n==1?"ácter":"acteres"},inputTooShort:function(t){var n=t.minimum-t.input.length,a="Por favor, introduzca "+n+" car";return a+=n==1?"ácter":"acteres"},loadingMore:function(){return"Cargando más resultados…"},maximumSelected:function(t){var n="Sólo puede seleccionar "+t.maximum+" elemento";return t.maximum!=1&&(n+="s"),n},noResults:function(){return"No se encontraron resultados"},searching:function(){return"Buscando…"},removeAllItems:function(){return"Eliminar todos los elementos"}}}),e.define,e.require})()),Ve}mn();var Ge={};var Je;function fn(){return Je||(Je=1,(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/fr",[],function(){return{errorLoading:function(){return"Les résultats ne peuvent pas être chargés."},inputTooLong:function(t){var n=t.input.length-t.maximum;return"Supprimez "+n+" caractère"+(n>1?"s":"")},inputTooShort:function(t){var n=t.minimum-t.input.length;return"Saisissez au moins "+n+" caractère"+(n>1?"s":"")},loadingMore:function(){return"Chargement de résultats supplémentaires…"},maximumSelected:function(t){return"Vous pouvez seulement sélectionner "+t.maximum+" élément"+(t.maximum>1?"s":"")},noResults:function(){return"Aucun résultat trouvé"},searching:function(){return"Recherche en cours…"},removeAllItems:function(){return"Supprimer tous les éléments"}}}),e.define,e.require})()),Ge}fn();var Ze={};var Ye;function hn(){return Ye||(Ye=1,(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/it",[],function(){return{errorLoading:function(){return"I risultati non possono essere caricati."},inputTooLong:function(t){var n=t.input.length-t.maximum,a="Per favore cancella "+n+" caratter";return a+=n!==1?"i":"e"},inputTooShort:function(t){return"Per favore inserisci "+(t.minimum-t.input.length)+" o più caratteri"},loadingMore:function(){return"Caricando più risultati…"},maximumSelected:function(t){var n="Puoi selezionare solo "+t.maximum+" element";return t.maximum!==1?n+="i":n+="o",n},noResults:function(){return"Nessun risultato trovato"},searching:function(){return"Sto cercando…"},removeAllItems:function(){return"Rimuovi tutti gli oggetti"}}}),e.define,e.require})()),Ze}hn();var Xe={};var et;function vn(){return et||(et=1,(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/nl",[],function(){return{errorLoading:function(){return"De resultaten konden niet worden geladen."},inputTooLong:function(t){return"Gelieve "+(t.input.length-t.maximum)+" karakters te verwijderen"},inputTooShort:function(t){return"Gelieve "+(t.minimum-t.input.length)+" of meer karakters in te voeren"},loadingMore:function(){return"Meer resultaten laden…"},maximumSelected:function(t){var n=t.maximum==1?"kan":"kunnen",a="Er "+n+" maar "+t.maximum+" item";return t.maximum!=1&&(a+="s"),a+=" worden geselecteerd"},noResults:function(){return"Geen resultaten gevonden…"},searching:function(){return"Zoeken…"},removeAllItems:function(){return"Verwijder alle items"}}}),e.define,e.require})()),Xe}vn();var tt={};var nt;function pn(){return nt||(nt=1,(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/pl",[],function(){var t=["znak","znaki","znaków"],n=["element","elementy","elementów"],a=function(s,l){return s===1?l[0]:s>1&&s<=4?l[1]:s>=5?l[2]:void 0};return{errorLoading:function(){return"Nie można załadować wyników."},inputTooLong:function(s){var l=s.input.length-s.maximum;return"Usuń "+l+" "+a(l,t)},inputTooShort:function(s){var l=s.minimum-s.input.length;return"Podaj przynajmniej "+l+" "+a(l,t)},loadingMore:function(){return"Trwa ładowanie…"},maximumSelected:function(s){return"Możesz zaznaczyć tylko "+s.maximum+" "+a(s.maximum,n)},noResults:function(){return"Brak wyników"},searching:function(){return"Trwa wyszukiwanie…"},removeAllItems:function(){return"Usuń wszystkie przedmioty"}}}),e.define,e.require})()),tt}pn();var at={};var st;function gn(){return st||(st=1,(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/pt-BR",[],function(){return{errorLoading:function(){return"Os resultados não puderam ser carregados."},inputTooLong:function(t){var n=t.input.length-t.maximum,a="Apague "+n+" caracter";return n!=1&&(a+="es"),a},inputTooShort:function(t){return"Digite "+(t.minimum-t.input.length)+" ou mais caracteres"},loadingMore:function(){return"Carregando mais resultados…"},maximumSelected:function(t){var n="Você só pode selecionar "+t.maximum+" ite";return t.maximum==1?n+="m":n+="ns",n},noResults:function(){return"Nenhum resultado encontrado"},searching:function(){return"Buscando…"},removeAllItems:function(){return"Remover todos os itens"}}}),e.define,e.require})()),at}gn();var ot={};var it;function yn(){return it||(it=1,(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/ru",[],function(){function t(n,a,s,l){return n%10<5&&n%10>0&&n%100<5||n%100>20?n%10>1?s:a:l}return{errorLoading:function(){return"Невозможно загрузить результаты"},inputTooLong:function(n){var a=n.input.length-n.maximum,s="Пожалуйста, введите на "+a+" символ";return s+=t(a,"","a","ов"),s+=" меньше"},inputTooShort:function(n){var a=n.minimum-n.input.length,s="Пожалуйста, введите ещё хотя бы "+a+" символ";return s+=t(a,"","a","ов")},loadingMore:function(){return"Загрузка данных…"},maximumSelected:function(n){var a="Вы можете выбрать не более "+n.maximum+" элемент";return a+=t(n.maximum,"","a","ов")},noResults:function(){return"Совпадений не найдено"},searching:function(){return"Поиск…"},removeAllItems:function(){return"Удалить все элементы"}}}),e.define,e.require})()),ot}yn();var rt={};var lt;function bn(){return lt||(lt=1,(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;e.define("select2/i18n/sk",[],function(){var t={2:function(n){return n?"dva":"dve"},3:function(){return"tri"},4:function(){return"štyri"}};return{errorLoading:function(){return"Výsledky sa nepodarilo načítať."},inputTooLong:function(n){var a=n.input.length-n.maximum;return a==1?"Prosím, zadajte o jeden znak menej":a>=2&&a<=4?"Prosím, zadajte o "+t[a](!0)+" znaky menej":"Prosím, zadajte o "+a+" znakov menej"},inputTooShort:function(n){var a=n.minimum-n.input.length;return a==1?"Prosím, zadajte ešte jeden znak":a<=4?"Prosím, zadajte ešte ďalšie "+t[a](!0)+" znaky":"Prosím, zadajte ešte ďalších "+a+" znakov"},loadingMore:function(){return"Načítanie ďalších výsledkov…"},maximumSelected:function(n){return n.maximum==1?"Môžete zvoliť len jednu položku":n.maximum>=2&&n.maximum<=4?"Môžete zvoliť najviac "+t[n.maximum](!1)+" položky":"Môžete zvoliť najviac "+n.maximum+" položiek"},noResults:function(){return"Nenašli sa žiadne položky"},searching:function(){return"Vyhľadávanie…"},removeAllItems:function(){return"Odstráňte všetky položky"}}}),e.define,e.require})()),rt}bn();window.initForeignSelect=function(){const e=document.querySelectorAll("select.select2");e.length!==0&&(e.forEach(t=>{if(t.classList.contains("select2-hidden-accessible"))return;if(t.classList.contains("campaign-genres")){$(t).select2({tags:!1,allowClear:!0,dropdownParent:"",width:"100%",maximumSelectionLength:3});return}const n=t.dataset.url,a=t.dataset.allowClear,s=t.dataset.dropdownParent||"",l=t.dataset.placeholder;if(!n){$(t).select2({tags:!1,placeholder:l,allowClear:a??!1,language:t.dataset.language,minimumInputLength:0,dropdownParent:s,width:"100%"});return}$(t).select2({tags:t.dataset.allowNew==="true",placeholder:l,allowClear:a||!0,language:t.dataset.language,minimumInputLength:0,dropdownParent:s,width:"100%",ajax:{delay:500,quietMillis:500,url:n,dataType:"json",data:function(u){return{q:u.term?.trim()}},processResults:function(u){return{results:u}},error:function(u){return u.status===503&&window.showToast(u.responseJSON.message,"error"),{results:[]}},cache:!0},templateResult:xn,templateSelection:wn,escapeMarkup:function(u){return u},createTag:function(u){if(t.dataset.allowNew!=="true")return null;let c=u.term?.trim();return c===""?null:{id:c,text:c+" ("+t.dataset.newTag+")",newTag:!0}}})}),kn(),Ln())};const xn=e=>{const t=document.createElement("span");return e.image?(t.classList.add("flex","gap-2","items-center","text-left"),t.innerHTML="<img src='"+e.image+"' class='rounded-full flex-none w-6 h-6'/><span class='grow'>"+e.text+"</span>"):t.innerHTML=e.text,t},wn=e=>{if(!e.id)return e.text;const t=document.createElement("span");return t.innerHTML=e.text,t},kn=()=>{const e=document.querySelectorAll("select.select2-local");e.length!==0&&e.forEach(t=>{$(t).select2({placeholder:t.dataset.placeholder,language:t.dataset.language,allowClear:!0})})},Ln=()=>{const e=document.querySelectorAll("select.select2-colour");e.length!==0&&e.forEach(t=>{$(t).select2({placeholder:t.dataset.placeholder,language:t.dataset.language,allowClear:!1,templateResult:ct,templateSelection:ct})})},ct=e=>{if(e.id==="none")return e.text;const t=document.createElement("span");return t.innerHTML='<div class="badge label bg-'+e.id+'"> </div>'+e.text,t},kt=()=>{document.querySelectorAll("form[data-shortcut]").forEach(function(t){_n(t)})},Lt=()=>{document.addEventListener("keydown",function(e){const t=e.target,n=document.getElementById("primary-dialog"),a=document.querySelector(".quick-creator-button");let s=document.querySelector('[data-keyboard="edit"]');if(e.key==="]"){if(me(t))return;e.preventDefault();const l=document.querySelector(".sidebar-toggle");l.click(),l.blur()}else if(e.key==="k"){if(me(t))return;e.preventDefault(),document.getElementById("entity-lookup").focus()}else if(e.key==="n"&&!(e.ctrlKey||e.metaKey)&&!e.altKey&&a){if(me(t)||n?.open)return;a.click()}else if(e.key==="e"&&!(e.ctrlKey||e.metaKey)&&s){if(me(t)||n?.open)return;s.click()}else e.key==="Escape"&&n?.classList.contains("qq-modal-selection").length===1&&window.closeDialog(n)})},me=e=>!e||e.length===0?!1:["input","textarea","select"].includes(e.tagName.toLowerCase())||e.getAttribute("contentEditable")==="true"?!0:!!e.classList.contains("CodeMirror"),_n=e=>{e.dataset.shortcutInit||(e.dataset.shortcutInit=1,document.addEventListener("keydown",function(t){if((t.ctrlKey||t.metaKey)&&t.key.toLowerCase()==="s")return t.preventDefault(),e.dataset.unload&&(window.entityFormHasUnsavedChanges=!1),t.shiftKey?xe("submit-update"):t.altKey&&xe("submit-new"),e.requestSubmit(),console.log("requested tos ubmit",e),!1;if((t.ctrlKey||t.metaKey)&&t.altKey&&t.key==="c")return e.dataset.unload&&(window.entityFormHasUnsavedChanges=!1),xe("submit-copy"),e.submit(),!1}))},xe=e=>{const t=document.getElementById("form-submit-main");t&&(t.name=e,document.getElementById("submit-mode").name=e)},_t=()=>{document.querySelectorAll('input[data-paste="fontawesome"]').forEach(function(t){t.addEventListener("paste",function(n){n.preventDefault();const a=(n.clipboardData||window.clipboardData).getData("text");if(a.startsWith('<i class="fa')||a.startsWith('<i class="ra')){const s=document.createElement("div");s.innerHTML=a;let u=s.querySelector("i").getAttribute("class");if(u){t.value=u;return}}t.value=a})})};kt();Lt();_t();window.onEvent(function(){_t(),Lt(),kt()});function Sn(){window.onEvent(function(){St()})}function qn(){const e=document.querySelector('#form-entry input[name="name"]');if(!e||e.dataset.liveDisabled)return;let t="";e.addEventListener("focusout",function(n){if(!e.value||e.value===t)return;t=e.value;const a=this.dataset.duplicate,s=document.querySelector(a);if(!s)return;const l=this.dataset.live+"?q="+encodeURIComponent(this.value)+"&exclude="+this.dataset.id;s.classList.add("hidden");const u=s.querySelector(".duplicates");fetch(l).then(c=>c.json()).then(c=>{u.innerHTML="",c.forEach(f=>{const m=document.createElement("a");m.href=f.url,m.text=f.name,u.appendChild(m)}),c.length>0&&s.classList.remove("hidden")})})}const St=()=>{const e=document.querySelectorAll(".form-submit-actions");if(e.length===0)return;let t=document.getElementById("form-submit-main"),n=document.getElementById("submit-mode");if(n===void 0)throw new Error("No submit mode hidden input found");e.forEach(a=>{a.addEventListener("click",function(s){return s.preventDefault(),n.name=a.dataset.action,t.click(),!1})})};function En(){if(document.querySelectorAll('form[data-unload="1"]').length===0)return;const t=document.querySelector("#form-submit-main");document.querySelectorAll('form[data-unload="1"] input, form[data-unload="1"] select, form[data-unload="1"] textarea').forEach(a=>{a.dataset.skipUnsaved||a.classList.contains("form-control")||(a.addEventListener("change",function(){window.entityFormHasUnsavedChanges=!0}),a.classList.contains("select2")&&(typeof $<"u"?$(a).on("change",()=>{window.entityFormHasUnsavedChanges=!0}):a.addEventListener("change",()=>{window.entityFormHasUnsavedChanges=!0})))}),t&&window.addEventListener("beforeunload",function(a){window.entityFormHasUnsavedChanges&&(a.preventDefault(),a.returnValue="Unsaved data warning")})}const Tn=()=>{document.querySelectorAll(".dynamic-row-add").forEach(t=>{t.addEventListener("click",function(n){n.preventDefault();const a=t.dataset.target,s=t.dataset.template,l=document.createElement("div");return l.innerHTML=document.querySelector("#"+s).innerHTML,document.querySelector("."+a).append(l),ut(),window.triggerEvent(),!1})}),ut()},ut=()=>{document.querySelectorAll(".dynamic-row-delete").forEach(t=>{t.dataset.init!==1&&(t.dataset.init=1,t.addEventListener("click",function(n){n.preventDefault(),t.closest(".parent-delete-row").remove()}),t.addEventListener("keydown",function(n){n.key==="Enter"&&t.click()}))})};Tn();St();En();Sn();qn();const qt=()=>{document.querySelector(".btn-post-collapse")?.addEventListener("click",function(n){n.preventDefault(),document.querySelectorAll(".element-toggle").forEach(s=>{s.classList.add("animate-collapsed"),document.querySelector(s.dataset.target).classList.add("hidden")})}),document.querySelector(".btn-post-expand")?.addEventListener("click",function(n){n.preventDefault(),document.querySelectorAll(".element-toggle").forEach(s=>{s.classList.remove("animate-collapsed"),document.querySelector(s.dataset.target).classList.remove("hidden")})})},Et=()=>{const e=document.querySelector(".story-load-more");e?.addEventListener("click",function(t){return t.preventDefault(),this.classList.add("loading"),axios.get(this.dataset.url).then(n=>{e.parentNode.remove(),console.log(n),document.querySelector(".entity-posts").insertAdjacentHTML("beforeend",n.data),Et(),qt(),window.triggerEvent()}).catch(()=>{e.classList.remove("loading")}),!1})},Cn=()=>{const e=document.querySelector(".domain-trust");e&&e.addEventListener("click",function(t){const n="kanka_trusted_domains";let a=document.cookie.match("(^|;) ?"+n+"=([^;]*)(;|$)");a=a?a[2]:"";const s=e.dataset.domain;a.includes(s)||(a&&(a+="|"),a+=s);let l=new Date;l.setTime(l.getTime()+720*60*60*1e3),document.cookie=n+"="+a+";path=/;expires="+l.toUTCString()+";sameSite=Strict"})},Mn=()=>{let e=window.location.hash.substring(1);if(!e)return;let t=document.getElementById(e);if(t)return;let n=document.getElementById("post-anchor-loader");if(!n)return;let a=e.match(/\d+$/),s=n.dataset.url.replace("/0","/"+a);axios.get(s).then(l=>{n.insertAdjacentHTML("afterbegin",l.data),t=document.getElementById(e),window.scrollTo({top:t.offsetTop,behavior:"smooth"})})};qt();Et();Cn();Mn();const Tt=document.querySelectorAll(".post-perm-add"),An=()=>{window.onEvent(function(){jn()}),Tt.length!==0&&($n(),Ct())},$n=()=>{Tt.forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();let n=this.dataset.type,a=document.querySelector('select[name="'+n+'"]');if(!a||!a.selectedOptions)return!1;let s=document.getElementById(this.dataset.template);for(const u of a.selectedOptions){const c=s.cloneNode(!0);c.classList.remove("hidden"),c.removeAttribute("id"),c.innerHTML=c.innerHTML.replace(/\$SELECTEDID\$/g,u.value).replace(/\$SELECTEDNAME\$/g,u.text),document.getElementById("post-perm-target").insertAdjacentElement("beforebegin",c)}document.getElementById(this.dataset.dialog).close(),Ct();for(const u of a.options)u.selected=!1;return a.value=null,a.dispatchEvent(new Event("change")),!1})})},Ct=()=>{document.querySelectorAll(".post-delete-perm").forEach(t=>{t.closest(".hidden")||t.dataset.init!=="1"&&(t.dataset.init="1",t.addEventListener("click",function(n){console.log("clicking",t,t.closest(".perm-row")),t.closest(".perm-row").remove(),n.preventDefault()}))})},jn=()=>{const e=document.querySelector("form.post-visibility");e&&(e.onsubmit=function(t){return t.preventDefault(),axios.post(this.getAttribute("action"),{visibility_id:this.querySelector('[name="visibility_id"]').value}).then(n=>{document.getElementById("primary-dialog").close(),document.getElementById("visibility-icon-"+n.data.post_id).firstElementChild.className=n.data.icon.class,window.showToast(n.data.toast)}),!1})};An();const Dn=()=>{if(!document.querySelector("#calendar-year-switcher"))return;document.querySelectorAll(".calendar-event-block").forEach(t=>{t.dataset.toggle!=="dialog"&&t.dataset.url&&t.addEventListener("click",function(){window.location=t.dataset.url})}),document.querySelectorAll("[data-dbclick]").forEach(function(t){t.addEventListener("dblclick",function(){window.openDialog("primary-dialog",t.dataset.url)})})},Mt=()=>{const e=document.querySelector('select[name="recurring_periodicity"]');if(!e)return;const t=()=>{const n=document.querySelector(".field-recurring-until");n&&(e.value?n.classList.remove("hidden"):n.classList.add("hidden"))};e.addEventListener("change",t),t()},Hn=()=>{(document.querySelector('[data-shortcut="previous"]')||document.querySelector('[data-shortcut="next"]'))&&document.addEventListener("keydown",function(t){if(t.ctrlKey||t.metaKey){if(t.key==="ArrowLeft"){const n=document.querySelector('[data-shortcut="previous"]');n&&(n.classList.add("loading"),n.click())}else if(t.key==="ArrowRight"){const n=document.querySelector('[data-shortcut="next"]');n&&(n.classList.add("loading"),n.click())}}})};Dn();Hn();Mt();window.onEvent(function(){Mt()});let le,H,we,G,V,N,dt,he,Y;window.onEvent(function(){Pn()});const In=()=>{le=document.querySelector("#entity-calendar-form-add"),H=document.querySelector('select[name="calendar_id"]'),we=document.querySelector('[name="calendar_id"]'),document.querySelector(".entity-calendar-modal-form"),Y=document.querySelector(".entity-calendar-subform"),dt=document.querySelector("#entity-calendar-form-cancel"),document.querySelector(".entity-calendar-form"),V=document.querySelector('input[name="calendar_year"]'),G=document.querySelector('[name="calendar_month"]'),N=document.querySelector("#reminder_day"),he=document.querySelector(".entity-calendar-loading"),le&&(le.addEventListener("click",function(e){e.preventDefault();let t=le.dataset.defaultCalendar;return t&&(we.value=t,Y.classList.remove("hidden"),ve(t)),!1}),dt.addEventListener("click",function(e){e.preventDefault(),H&&(H.value=null),we.value=null})),H&&(H.onchange=e=>{if(console.log("hello mlord"),!H.value)return Y.classList.add("hidden"),!1;Y.classList.remove("hidden"),V=document.querySelector('input[name="calendar_year"]'),G=document.querySelector('[name="calendar_month"]'),N=document.querySelector("#reminder_day"),!V&&document.querySelector('input[name="year"]')&&(V=document.querySelector('input[name="year"]'),G=document.querySelector('select[name="month"]'),N=document.querySelector("#reminder_day")),ve(H.value)}),At()},Pn=()=>{if(!document.getElementById("entity-calendar-modal-add"))return;le=document.querySelector("input[name=calendar-data-url]"),H=document.querySelector('[name="calendar_id"]'),V=document.querySelector('input[name="year"]'),G=document.querySelector('select[name="month"]'),N=document.querySelector("#reminder_day"),he=document.querySelector(".entity-calendar-loading"),Y=document.querySelector(".entity-calendar-subform"),H&&(H.onchange=t=>{if(!H.value){Y.classList.add("hidden");return}ve(H.value),Y.classList.remove("hidden")},H?.value&&ve(H.value));const e=document.querySelector('.entity-calendar-subform input[name="length"]');e&&e.addEventListener("focusout",function(){if(!this.value)return;const t=this.dataset.url.replace("/0/","/"+H.value+"/"),n={day:N.value,month:G.value,year:V.value,length:this.value};axios.get(t,{data:n}).then(a=>{const s=document.querySelector(".length-warning");a.data.overflow==!0?s.classList.remove("hidden"):s.classList.add("hidden")})}),At()},ve=e=>{he.classList.remove("hidden"),e=parseInt(e);const t=document.querySelector('input[name="calendar-data-url"]').dataset.url.replace("/0/","/"+e+"/");fetch(t).then(n=>n.json()).then(n=>{let a=N.value;V.innerHTML="",G.innerHTML="",N.innerHTML="";let s=1,l=1;a||(a=n.current.day);let u=parseInt(n.current.month);Object.entries(n.months).forEach((d,p)=>{const v=document.createElement("option");v.text=d[1].name,v.value=p+1,d[0]===u&&(v.selected=!0),v.dataset.length=d[1].length,G.appendChild(v),s===u&&(l=d[1].length),s++});for(let d=1;d<=l;d++){const p=document.createElement("option");p.text=d,p.value=d,d==a&&(p.selected=!0),N.appendChild(p)}he.classList.add("hidden"),V.value=n.current.year;const f=document.querySelector("select.reminder-periodicity");for(;f.options.length>0;)f.options.remove(0);Object.entries(n.recurring).forEach((d,p)=>{const v=document.createElement("option");v.value=d[0],v.text=d[1],f.appendChild(v)}),document.querySelector("#reminder_length").value=1,n.length===1&&(G.value=n[0].id)})},At=()=>{const e=document.querySelector("#reminder_month");e&&e.addEventListener("change",function(t){const a=e.options[e.selectedIndex].dataset.length;Rn(a)})},Rn=e=>{let t=parseInt(N.value);e=parseInt(e),t>e&&(t=e),N.innerHTML="";for(let n=1;n<=e;n++){const a=document.createElement("option");a.text=n,a.value=n,n===t&&(a.selected=!0),N.appendChild(a)}};In();const $t=document.querySelector("dialog#edit-warning"),Se=300*1e3;let Bn=document.querySelector('input[name="edit-warning"]'),jt,qe=!0;const Nn=()=>{$t&&(window.openDialog("edit-warning",Bn.dataset.url),window.onEvent(function(){Fn()}),Qn())};function Fn(){qe=!1;const e=document.getElementById("entity-edit-warning-ignore");e.addEventListener("click",function(t){t.preventDefault(),qe=!0,axios.post(e.dataset.url).then(()=>{$t.close()})})}const Qn=()=>{const e=document.getElementById("editing-keep-alive");e&&(jt=e.dataset.url,setTimeout(Ee,Se))},Ee=()=>{if(!qe){setTimeout(Ee,Se);return}axios.post(jt).then(()=>{setTimeout(Ee,Se)})};window.onReady(()=>{Nn()});let re,Te;const $e=()=>{document.querySelector("#qq-modal-loading"),document.querySelector("#qq-modal-selection"),Te=document.querySelector("#qq-modal-form"),document.querySelectorAll('[data-toggle="entity-creator"]').forEach(e=>{e.addEventListener("click",On)})},On=e=>{e.preventDefault();const t=e.currentTarget;return t.dataset.type==="inline"?(document.querySelector(".quick-creator-body").classList.add("hidden"),document.querySelector(".quick-creator-footer")?.classList.add("hidden"),document.querySelector(".quick-creator-loading").classList.remove("hidden!")):Un(),axios.get(t.dataset.url).then(a=>{document.querySelector("#primary-dialog").innerHTML=a.data,je(),De(),window.triggerEvent()}),!1},Dt=()=>{const e=document.querySelector("#qq-name-field");!e||e.dataset.init==="1"||(e.dataset.init="1",e.addEventListener("focusout",function(){if(!this.value)return;const t=this.parentNode.querySelector(".duplicate-entity-warning");if(!t)return;t.classList.add("hidden");const n=this.dataset.live+"?q="+this.value+"&type="+this.dataset.type;axios.get(n).then(a=>{if(a.data.length===0){t.classList.add("hidden");return}const s=Object.keys(a.data).map(function(l){return'<a href="'+a.data[l].url+'" class="text-link">'+a.data[l].name+"</a>"}).join(", ");e.parentNode.querySelector(".duplicate-entities").innerHTML=s,t.classList.remove("hidden")})}))},Un=()=>{document.querySelector("#qq-modal-form")?.classList.add("hidden!"),document.querySelector("#qq-modal-selection")?.classList.add("hidden!"),document.querySelector("#qq-modal-loading")?.classList.remove("hidden!")},je=()=>{re=document.querySelectorAll(".quick-creator-submit"),re.length!==0&&(Dt(),De(),re.forEach(e=>{e.addEventListener("click",function(t){let n=this.value;return n&&(document.querySelector('#entity-creator-form [name="action"]').value=n),!0})}),document.getElementById("entity-creator-form").onsubmit=function(e){const t=e.target;e.preventDefault(),re.forEach(s=>s.classList.add("btn-disabled","loading")),document.querySelectorAll("div.text-error").forEach(s=>s.remove());const a=new FormData(t);axios.post(t.getAttribute("action"),a).then(s=>{if(typeof s.data=="object"){if(s.data.redirect){window.location.replace(s.data.redirect);return}let u=new Option(s.data._name,s.data._id,!0,!0),c=document.querySelector("#"+s.data._target);c.appendChild(u),c.dispatchEvent(new Event("change"));const f=document.querySelector("#qq-modal-form");f&&(f.innerHTML="",f.classList.remove("hidden!")),document.querySelector("#qq-modal-loading")?.classList.add("hidden!"),document.querySelector("#qq-modal-selection")?.classList.remove("hidden!"),document.getElementById("primary-dialog").close(),Ce();return}let l=document.getElementById("qq-modal-form");l.innerHTML=s.data,window.triggerEvent(),$e(),Ce()}).catch(s=>{s.response&&window.formErrorHandler(s.response,t),re.forEach(l=>l.classList.remove("btn-disabled","loading")),document.querySelector('#entity-creator-form [name="action"]').value=""})})},De=()=>{document.querySelectorAll(".qq-mode-toggle").forEach(e=>{e.addEventListener("click",function(t){t.preventDefault(),!this.classList.contains("active")&&(document.querySelector(".qq-mode-toggle").classList.remove("active"),this.classList.add("active"),document.querySelector(".quick-creator-body").classList.add("hidden"),document.querySelector(".quick-creator-footer")?.classList.add("hidden"),document.querySelector(".quick-creator-loading").classList.remove("hidden!"),axios.get(this.dataset.url).then(n=>{Te.innerHTML=n.data,Te.classList.remove("hidden!"),Ce(),window.triggerEvent()}))})}),document.querySelector(".qq-action-more")?.addEventListener("click",function(e){e.preventDefault(),this.classList.add("hidden"),document.querySelector(".qq-more-fields").classList.remove("hidden")}),$e()},Ce=()=>{De(),Dt(),je()},zn=()=>{document.querySelectorAll(".quick-creator-subform").forEach(t=>{t.addEventListener("click",n=>{window.openDialog("primary-dialog",t.dataset.url)})})};window.onEvent(function(){$e(),je()});zn();const Ht=()=>{document.querySelectorAll("[data-bulk-action]")?.forEach(n=>{n.addEventListener("click",a=>{a.preventDefault(),Vn(n.dataset.bulkAction)})}),document.querySelectorAll(".bulk-print")?.forEach(n=>{n.addEventListener("click",a=>{a.preventDefault(),n.closest("form").requestSubmit()})})},It=()=>{Kn(),document.querySelectorAll("input[name='model[]']")?.forEach(t=>{t.dataset.initiated!=="1"&&(t.dataset.initiated="1",t.addEventListener("change",n=>{console.log("change"),n.preventDefault(),He()}))})},Kn=()=>{const e=document.querySelector("#datagrid-select-all");e&&e.dataset.loaded!=="1"&&(e.dataset.loaded="1",e.addEventListener("click",function(t){const n=document.querySelectorAll("input[name='model[]']");e.checked?n?.forEach(a=>{a.checked=!0}):n?.forEach(a=>{a.checked=!1}),He()}))},Vn=e=>{let t=[];document.querySelectorAll("input[name='model[]']")?.forEach(a=>{a.checked&&t.push(a.value)}),e==="ajax"?window.onEvent(function(){document.querySelector('#primary-dialog input[name="models"]').value=t.toString()}):document.querySelector("#datagrid-bulk-"+e+"-models").value=t.toString()},He=()=>{let e=!0;document.querySelectorAll("input[name='model[]']")?.forEach(a=>{a.checked&&(e=!1)}),document.querySelectorAll(".datagrid-bulk-actions .btn2")?.forEach(a=>{e?(a.disabled=!0,a.classList.add("btn-disabled")):(a.disabled=!1,a.classList.remove("btn-disabled","disabled"))})},Wn=()=>{const e=document.querySelector(".list-treeview");if(!e)return;let t=e.dataset.url;document.querySelectorAll(".table-nested > tbody > tr").forEach(function(a){let s=a.dataset.children;parseInt(s)>0&&(a.classList.add("tr-hover"),a.classList.add("cursor-pointer"),a.addEventListener("click",function(l){const u=l.target;l.target.type!=="checkbox"&&u.dataset.tree!=="escape"&&(window.location=t+"?parent_id="+a.dataset.id+"&m=table")}))})};It();Ht();He();Wn();window.onEvent(function(){Ht(),It()});let ae;const Gn=new IntersectionObserver(function(e){e.forEach(t=>{t.isIntersecting===!0&&Ie(t.target)})},{threshold:[0]}),Pt=()=>{document.querySelectorAll('table[data-render="datagrid2"]')?.forEach(t=>{Ie(t)})},Ie=e=>{Yn(e),e.dataset.initiated!=="1"&&(e.dataset.initiated="1",Jn(e),e.dataset.url&&Me(e,e))},Jn=e=>{e.querySelectorAll("thead a")?.forEach(t=>{t.dataset.loaded!=="1"&&(t.dataset.loaded="1",t.addEventListener("click",function(n){n.preventDefault(),Me(t,e)}))}),e.parentNode.querySelectorAll('nav[role="navigation"] a')?.forEach(t=>{t.dataset.loaded!=="1"&&(t.dataset.loaded="1",t.addEventListener("click",n=>{n.preventDefault(),Me(t,e)}))})},Zn=()=>{const e=document.querySelectorAll('[data-render="datagrid2-onload"]');e.length!==0&&e.forEach(t=>{Gn.observe(t)})},Me=(e,t)=>{t.querySelector("thead")?.classList.add("hidden"),t.querySelector("tbody")?.classList.add("hidden"),t.querySelector("tfoot")?.classList.remove("hidden");let n=e.getAttribute("href");e.dataset.url&&(n=e.dataset.url),t.parentNode&&axios.get(n).then(a=>{const s=t.parentNode;if(a.data.html&&(s.innerHTML=a.data.html),a.data.deletes){const u=document.querySelector("#datagrid-delete-forms");u&&(u.innerHTML=a.data.deletes)}a.data.url&&window.history.pushState({},"",a.data.url);const l=s.querySelector('[data-render="datagrid2"]');Ie(l),window.triggerEvent()}).catch(a=>{})},Yn=e=>{const t=e.parentNode;t.querySelectorAll(".datagrid-bulk")?.forEach(s=>{ea(e,s)}),t.querySelectorAll(".datagrid-submit")?.forEach(s=>{Xn(e,s)}),document.querySelector("#datagrid-action-confirm")?.addEventListener("click",function(){window.closeDialog("datagrid-bulk-delete"),ae.submit()})},Xn=(e,t)=>{t.parentNode.classList.contains("hidden")||t.dataset.loaded!=="1"&&(t.dataset.loaded="1",console.log("register bulk submit",t,t.parentNode),t.addEventListener("click",function(n){n.preventDefault(),ae=t.closest("form");const a=ae.querySelector('input[name="action"]');if(a.value=t.dataset.action,t.dataset.action==="delete")return window.openDialog("datagrid-bulk-delete"),!1;e.parentNode.querySelectorAll(".datagrid-bulk-actions .btn2")?.forEach(s=>s.classList.add("btn-disabled")),e.parentNode.querySelector(".datagrid-bulk-actions .btn2").classList.add("loading"),ae.submit()}))},ea=(e,t)=>{t.parentNode.classList.contains("hidden")||t.dataset.loaded!=="1"&&(t.dataset.loaded="1",t.addEventListener("click",function(n){n.preventDefault(),ae=e.closest("form"),axios.post(ae.getAttribute("action")+"?action=edit",{model:ta(e)}).then(a=>{const s=document.getElementById("primary-dialog");s.innerHTML=a.data,window.openDialog("primary-dialog"),window.triggerEvent()})}))},ta=e=>{let t=[];return e.querySelectorAll("input[name='model[]']")?.forEach(a=>{a.checked&&t.push(a.value)}),t};Zn();Pt();window.onEvent(function(){Pt()});const Rt=()=>{document.querySelectorAll('[data-animate="collapse"]').forEach(s=>{s.addEventListener("click",aa)}),document.querySelectorAll('[data-animate="reveal"]').forEach(s=>{s.addEventListener("change",sa)}),document.querySelectorAll("[data-pulse]").forEach(s=>{s.addEventListener("click",na)}),document.querySelectorAll("select.permission-control").forEach(s=>{Bt(s),s.addEventListener("change",oa)})},na=e=>{e.preventDefault();let t=document.querySelector(e.currentTarget.dataset.pulse),n=e.currentTarget.dataset.content;window.showTooltip(t,{content:n,theme:"kanka",placement:e.currentTarget.dataset.placement??"bottom",allowHTML:!0,arrow:!0,interactive:!0,trigger:"manual"})};function aa(e){e.target.type!=="checkbox"&&e.target.closest("a")===null&&e.preventDefault();let t=this.dataset.target;t||(t=this.hash),document.querySelectorAll(t).forEach(a=>{a.classList.toggle("hidden")}),this.classList.toggle("animate-collapsed")}function sa(e){let t=document.querySelector(this.dataset.target);this.value?t.classList.remove("hidden"):t.classList.add("hidden")}function oa(e){Bt(this)}function Bt(e){e.classList.remove("text-red-500","text-green-500"),e.value==="deny"?e.classList.add("text-red-500"):e.value==="allow"&&e.classList.add("text-green-500")}window.onEvent(function(){Rt()});Rt();const ia=()=>{const e=document.getElementById("bookmark-selector");if(!e)return!1;e.addEventListener("change",function(t){t.preventDefault();const n=e.options[e.selectedIndex];document.querySelectorAll(".bookmark-subform").forEach(l=>{l.classList.add("opacity-0","invisible","h-0")});let s=document.querySelector(n.dataset.target);s&&s.classList.remove("opacity-0","invisible","h-0")})};ia();const ra=()=>{let e=document.getElementById("webhook-selector");if(!e)return!1;e.addEventListener("change",function(t){t.preventDefault();let n=this.options[this.selectedIndex];document.querySelector(".webhook-subform").classList.add("hidden"),document.querySelector(n.dataset.target)?.classList.remove("hidden")})};ra();window.onEvent(function(){Nt()});const Nt=()=>{document.querySelectorAll(".form-members").forEach(t=>{if(t.dataset.loaded===1)return;t.dataset.loaded=1;let n=t.dataset.allowClear;$(t).select2({tags:!0,allowClear:n||!0,minimumInputLength:2,placeholder:t.dataset.placeholder,ajax:{quietMillis:500,delay:500,url:t.dataset.url,dataType:"json",data:function(a){return{q:a.term?.trim()}},processResults:function(a){return{results:a}},cache:!0},createTag:function(){},escapeMarkup:function(a){return a},templateSelection:function(a){return a.text?`<span>${a.text}</span>`:a.text}})})};Nt();const la=()=>{if(!document.getElementById("campaign-modules"))return;document.querySelectorAll('input[name="enabled"]').forEach(function(n){ca(n)})},ca=e=>{e.addEventListener("change",function(t){t.preventDefault(),e.closest(".toggle").classList.add("hidden!"),e.closest(".box-module").querySelector(".action-loading").classList.remove("hidden"),axios.post(e.dataset.url).then(n=>{e.closest(".toggle").classList.remove("hidden!"),e.closest(".box-module").querySelector(".action-loading").classList.add("hidden"),n.data.success&&(n.data.status?e.closest(".box-module").classList.add("module-enabled"):e.closest(".box-module").classList.remove("module-enabled"),window.showToast(n.data.toast))})})},ua=()=>{document.querySelectorAll(".public-permission").forEach(t=>{t.addEventListener("click",da)})},da=e=>{e.preventDefault();let t=e.currentTarget;t.querySelector(".module-icon").classList.add("hidden"),t.querySelector(".loading-animation").classList.remove("hidden"),axios.post(t.dataset.url).then(n=>{t.querySelector(".module-icon").classList.remove("hidden"),t.querySelector(".loading-animation").classList.add("hidden"),n.data.success&&(n.data.status?t.classList.add("enabled"):t.classList.remove("enabled"),window.showToast(n.data.toast))})},ma=()=>{document.querySelectorAll(".codemirror").forEach(function(t){CodeMirror.fromTextArea(document.getElementById(t.id),{extraKeys:{"Ctrl-Space":"autocomplete"},lineNumbers:!0,lineWrapping:!0,theme:"dracula"})})},fa=()=>{let e=[].slice.call(document.querySelectorAll(".nested-sortable"));for(let t=0;t<e.length;t++)new pt(e[t],{group:"nested",handle:".dnd-handle",animation:150,fallbackOnBody:!0,swapThreshold:.65,onMove:function(n,a){let s=n.dragged,u=n.related.parentNode.closest(".fixed-position")!=null;return!(s.classList.contains("fixed-position")&&u)}})},ha=()=>{const e=document.querySelector("form#campaign-style");e&&e.addEventListener("submit",function(t){let n=document.querySelector(e.dataset.error);return document.querySelector('textarea[name="content"]').value.length<e.dataset.maxContent?(n.classList.add("hidden"),!0):(n.classList.remove("hidden"),t.preventDefault(),!1)})},va=()=>{const e=document.querySelector('input[name="vanity"]');e&&e.addEventListener("focusout",function(t){let n=this.value,a=document.getElementById("vanity-error"),s=document.getElementById("vanity-success"),l=document.getElementById("vanity-loading");if(a.innerHTML="",a.classList.add("hidden"),s.classList.add("hidden"),!n)return;s.classList.remove("hidden");let u={};u.vanity=n,axios.post(this.dataset.url,u).then(c=>{e.value=c.data.vanity,s.querySelector("code").innerHTML=c.data.vanity,a.classList.add("hidden"),l.classList.add("hidden"),s.classList.remove("hidden")}).catch(c=>{let f="";c.response.data.errors.vanity.forEach(m=>f+=m+" "),a.innerHTML=f,a.classList.remove("hidden"),s.classList.add("hidden"),l.classList.add("hidden")})})},pa=()=>{document.querySelectorAll(".permission-toggle").forEach(t=>{t.addEventListener("click",function(n){n.preventDefault();let a=this.dataset.action,s=document.querySelectorAll('input[data-action="'+a+'"]'),l=this.dataset.checked!=="1";this.dataset.checked=l?1:0,s.forEach(u=>{l?u.checked=!0:u.checked=!1})})})};la();ma();fa();ua();ha();va();pa();const Ft=()=>{document.querySelectorAll("[data-clipboard]").forEach(t=>{t.addEventListener("click",ga,!1)})};function ga(e){e.preventDefault(),ya(this.dataset.clipboard,this);let t=this.dataset.toast;return t&&window.showToast(t),!1}async function ya(e,t){if(navigator.clipboard&&window.isSecureContext)await navigator.clipboard.writeText(e);else{const n=document.createElement("textarea");n.value=e,n.style.position="absolute",n.style.left="-999999px",t.append(n),n.select();try{document.execCommand("copy")}catch(a){console.error(a)}finally{n.remove()}}}Ft();window.onEvent(function(){Ft()});const Qt=()=>{document.querySelectorAll('.toast-container [data-toggle="dismiss"]').forEach(t=>{t.dataset.init!=="1"&&(t.dataset.init="1",t.addEventListener("click",function(n){n.preventDefault();let a=t.closest(".toast-message");a.classList.remove("opacity-100"),a.classList.add("opacity-0"),setTimeout(function(){a.remove()},150)}))})};window.showToast=function(e,t){t=t||"bg-success text-success-content",t==="error"&&(t="bg-error text-error-content");const n=document.createElement("div");n.classList.add("opacity-100","duration-150","transition-opacity","rounded"),t&&t.split(" ").forEach(s=>{n.classList.add(s)}),n.innerHTML='<div class="toast-message p-2 flex gap-2 items-center"><span class="grow"> '+e+'</span><span class="flex-none"><i class="fa-regular fa-circle-xmark cursor-pointer " data-toggle="dismiss"></i></span></div>',document.querySelector(".toast-container").appendChild(n),setTimeout(function(){n.classList.remove("opacity-100"),n.classList.add("opacity-0"),setTimeout(function(){n.remove()},150)},3e3),Qt()};Qt();const ba=()=>{document.querySelectorAll(".banner-notification-dismiss").forEach(e=>{e.addEventListener("click",xa,!1)}),document.querySelectorAll('[data-dismiss="tutorial"]').forEach(e=>{e.addEventListener("click",wa,!1)})};function xa(e){e.preventDefault();let t=this.dataset.dismiss;axios.post(this.dataset.url).then(()=>{if(!t)return;let n=document.querySelector(t);n&&n.classList.add("hidden")})}function wa(e){e.preventDefault();let t=this.dataset.target,n=e.currentTarget;n.classList.add("loading"),n.disabled=!0,n.querySelector("i")?.remove(),axios.post(this.dataset.url).then(()=>{if(!t)return;let a=document.querySelector(t);a&&a.classList.add("hidden")})}ba();let Ot;const ka=()=>{const e=document.getElementById("element-era-id");e&&(Ot=e.value,e.addEventListener("change",function(){La(e.value)}))},La=e=>{e=parseInt(e);let t=document.querySelector('input[name="era-data-url"]').dataset.url.replace("/0/","/"+e+"/"),n=document.querySelector('input[name="oldPosition"]').dataset.url;axios.get(t).then(a=>{let s=document.querySelector('select[name="position"]');s.innerHTML="";let l=1;Object.entries(a.data.positions).forEach(function(c,f){const m=document.createElement("option");m.text=c[1],n&&!f&&Ot==e&&(m.value=1,s.appendChild(m)),f&&(m.value=l,s.appendChild(m)),l++})})};ka();window.initSortable=function(){let e=document.querySelectorAll(".sortable-elements");e.length!==0&&e.forEach(t=>{let n={},a=t.dataset.handle;a&&(n.handle=a),pt.create(t,n)})};window.initSortable();window.formErrorHandler=function(e,t){document.querySelectorAll(".input-error").forEach(d=>{d.classList.remove("input-error")});const a=document.querySelector(".text-error");a&&a.remove();const s=t.querySelector(".btn-primary");if(s&&(s.disabled=!1,s.classList.remove("loading")),e.status===503){window.showToast(e.data.message,"error");return}if(e.status===403){document.querySelector("#entity-form-403-error").classList.remove("hidden");return}if(!e.data.errors){window.showToast("Backend error","error");return}const l=e.data.errors;let u=[];const c=Object.keys(l);let f=!0;c.forEach(function(d){let p=document.querySelector('[name="'+d+'"]');if(p){p.classList.add("input-error");const v=document.createElement("div");v.classList.add("text-error"),v.innerHTML=l[d][0],p.parentNode.append(v)}else f=!1,u.push(l[d][0]);window.showToast(l[d][0],"error")});const m=document.querySelector("#entity-form-generic-error .error-logs");!f&&m&&(m.innerHTML="",u.forEach(function(d){m.append(d)}),document.querySelector("#entity-form-generic-error").classList.remove("hidden")),_a(t,l)};const _a=(e,t)=>{const n=Object.keys(t)[0],a=e.querySelector('[name="'+n+'"]');if(!a)return;if(!e.querySelector(".tab-content")){mt(a);return}document.querySelector(".tab-content .active").classList.remove("active"),document.querySelector(".nav-tabs li.active").classList.remove("active");const s=document.querySelector('[name="'+n+'"').closest(".tab-pane");s&&(s.classList.add("active"),document.querySelector('a[href="#'+s.id+'"]').closest("li").classList.add("active")),mt(a)},mt=e=>{e.focus(),e.scrollIntoView({behavior:"smooth"})},ke="recent_colors",ft=10;function Sa(){return document.cookie.split(";").reduce((e,t)=>{const[n,a]=t.split("=").map(s=>s.trim());return n&&a&&(e[n]=decodeURIComponent(a)),e},{})}function qa(e,t,n=30){const a=new Date;a.setTime(a.getTime()+n*24*60*60*1e3),document.cookie=`${e}=${encodeURIComponent(t)}; expires=${a.toUTCString()}; path=/`}function Ea(e){fe({swatches:e})}function Ut(){const e=Sa();let t=e[ke]?JSON.parse(e[ke]):[];fe.init(),fe({el:".spectrum",format:"hex",alpha:!1,theme:"pill",clearButton:!0,closeButton:!0,swatches:t}),document.querySelectorAll(".spectrum").forEach(n=>{n.dataset.init!=="1"&&(n.dataset.init=1,n.addEventListener("click",function(a){fe({parent:n.dataset.appendTo??".container"})}),n.addEventListener("change",function(a){const s=event.target.value;t=[s,...t.filter(l=>l!==s)],t.length>ft&&(t=t.slice(0,ft)),qa(ke,JSON.stringify(t)),Ea(t)}),n.addEventListener("close",a=>{a.stopPropagation()}))})}window.onEvent(function(){Ut()});Ut();const Ta={class:""},Ca=["data-title"],Ma={class:"sr-only"},Aa=B({__name:"NavToggler",props:{text:{},title:{}},setup(e){const t=e,n=()=>{const u=document.querySelector("body");u.classList.contains("sidebar-collapse")?(u.classList.remove("sidebar-collapse"),a(!1)):(u.classList.add("sidebar-collapse"),a(!0))},a=u=>{let c=new Date;c.setTime(c.getTime()+90*24*60*60*1e3);let m=" expires="+c.toGMTString(),d=location.protocol==="https:"?"secure; ":"";document.cookie="toggleState="+(u?"collapsed":"open")+"; path=/; "+d+"samesite=lax; "+m},s=()=>window.innerWidth<768,l=()=>{if(s()){document.body.classList.remove("sidebar-collapse");return}let c=new RegExp("toggleState=([^;]+)").exec(document.cookie);(c!=null?decodeURI(c[1]):null)==="collapsed"&&document.querySelector("body").classList.add("sidebar-collapse")};return pe(()=>{l()}),(u,c)=>(i(),r("div",Ta,[o("span",{role:"button",class:"sidebar-toggle text-center cursor-pointer fill-current hover:text-primary-focus","data-toggle":"tooltip","data-title":t.title,"data-placement":"right","data-html":"true",tabindex:"",onClick:c[0]||(c[0]=f=>n())},[c[1]||(c[1]=o("svg",{class:"h-6 w-6 transition-all duration-150 hover:rotate-45","data-sidebar":"collapse",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 50 50"},[o("path",{d:"M 7.71875 6.28125 L 6.28125 7.71875 L 23.5625 25 L 6.28125 42.28125 L 7.71875 43.71875 L 25 26.4375 L 42.28125 43.71875 L 43.71875 42.28125 L 26.4375 25 L 43.71875 7.71875 L 42.28125 6.28125 L 25 23.5625 Z"})],-1)),c[2]||(c[2]=o("svg",{class:"h-6 w-6 transition-all duration-150 hover:rotate-90","data-sidebar":"expand",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 50 50"},[o("path",{d:"M 0 9 L 0 11 L 50 11 L 50 9 Z M 0 24 L 0 26 L 50 26 L 50 24 Z M 0 39 L 0 41 L 50 41 L 50 39 Z"})],-1)),o("span",Ma,h(t.text),1)],8,Ca)]))}}),$a=["data-id","href"],ja={class:"flex-none"},Da=["title"],Ha=["title","innerHTML"],Ia=["innerHTML"],zt=B({__name:"LookupEntity",props:{entity:{}},emits:["preview"],setup(e,{emit:t}){const n=t,a=e,s=c=>"url('"+c.image+"')",l=c=>{c.stopPropagation(),c.preventDefault(),n("preview",a.entity)},u=()=>"flex justify-center gap-1 cursor-pointer hover:bg-base-200 rounded w-full focus:bg-base-200";return(c,f)=>(i(),r("a",{class:S(u()),"data-id":e.entity.id,href:e.entity.link},[o("div",ja,[o("div",{style:W({backgroundImage:s(e.entity)}),title:e.entity.name,class:"rounded cover-background block h-16 w-16"},null,12,Da)]),o("div",{class:"grow truncate pl-1 text-base-content",onClick:l},[o("div",{class:"font-extrabold entity-name truncate",title:e.entity.name,innerHTML:e.entity.name},null,8,Ha),o("div",{class:"entity-type text-xs",innerHTML:e.entity.type},null,8,Ia)])],10,$a))}}),Pa=["href"],Ra={class:"grow truncate"},Ba=["title","innerHTML"],Na=B({__name:"LookupPage",props:{page:{}},setup(e){const t=()=>"flex justify-center gap-2 cursor-pointer w-full text-link";return(n,a)=>(i(),r("a",{class:S(t()),href:e.page.url,tabindex:"0"},[a[0]||(a[0]=o("div",{class:"flex-none h-4 w-4"},[o("i",{class:"fa-solid fa-angles-right","aria-hidden":"true"})],-1)),o("div",Ra,[o("div",{class:"entity-name truncate",title:e.page.name,innerHTML:e.page.name},null,8,Ba)])],10,Pa))}}),Fa={class:"entity-header p-3 bg-entity-focus"},Qa={class:"w-full flex items-center"},Oa=["href","title","innerHTML"],Ua={key:0,class:"fa-regular fa-skull mx-2","aria-hidden":"true"},za=["href"],Ka=["innerHTML"],Va={key:1,class:"my-1 w-full flex flex-wrap gap-1"},Wa=["href","data-tag-id","data-tag-slug","innerHTML"],Ga=["href","data-tag"],Ja={key:3,class:"flex gap-1 items-center my-2"},Za=["href","data-tag"],Ya=["href","title"],Xa={class:"entity-sections"},es={class:"tabs flex my-2 justify-center items-center border-solid border-slate-600 border-b-2 border-r-0 border-t-0 border-l-0"},ts={key:0,class:"tab-profile p-5 flex flex-col gap-5"},ns={key:0,class:"entity-pinned-attributes flex flex-col gap-3"},as=["data-attribute","data-target"],ss=["innerHTML"],os=["innerHTML"],is={key:1},rs={class:"flex flex-col gap-3"},ls=["innerHTML"],cs=["innerHTML"],us={key:1,class:"tab-links p-3"},ds={key:0,class:"text-center italic"},ms=B({__name:"EntityPreview",props:{entity:{}},setup(e){const t=e,n=y(!0),a=y(!1),s=y(!1),l=()=>t.entity.title,u=p=>{let v="inline-block rounded-xl px-3 py-1 bg-base-100 text-base-content text-xs";return p.colour&&(v+=" bg-"+p.colour,p.colour==="black"&&(v+=" text-white")),v},c=()=>"url('"+t.entity.image+"')",f=p=>{let v="p-1 px-1 mx-1 pt-2 select-none text-center truncate border-b-2 border-solid border-r-0 border-t-0 border-l-0";return p==="profile"&&n.value||p==="links"&&a.value||p==="access"&&s.value?v+=" font-black border-slate-600":v+=" cursor-pointer border-base-100",v},m=p=>{n.value=!1,a.value=!1,s.value=!1,p==="profile"?n.value=!0:p==="links"?a.value=!0:p==="access"&&(s.value=!0)},d=p=>"entity-profile-"+p.slug;return(p,v)=>(i(),r(q,null,[o("div",Fa,[o("div",Qa,[o("a",{class:"text-2xl font-extrabold entity-name",href:e.entity.link,title:e.entity.name,innerHTML:e.entity.name},null,8,Oa),e.entity.is_dead?(i(),r("i",Ua)):g("",!0),o("a",{class:"ml-2 text-xs",target:"_blank",href:e.entity.link},[...v[3]||(v[3]=[o("i",{class:"fa-regular fa-external-link","aria-hidden":"true","aria-label":"Open in a new window"},null,-1)])],8,za)]),l()?(i(),r("div",{key:0,class:"block w-full",innerHTML:e.entity.title},null,8,Ka)):g("",!0),e.entity.tags.length>0?(i(),r("div",Va,[(i(!0),r(q,null,C(e.entity.tags,w=>(i(),r("a",{class:S(u(w)),href:w.link,"data-tag-id":w.id,"data-tag-slug":w.slug,innerHTML:w.name},null,10,Wa))),256))])):g("",!0),e.entity.location?(i(),r("a",{key:2,class:"block w-full cursor-pointer my-2",href:e.entity.location.link,"data-tag":e.entity.id},[v[4]||(v[4]=o("i",{class:"fa-duotone circle-location-arrow","aria-hidden":"true","aria-label":"Location"},null,-1)),R(" "+h(e.entity.location.name),1)],8,Ga)):e.entity.locations?(i(),r("div",Ja,[(i(!0),r(q,null,C(e.entity.locations,w=>(i(),r("a",{class:"cursor-pointer",href:w.link,"data-tag":w.id},[v[5]||(v[5]=o("i",{class:"fa-duotone circle-location-arrow","aria-hidden":"true","aria-label":"Location"},null,-1)),R(" "+h(w.name),1)],8,Za))),256))])):g("",!0),e.entity.image?(i(),r("a",{key:4,href:e.entity.link,style:W({backgroundImage:c()}),title:e.entity.name,class:"rounded cover-background block w-full aspect-square"},null,12,Ya)):g("",!0)]),o("div",Xa,[o("div",es,[o("div",{class:S(f("profile")),onClick:v[0]||(v[0]=w=>m("profile"))},h(e.entity.texts.profile),3),o("div",{class:S(f("links")),onClick:v[1]||(v[1]=w=>m("links"))},h(e.entity.texts.connections),3),o("div",{class:S(f("access")),onClick:v[2]||(v[2]=w=>m("access"))},null,2)]),n.value?(i(),r("div",ts,[e.entity.attributes.length>0?(i(),r("div",ns,[(i(!0),r(q,null,C(e.entity.attributes,w=>(i(),r("div",{class:"","data-attribute":w.name,"data-target":w.id},[o("span",{class:"inline-block uppercase font-extrabold mr-1",innerHTML:w.name},null,8,ss),o("span",{innerHTML:w.value},null,8,os)],8,as))),256))])):g("",!0),e.entity.attributes.length>0?(i(),r("hr",is)):g("",!0),o("div",rs,[(i(!0),r(q,null,C(e.entity.profile,w=>(i(),r("div",{class:S(["",d(w)])},[o("div",{class:"uppercase font-extrabold truncate",innerHTML:w.field},null,8,ls),o("div",{innerHTML:w.value},null,8,cs)],2))),256))])])):g("",!0),a.value?(i(),r("div",us,[(i(!0),r(q,null,C(e.entity.connections,w=>(i(),Q(zt,{entity:w},null,8,["entity"]))),256)),e.entity.connections.length===0?(i(),r("p",ds,h(e.entity.texts["no-connections"]),1)):g("",!0)])):g("",!0)])],64))}}),fs={directives:{clickOutside:xt.directive},props:{api_lookup:String,api_recent:String,placeholder:String,keyboard_tooltip:String},components:{LookupEntity:zt,EntityPreview:ms,LookupPage:Na},data(){return{has_drawer:!1,term:null,show_loading:!1,show_recent:!1,show_preview:!1,show_results:!1,show_bookmarks:!1,recent:[],bookmarks:[],indexes:[],results:[],pages:[],cached:{},cachedPages:{},has_recent:!1,texts:{},timeout_id:null,preview_entity:null}},watch:{term(e,t){this.termChanged()}},methods:{termChanged(){this.term.trim().length<3||(this.timeout_id!==void 0&&clearTimeout(this.timeout_id),this.show_loading=!0,this.timeout_id=setTimeout(()=>this.lookup(),500))},lookup(){let e=this.term.trim(),t=e.toLowerCase().replace(/ /g,"-").replace(/ [^\w-]+/g,"");if(this.cached[t])return this.displayCached(t);fetch(this.api_lookup+"?"+new URLSearchParams({q:e,v2:!0})).then(n=>n.json()).then(n=>this.parseLookupResponse(n,t))},focus(){this.api_recent&&(this.show_preview=!1,this.has_drawer=!0,this.fetch())},escape(){this.timeout_id!==void 0&&clearTimeout(this.timeout_id),this.close()},fetch(){if(this.has_recent){this.show_recent=!0;return}this.show_loading=!0,fetch(this.api_recent).then(e=>e.json()).then(e=>{this.recent=e.recent,this.bookmarks=e.bookmarks,this.indexes=e.indexes,this.texts.recents=e.texts.recents,this.texts.results=e.texts.results,this.texts.hint=e.texts.hint,this.texts.bookmarks=e.texts.bookmarks,this.texts.index=e.texts.index,this.texts.keyboard=e.texts.keyboard,this.texts.empty_results=e.texts.empty_results,this.texts.fulltext=e.texts.fulltext,this.texts.fulltext_route=e.fulltext_route,this.show_loading=!1,this.show_recent=!0,this.has_recent=!0,this.show_bookmarks=this.bookmarks.length>0}).catch(e=>{this.show_loading=!1,this.show_recent=!0,this.has_recent=!1})},parseLookupResponse(e,t){this.results=e.entities,this.pages=e.pages,this.cached[t]=e.entities,this.cachedPages[t]=e.pages,this.showResults()},displayCached(e){this.results=this.cached[e],this.pages=this.cachedPages[e],this.showResults()},showResults(){this.timeout_id=null,this.show_preview=!1,this.show_loading=!1,this.show_results=!0},loadPreview(e){this.show_loading=!0,fetch(e.preview).then(t=>t.json()).then(t=>this.parsePreviewResponse(t))},parsePreviewResponse(e){this.preview_entity=e,this.show_loading=!1,this.show_preview=!0,this.show_recent=!1},onClickOutside(e){this.close()},close(){this.show_recent=!1,this.show_loading=!1,this.show_preview=!1,this.$refs.searchField.blur()},showBookmarks(){this.show_bookmarks=!0},searchFullTextUrl(){return`${this.texts.fulltext_route}?term=${this.term}`},showIndexes(){this.show_bookmarks=!1},modeClass(e){return e&&this.show_bookmarks||!e&&!this.show_bookmarks?" underline":""}}},hs={class:"flex grow mr-2"},vs={class:"relative grow field flex items-center"},ps=["placeholder"],gs={class:"absolute right-1 hidden md:inline"},ys=["data-title"],bs={key:0,class:"search-drawer absolute top-0 left-0 mt-12 h-sidebar w-sidebar bg-navbar bg-base-100 shadow-r overflow-y-auto",tabindex:"-1"},xs={key:0,class:"text-center"},ws={key:1,class:"search-recent bg-lookup p-2 min-h-full shadow-r flex flex-col items-stretch"},ks={key:0,class:"flex-none"},Ls={class:"italic text-xs text-center"},_s={class:"grow flex flex-col gap-5 p-2"},Ss={key:0,class:"search-results flex flex-col gap-2"},qs={class:"text-sm uppercase"},Es={key:0,class:"text-neutral-content text-sm"},Ts={key:1,class:"flex flex-col gap-2"},Cs=["href"],Ms={key:1,class:"recent-searches flex flex-col gap-2"},As={class:"text-sm uppercase"},$s={key:2,class:"flex gap-5 justify-center"},js={key:3,class:"flex flex-col gap-4"},Ds=["href","title"],Hs=["innerHTML"],Is={key:4,class:"flex flex-col gap-4"},Ps=["href","title"],Rs=["innerHTML"],Bs={key:1,class:"flex-none text-xs text-center"},Ns=["innerHTML"],Fs={key:2,class:"search-preview bg-lookup min-h-full shadow-r"};function Qs(e,t,n,a,s,l){const u=be("LookupEntity"),c=be("LookupPage"),f=be("EntityPreview"),m=gt("click-outside");return K((i(),r("div",hs,[o("div",vs,[K(o("input",{type:"text",class:"leading-4 w-20 md:w-full",maxlength:"25",ref:"searchField",id:"entity-lookup","onUpdate:modelValue":t[0]||(t[0]=d=>s.term=d),onClick:t[1]||(t[1]=d=>l.focus()),onFocus:t[2]||(t[2]=d=>l.focus()),onKeydown:t[3]||(t[3]=X(d=>l.escape(),["esc"])),placeholder:n.placeholder},null,40,ps),[[ce,s.term]]),o("span",gs,[o("span",{class:"flex-none keyboard-shortcut py-1",id:"lookup-kb-shortcut","data-toggle":"tooltip","data-title":n.keyboard_tooltip,"data-html":"true","data-placement":"bottom"}," K ",8,ys)])]),s.show_recent||s.show_loading||s.show_preview?(i(),r("aside",bs,[s.show_loading?(i(),r("div",xs,[...t[10]||(t[10]=[o("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true","aria-label":"Loading"},null,-1)])])):g("",!0),s.show_recent?(i(),r("div",ws,[s.show_results?g("",!0):(i(),r("div",ks,[o("p",Ls,h(s.texts.hint),1)])),o("div",_s,[s.show_results?(i(),r("div",Ss,[o("div",qs,h(s.texts.results),1),s.results.length===0&&s.pages.length===0?(i(),r("div",Es,h(s.texts.empty_results),1)):(i(),r("div",Ts,[(i(!0),r(q,null,C(s.results,d=>(i(),Q(u,{entity:d,onKeydown:t[4]||(t[4]=X(p=>l.escape(),["esc"])),onPreview:l.loadPreview},null,8,["entity","onPreview"]))),256)),(i(!0),r(q,null,C(s.pages,d=>(i(),Q(c,{page:d},null,8,["page"]))),256))])),o("a",{class:"grow text-sm uppercase hover:underline text-link",href:l.searchFullTextUrl()},h(s.texts.fulltext),9,Cs)])):g("",!0),s.recent.length>0?(i(),r("div",Ms,[o("div",As,h(s.texts.recents),1),(i(!0),r(q,null,C(s.recent,d=>(i(),Q(u,{entity:d,onPreview:l.loadPreview,onKeydown:t[5]||(t[5]=X(p=>l.escape(),["esc"]))},null,8,["entity","onPreview"]))),256))])):g("",!0),s.bookmarks.length>0?(i(),r("div",$s,[s.bookmarks.length>0?(i(),r("button",{key:0,class:S(["grow text-sm uppercase hover:underline",this.modeClass(!0)]),onClick:t[6]||(t[6]=d=>l.showBookmarks())},h(s.texts.bookmarks),3)):g("",!0),o("button",{class:S(["grow text-sm uppercase hover:underline",this.modeClass(!1)]),onClick:t[7]||(t[7]=d=>l.showIndexes())},h(s.texts.index),3)])):g("",!0),s.show_bookmarks?(i(),r("div",js,[(i(!0),r(q,null,C(s.bookmarks,d=>(i(),r("a",{href:d.url,onClick:t[8]||(t[8]=ue(()=>{},["stop"])),title:d.text,class:"flex gap-2 items-center text-link"},[o("i",{class:S(["w-4",d.icon]),"aria-hidden":"true"},null,2),o("span",{innerHTML:d.text},null,8,Hs)],8,Ds))),256))])):(i(),r("div",Is,[(i(!0),r(q,null,C(s.indexes,d=>(i(),r("a",{href:d.url,onClick:t[9]||(t[9]=ue(()=>{},["stop"])),title:d.name,class:"flex gap-2 items-center text-link"},[o("i",{class:S(["w-4 text-center",d.icon]),"aria-hidden":"true"},null,2),o("span",{innerHTML:d.name},null,8,Rs)],8,Ps))),256))]))]),s.show_loading?g("",!0):(i(),r("div",Bs,[t[11]||(t[11]=o("hr",null,null,-1)),o("p",{class:"italic text-xs text-center",innerHTML:s.texts.keyboard},null,8,Ns)]))])):g("",!0),s.show_preview?(i(),r("div",Fs,[ne(f,{entity:s.preview_entity},null,8,["entity"])])):g("",!0)])):g("",!0)])),[[m,l.onClickOutside]])}const Os=on(fs,[["render",Qs]]),Us=["href","title"],zs={key:0,class:"absolute top-2 right-2 text-sm text-boost"},Ks=["innerHTML"],ht=B({__name:"Campaign",props:{campaign:{}},setup(e){const t=e,n=()=>t.campaign.image?"url("+t.campaign.image+")":"",a=()=>"campaign flex items-end border border-solid rounded-lg cover-background relative h-24 overflow-hidden text-break shadow-xs hover:shadow-md border-0";return(s,l)=>(i(),r("a",{class:S(a()),href:e.campaign.url,style:W({backgroundImage:n()}),title:e.campaign.name},[e.campaign.is_boosted?(i(),r("div",zs,[...l[0]||(l[0]=[o("i",{class:"fa-regular fa-gem","aria-label":"Premium campaign"},null,-1)])])):g("",!0),o("div",{class:"flex items-end justify-center name w-full text-xs p-2 pt-6 text-center",innerHTML:e.campaign.name},null,8,Ks)],14,Us))}}),Vs=["data-id"],Ws={class:"flex-none p-2"},Gs=["innerHTML","href"],Js=["title"],Zs={key:1,class:"flex-none p-2"},Ys=["data-id"],Xs={class:"flex-none p-2"},eo=["innerHTML"],to=["title"],no={key:1,class:"flex-none p-2"},ao=B({__name:"Notification",props:{notification:{}},emits:["read"],setup(e,{emit:t}){const n=t,a=y(!1),s=y(!1),l=f=>{let m="notification bg-base-200 flex justify-center items-center p-2 rounded-md";return f.is_read?m:m+" unread"},u=f=>{let m="fa-regular fa-"+f.icon;return f.colour==="red"&&(m+=" text-red"),m},c=f=>{s.value=!0,axios.post(f.dismiss).then(()=>{a.value=!0,n("read",f)})};return(f,m)=>e.notification.url&&!a.value?(i(),r("div",{key:0,class:S(l(e.notification)),"data-id":e.notification.id},[o("div",Ws,[o("i",{class:S(u(e.notification)),"aria-hidden":"true"},null,2)]),o("a",{class:"grow p-2 break-all text-link",innerHTML:e.notification.text,href:e.notification.url},null,8,Gs),s.value?(i(),r("div",Zs,[...m[3]||(m[3]=[o("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true"},null,-1)])])):(i(),r("div",{key:0,class:"flex-none p-2 cursor-pointer dismissable",onClick:m[0]||(m[0]=d=>c(e.notification)),title:e.notification.dismiss_text},[...m[2]||(m[2]=[o("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1)])],8,Js))],10,Vs)):a.value?g("",!0):(i(),r("div",{key:1,class:S(l(e.notification)),"data-id":e.notification.id},[o("div",Xs,[o("i",{class:S(u(e.notification)),"aria-hidden":"true"},null,2)]),o("div",{class:"grow p-2",innerHTML:e.notification.text},null,8,eo),s.value?(i(),r("div",no,[...m[5]||(m[5]=[o("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true"},null,-1)])])):(i(),r("div",{key:0,class:"flex-none p-2 cursor-pointer dismissable",onClick:m[1]||(m[1]=d=>c(e.notification)),title:e.notification.dismiss_text},[...m[4]||(m[4]=[o("i",{class:"fa-regular fa-times","aria-hidden":"true"},null,-1)])],8,to))],10,Ys))}}),so=["data-id"],oo={class:"grow p-2"},io=["innerHTML","href"],ro=["innerHTML"],lo=["title"],co={key:1,class:"flex-none p-2"},uo=B({__name:"Release",props:{release:{}},emits:["read"],setup(e,{emit:t}){const n=t,a=y(!1),s=y(!1),l=c=>"release bg-base-200 flex justify-center items-center p-2  rounded-md",u=c=>{s.value=!0,axios.post(c.dismiss).then(()=>{a.value=!0,n("read",c)})};return(c,f)=>a.value?g("",!0):(i(),r("div",{key:0,class:S(l(e.release)),"data-id":e.release.id},[o("div",oo,[o("a",{innerHTML:e.release.title,class:"font-bold cursor-pointer block w-full text-link",href:e.release.url,target:"_blank"},null,8,io),o("p",{innerHTML:e.release.text},null,8,ro)]),s.value?(i(),r("div",co,[...f[2]||(f[2]=[o("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true"},null,-1)])])):(i(),r("div",{key:0,class:"flex-none p-2 cursor-pointer dismissable",onClick:f[0]||(f[0]=m=>u(e.release)),title:e.release.dismiss_text},[...f[1]||(f[1]=[o("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1)])],8,lo))],10,so))}}),Le={__name:"GridSvg",props:{size:Number},setup(e){const t=e;function n(){return"w-"+t.size+" h-"+t.size}return(a,s)=>(i(),r("svg",{class:S(n()),viewBox:"0 -0.5 21 21",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true"},[...s[0]||(s[0]=[o("g",{stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},[o("g",{transform:"translate(-219.000000, -200.000000)",fill:"currentcolor"},[o("g",{id:"icons",transform:"translate(56.000000, 160.000000)"},[o("path",{d:"M181.9,54 L179.8,54 C178.63975,54 177.7,54.895 177.7,56 L177.7,58 C177.7,59.105 178.63975,60 179.8,60 L181.9,60 C183.06025,60 184,59.105 184,58 L184,56 C184,54.895 183.06025,54 181.9,54 M174.55,54 L172.45,54 C171.28975,54 170.35,54.895 170.35,56 L170.35,58 C170.35,59.105 171.28975,60 172.45,60 L174.55,60 C175.71025,60 176.65,59.105 176.65,58 L176.65,56 C176.65,54.895 175.71025,54 174.55,54 M167.2,54 L165.1,54 C163.93975,54 163,54.895 163,56 L163,58 C163,59.105 163.93975,60 165.1,60 L167.2,60 C168.36025,60 169.3,59.105 169.3,58 L169.3,56 C169.3,54.895 168.36025,54 167.2,54 M181.9,47 L179.8,47 C178.63975,47 177.7,47.895 177.7,49 L177.7,51 C177.7,52.105 178.63975,53 179.8,53 L181.9,53 C183.06025,53 184,52.105 184,51 L184,49 C184,47.895 183.06025,47 181.9,47 M174.55,47 L172.45,47 C171.28975,47 170.35,47.895 170.35,49 L170.35,51 C170.35,52.105 171.28975,53 172.45,53 L174.55,53 C175.71025,53 176.65,52.105 176.65,51 L176.65,49 C176.65,47.895 175.71025,47 174.55,47 M167.2,47 L165.1,47 C163.93975,47 163,47.895 163,49 L163,51 C163,52.105 163.93975,53 165.1,53 L167.2,53 C168.36025,53 169.3,52.105 169.3,51 L169.3,49 C169.3,47.895 168.36025,47 167.2,47 M181.9,40 L179.8,40 C178.63975,40 177.7,40.895 177.7,42 L177.7,44 C177.7,45.105 178.63975,46 179.8,46 L181.9,46 C183.06025,46 184,45.105 184,44 L184,42 C184,40.895 183.06025,40 181.9,40 M174.55,40 L172.45,40 C171.28975,40 170.35,40.895 170.35,42 L170.35,44 C170.35,45.105 171.28975,46 172.45,46 L174.55,46 C175.71025,46 176.65,45.105 176.65,44 L176.65,42 C176.65,40.895 175.71025,40 174.55,40 M169.3,42 L169.3,44 C169.3,45.105 168.36025,46 167.2,46 L165.1,46 C163.93975,46 163,45.105 163,44 L163,42 C163,40.895 163.93975,40 165.1,40 L167.2,40 C168.36025,40 169.3,40.895 169.3,42"})])])],-1)])],2))}},mo={class:"nav-switcher flex items-center justify-center align-middle h-12 gap-2"},fo={class:"indicator relative inline-flex w-max"},ho={key:0,class:"notification-badge left-auto top-auto w-fit inline-flex absolute content-center items-center z-10"},vo={key:1,class:"profile-box rounded-lg p-2 text-center font-bold"},po={key:0,class:"navigation-drawer bg-base-100 h-full overflow-y-auto fixed top-0 right-0 rounded-l-2xl shadow-lg"},go={key:0,class:"temporary p-8 text-center"},yo={key:1,class:""},bo={class:"header flex"},xo={key:0,class:"full flex items-center gap-4"},wo={class:"flex-none"},ko={class:"grow"},Lo={class:"font-bold"},_o=["title"],So={key:0,class:"full flex items-center gap-4"},qo={key:0,class:"flex-none profile-box rounded-lg p-2 text-center uppercase font-bold"},Eo={class:"grow"},To={class:"font-bold"},Co=["title"],Mo={key:0,class:"flex-none profile-box rounded-lg p-2 text-center uppercase font-bold"},Ao={key:0,class:"profile p-5 flex flex-col gap-5"},$o={key:0,class:"notifications"},jo={class:"flex w-full py-2"},Do={class:"grow uppercase font-bold"},Ho={class:"grow text-right"},Io=["href"],Po={class:"flex flex-col gap-2"},Ro={key:0,class:"no-notifications help-block text-neutral-content italic"},Bo={key:1,class:"releases"},No={class:"flex w-full py-2"},Fo={class:"grow uppercase font-bold"},Qo={class:"flex flex-col gap-2"},Oo={key:2,class:"marketplace"},Uo={class:"flex w-full py-2"},zo={class:"grow uppercase font-bold"},Ko={class:"grow text-right"},Vo=["href"],Wo={class:"grid grid-cols-3 gap-2"},Go=["href"],Jo={class:"text-muted text-xs"},Zo=["href"],Yo={class:"text-muted text-xs"},Xo=["href"],ei={class:"text-muted text-xs"},ti={key:3,class:"subscription"},ni={class:"uppercase font-bold py-2"},ai=["href"],si={class:"flex-none p-2"},oi=["src","alt"],ii={class:"grow p-2"},ri={class:"font-bold text-lg"},li={key:0,class:"more"},ci={key:1,class:"more"},ui={class:"link flex gap-1 items-center"},di={key:0,class:"fa-duotone fa-credit-card","aria-hidden":"true"},mi={key:1,class:"fa-regular fa-credit-card","aria-hidden":"true"},fi={key:4,class:"m-0 p-0 list-none flex flex-col gap-2"},hi=["href"],vi=["href"],pi=["href"],gi={key:5,class:"m-0 p-0 list-none flex flex-col gap-2"},yi=["href"],bi={key:1,class:"campaigns p-5"},xi={key:0,class:"campaigns flex flex-col gap-5"},wi={class:"flex flex-col gap-2"},ki={class:"flex w-full"},Li={class:"grow uppercase font-bold"},_i={key:0,class:"grow text-right"},Si=["href"],qi={class:"grid grid-cols-2 md:grid-cols-3 gap-5"},Ei=["href"],Ti={class:"text-xs text-break uppercase"},Ci={key:0},Mi={class:"flex flex-col gap-2"},Ai={key:0,class:"uppercase"},$i={key:1,class:"grid grid-cols-2 md:grid-cols-3 gap-5 following"},ji=["href"],Di={class:"text-xs uppercase text-break"},Hi=B({__name:"NavSwitcher",props:{user_id:{},api:{},fetch:{},initials:{},avatar:{},campaign_id:{},has_alerts:{}},setup(e){const t=e,n=y(!1),a=y(!1),s=y(!1),l=y(!1),u=y(!1),c=y({}),f=y({}),m=y({}),d=y({}),p=y({}),v=y(!1),w=y(!1),I=y(!1),T=()=>{l.value=!0,u.value=!1,j()},M=()=>{u.value=!0,l.value=!1,j()},j=()=>{a.value=!0,!s.value&&(n.value=!0,axios.get(t.api).then(k=>{c.value=k.data.profile,f.value=k.data.campaigns,m.value=k.data.notifications,d.value=k.data.marketplace,p.value=k.data.releases,v.value=k.data.has_unread,s.value=!0,n.value=!1,w.value=!0,I.value=k.data.fontawesome_pro}))},P=k=>k?"block p-4 grow items-center focus:box-shadow":"block p-4  items-center bg-base-200 cursor-pointer flex-none focus:box-shadow",J=()=>{document.getElementById("logout-form").submit()},ee=k=>{a.value=!1},se=k=>{let b=p.value.releases.findIndex(z=>z.id===k.id);p.value.releases.slice(b,1),O()},oe=k=>{let b=m.value.messages.findIndex(z=>z.id==k.id);m.value.messages.slice(b,1),O()},O=()=>{m.value.messages.length===0&&p.value.releases.length===0&&(v.value=!1)},U=()=>{let k=localStorage.getItem("last_notification-"+t.user_id),z=new Date().getTime()-60*5e3;if(!k||k<z)ie();else if(v.value=localStorage.getItem("notification-has-alerts-"+t.user_id)==="true",te(),!w.value)return},ie=()=>{let k=new Date().getTime();localStorage.setItem("last_notification-"+t.user_id,k),axios.get(t.fetch).then(b=>{localStorage.setItem("notification-has-alerts-"+t.user_id,b.data.has_alerts),U()})},te=()=>{setTimeout(function(){U()},t.alert_delta)},E=()=>t.avatar.startsWith("/images/"),_=()=>"url("+t.avatar+")";return pe(()=>{v.value=t.has_alerts,te()}),(k,b)=>{const z=gt("click-outside");return i(),r(q,null,[o("div",mo,[o("div",{class:"campaigns inline cursor-pointer text-center text-2xl hover:text-primary-focus",onClick:b[0]||(b[0]=D=>T()),"aria-label":"Switch campaigns",tabindex:"0",role:"button"},[ne(Le,{size:7}),b[5]||(b[5]=o("span",{class:"sr-only"},"Campaigns",-1))]),o("div",{class:"profile flex items-center cursor-pointer text-center uppercase",onClick:b[1]||(b[1]=D=>M()),"aria-label":"Profile settings",tabindex:"0",role:"button"},[o("div",fo,[v.value?(i(),r("span",ho)):g("",!0),E()?(i(),r("div",vo,h(e.initials),1)):(i(),r("div",{key:2,class:"w-9 h-9 rounded-lg cover-background",style:W({backgroundImage:_()})},null,4))])])]),a.value?K((i(),r("div",po,[n.value?(i(),r("div",go,[...b[6]||(b[6]=[o("i",{class:"fa-solid fa-spinner fa-spin","aria-hidden":"true"},null,-1)])])):(i(),r("div",yo,[o("div",bo,[o("div",{class:S(P(l.value)),onClick:b[2]||(b[2]=D=>T()),tabindex:"0",role:"button","aria-label":"Campaign list"},[l.value?(i(),r("div",xo,[o("div",wo,[ne(Le,{size:6})]),o("div",ko,[o("div",Lo,h(f.value.texts.campaigns),1),o("div",null,h(f.value.texts.count),1)])])):(i(),r("div",{key:1,class:"flex items-center justify-center h-full",title:f.value.texts.campaigns},[ne(Le,{size:6})],8,_o))],2),o("div",{class:S(P(u.value)),onClick:b[3]||(b[3]=D=>M()),tabindex:"0",role:"button","aria-label":"Profile pane"},[u.value?(i(),r("div",So,[E()?(i(),r("div",qo,h(e.initials),1)):(i(),r("div",{key:1,class:"flex-none w-9 h-9 rounded-lg cover-background",style:W({backgroundImage:_()})},null,4)),o("div",Eo,[o("div",To,h(c.value.name),1),o("div",null,h(c.value.created),1)])])):(i(),r("div",{key:1,class:"",title:c.value.your_profile},[E()?(i(),r("div",Mo,h(e.initials),1)):(i(),r("div",{key:1,class:"flex-none w-9 h-9 rounded-lg cover-background",style:W({backgroundImage:_()})},null,4))],8,Co))],2)]),u.value?(i(),r("div",Ao,[m.value.title?(i(),r("div",$o,[o("div",jo,[o("div",Do,h(m.value.title),1),o("div",Ho,[o("a",{href:m.value.all.url,class:"text-link"},h(m.value.all.text),9,Io)])]),o("div",Po,[(i(!0),r(q,null,C(m.value.messages,D=>(i(),Q(ao,{notification:D,onRead:oe},null,8,["notification"]))),256))]),m.value.messages.length===0?(i(),r("div",Ro,h(m.value.none),1)):g("",!0)])):g("",!0),p.value.title&&p.value.releases.length>0?(i(),r("div",Bo,[o("div",No,[o("div",Fo,h(p.value.title),1)]),o("div",Qo,[(i(!0),r(q,null,C(p.value.releases,D=>(i(),Q(uo,{release:D,onRead:se},null,8,["release"]))),256))])])):g("",!0),!c.value.is_impersonating&&d.value.title?(i(),r("div",Oo,[o("div",Uo,[o("div",zo,h(d.value.title),1),o("div",Ko,[o("a",{href:d.value.explore.url,class:"text-link"},h(d.value.explore.text),9,Vo)])]),o("div",Wo,[o("a",{href:d.value.themes.url,class:"border py-2 items-center justify-center rounded-md hover:shadow-md flex flex-col gap-1 border-base-300 text-link"},[b[7]||(b[7]=o("div",{class:"icon bg-base-200 rounded-full w-14 h-14 text-3xl aspect-square flex justify-center items-center"},[o("i",{class:"fa-duotone fa-palette","aria-hidden":"true"})],-1)),o("div",null,h(d.value.themes.title),1),o("div",Jo,h(d.value.themes.number),1)],8,Go),o("a",{href:d.value.sheets.url,class:"border py-2 items-center justify-center rounded-md hover:shadow-md flex flex-col gap-1 border-base-300 text-link"},[b[8]||(b[8]=o("div",{class:"icon bg-base-200 rounded-full w-14 h-14 text-3xl aspect-square flex justify-center items-center"},[o("i",{class:"fa-duotone fa-table-cells","aria-hidden":"true"})],-1)),o("div",null,h(d.value.sheets.title),1),o("div",Yo,h(d.value.sheets.number),1)],8,Zo),o("a",{href:d.value.content.url,class:"border py-2 items-center justify-center rounded-md hover:shadow-md flex flex-col gap-1 border-base-300 text-link"},[b[9]||(b[9]=o("div",{class:"icon bg-base-200 rounded-full w-14 h-14 text-3xl aspect-square flex justify-center items-center"},[o("i",{class:"fa-duotone fa-dice-d20","aria-hidden":"true"})],-1)),o("div",null,h(d.value.content.title),1),o("div",ei,h(d.value.content.number),1)],8,Xo)])])):g("",!0),!c.value.is_impersonating&&c.value.subscription?(i(),r("div",ti,[o("div",ni,h(c.value.subscription.title),1),o("a",{class:"border rounded-lg flex justify-center items-center hover:shadow-md border-base-300 text-link",href:c.value.urls.subscription},[o("div",si,[o("img",{class:"w-16 h-16",src:c.value.subscription.image,alt:c.value.subscription.tier},null,8,oi)]),o("div",ii,[o("div",ri,h(c.value.subscription.tier),1),c.value.subscription.tier!=="Kobold"?(i(),r("div",li,[R(h(c.value.subscription.created),1),b[10]||(b[10]=o("br",null,null,-1)),R(" "+h(c.value.subscription.boosters),1)])):(i(),r("div",ci,[R(h(c.value.subscription.call_to_action)+" ",1),o("div",ui,[R(h(c.value.subscription.call_to_action_2)+" ",1),I.value?(i(),r("i",di)):(i(),r("i",mi)),b[11]||(b[11]=o("i",{class:"fa-brands fa-paypal","aria-hidden":"true"},null,-1))])]))])],8,ai)])):g("",!0),c.value.is_impersonating?(i(),r("ul",gi,[o("li",null,[o("a",{href:c.value.return.url,class:"text-link"},[b[16]||(b[16]=o("i",{class:"fa-regular fa-sign-out-alt mr-3","aria-hidden":"true"},null,-1)),R(" "+h(c.value.return.name),1)],8,yi)])])):(i(),r("ul",fi,[o("li",null,[o("a",{href:c.value.urls.settings.url,class:"p-2 block text-link"},[b[12]||(b[12]=o("i",{class:"fa-regular fa-cog mr-3","aria-hidden":"true"},null,-1)),R(" "+h(c.value.urls.settings.name),1)],8,hi)]),o("li",null,[o("a",{href:c.value.urls.profile.url,class:"p-2 block text-link"},[b[13]||(b[13]=o("i",{class:"fa-regular fa-user mr-3","aria-hidden":"true"},null,-1)),R(" "+h(c.value.urls.profile.name),1)],8,vi)]),o("li",null,[o("a",{href:c.value.urls.help.url,class:"p-2 block text-link",target:"_blank"},[b[14]||(b[14]=o("i",{class:"fa-regular fa-question-circle mr-3","aria-hidden":"true"},null,-1)),R(" "+h(c.value.urls.help.name),1)],8,pi)]),o("li",null,[o("a",{href:"#",onClick:b[4]||(b[4]=D=>J()),class:"p-2 block text-link"},[b[15]||(b[15]=o("i",{class:"fa-regular fa-sign-out mr-3","aria-hidden":"true"},null,-1)),R(" "+h(c.value.urls.logout.name),1)])])]))])):(i(),r("div",bi,[c.value.is_impersonating?g("",!0):(i(),r("div",xi,[o("div",wi,[o("div",ki,[o("div",Li,h(f.value.texts.campaigns),1),f.value.member.length>0?(i(),r("div",_i,[o("a",{href:f.value.urls.reorder,class:"text-link"},h(f.value.texts.reorder),9,Si)])):g("",!0)]),o("div",qi,[(i(!0),r(q,null,C(f.value.member,D=>(i(),Q(ht,{campaign:D},null,8,["campaign"]))),256)),o("a",{href:f.value.urls.new,class:"new-campaign flex items-center text-center border-dashed border rounded-lg h-24 p-2 overflow-hidden text-link"},[o("span",Ti,[b[17]||(b[17]=o("i",{class:"fa-regular fa-plus","aria-hidden":"true",style:{display:"none"}},null,-1)),R(" "+h(f.value.texts.new),1)])],8,Ei)])]),c.value.is_impersonating?g("",!0):(i(),r("hr",Ci)),o("div",Mi,[c.value.is_impersonating?g("",!0):(i(),r("p",Ai,h(f.value.texts.followed),1)),c.value.is_impersonating?g("",!0):(i(),r("div",$i,[(i(!0),r(q,null,C(f.value.following,D=>(i(),Q(ht,{campaign:D},null,8,["campaign"]))),256)),o("a",{href:f.value.urls.follow,class:"new-campaign flex items-center text-center border-dashed border rounded-lg h-24 p-2 overflow-hidden text-link"},[o("span",Di,h(f.value.texts.follow),1)],8,ji)]))])]))]))]))])),[[z,ee]]):g("",!0)],64)}}}),de=Ae({});de.component("nav-toggler",Aa);de.component("nav-search",Os);de.component("nav-switcher",Hi);de.use(xt);de.mount("header");const Ii={key:0},Pi=["innerHTML"],Ri={key:1,class:"flex items-center gap-1"},Bi=["accept"],Ni={key:2,class:"flex items-center gap-1"},Fi=["placeholder"],Qi={key:0,class:"fa-solid fa-spin fa-spinner","aria-label":"Downloading"},Oi={key:3,class:"flex items-center gap-1"},Ui=["innerHTML"],zi={key:0,class:"flex gap-2 flex-col w-full"},Ki={class:"progress h-1 w-full"},Vi=["innerHTML"],Wi=["innerHTML"],Gi=["name"],Ji={key:2,type:"hidden",name:"remove-image",value:"1"},Zi={class:"flex gap-6 items-center p-4 md:p-6 justify-between"},Yi=["innerHTML"],Xi={class:"max-w-4xl flex flex-col gap-2 text-left p-4 md:px-6"},er={class:"flex flex-col gap-1 w-full"},tr=["innerHTML"],nr=["innerHTML"],ar={key:0,class:"p-4 md:px-6"},sr={class:""},or=["href"],ir=["innerHTML"],rr=B({__name:"Selection",props:{file:{},url:{},accepts:{},uuid:{},thumbnail:{},browse:{},field:{},old:{},i18n:{},cta:{},premium:{}},setup(e){const t=e,n=y(!0),a=y(!1),s=y(!1),l=y(),u=y(),c=y(),f=y(),m=y(),d=y(!1),p=y(0),v=y(null);let w;const I=y(null),T=y(!1),M=y(!1),j=y(!1),P=y(null),J=y(),ee=y();pe(()=>{n.value=!1,f.value=t.thumbnail,m.value=t.uuid,t.old==="true"&&(T.value=!0),t.premium==="true"&&(M.value=!0),P.value=JSON.parse(t.i18n)});const se=()=>{let x="relative flex items-end align-middle rounded overflow-hidden bg-no-repeat ";return U()?x+=" cover-background preview-bg w-48 h-36 p-2 ":x+="w-full",x},oe=()=>s.value?"hidden":"flex gap-2 flex-col w-full",O=()=>T.value||m.value!==null&&m.value!=="",U=()=>v.value||T.value?!0:m.value!==null&&m.value!=="",ie=()=>{m.value=null,f.value=null,T.value&&(T.value=!1,j.value=!0)},te=()=>v.value?"url('"+v.value+"')":f.value?"url('"+f.value+"')":"",E=()=>p.value+"%",_=()=>{d.value=!0},k=x=>{l.value=x.clipboardData.getData("text"),b()},b=()=>{!l.value||l.value==w||(w=l.value,a.value=!0,u.value.disabled=!0,axios.post(t.url,{url:l.value}).then(x=>{u.value.disabled=!1,a.value=!1,l.value=null,f.value=x.data.thumbnail,m.value=x.data.uuid}).catch(x=>{u.value.disabled=!1,a.value=!1,u.value.focus(),D(x)}))},z=async x=>{const L=x.target.files[0];if(!L){s.value=!1;return}const A=new FileReader;A.onload=F=>{v.value=F.target.result},A.readAsDataURL(L),s.value=!0,document.addEventListener("keydown",ye),I.value=axios.CancelToken.source(),c.value.disabled=!0;const Fe=new FormData;Fe.append("file",L),axios.post(t.file,Fe,{headers:{"Content-Type":"multipart/form-data"},cancelToken:I.value.token,onUploadProgress:function(F){p.value=Math.round(F.loaded*100/F.total)}}).then(F=>{s.value=!1,c.value.disabled=!1,c.value=null,f.value=F.data.thumbnail,m.value=F.data.uuid,v.value=null,document.removeEventListener("keydown",ye)}).catch(F=>{s.value=!1,c.value.disabled=!1,v.value=null,axios.isCancel(F)?c.value=null:D(F),document.removeEventListener("keydown",ye)})},D=x=>{if(!x.response)return;if(x.response.data.error){window.showToast(x.response.data.error,"error");return}if(x.response&&x.response.status===403&&x.response.data.message){window.showToast(P.value.unauthorized,"error");return}Object.keys(x.response.data.errors).forEach(A=>{if(x.response.data.errors[A][0].includes("(storage_full)")){ee.value=x.response.data.errors[A][0].replace("(storage_full)",""),an(J.value);return}window.showToast(x.response.data.errors[A][0],"error")})},tn=x=>{m.value=x.uuid,f.value=x.thumbnail},nn=()=>{d.value=!1},ye=x=>{x.key==="Escape"&&s.value&&Re()},Re=x=>{I.value.cancel("Upload canceled by user.")},an=x=>{x.showModal(),x.addEventListener("click",Ne)},Be=x=>{x.removeEventListener("click",Ne),x.close()},Ne=x=>{let L=x.target.getBoundingClientRect();!(L.top<=x.clientY&&x.clientY<=L.top+L.height&&L.left<=x.clientX&&x.clientX<=L.left+L.width)&&x.target.tagName==="DIALOG"&&Be(x.target)};return(x,L)=>(i(),r(q,null,[n.value?(i(),r("div",Ii,[...L[7]||(L[7]=[o("i",{class:"fa-solid fa-spin fa-spinner","aria-label":"Loading"},null,-1)])])):(i(),r("div",{key:1,class:S(se()),style:W({backgroundImage:te()})},[o("div",{class:S(oe())},[U()?(i(),r("div",{key:0,class:"rounded p-2 cursor-pointer backdrop-blur-sm backdrop-opacity-30 bg-red-700/50 text-white hover:backdrop-opacity-100 transition",onClick:L[0]||(L[0]=A=>ie()),innerHTML:P.value.remove},null,8,Pi)):g("",!0),O()?g("",!0):(i(),r("div",Ri,[o("input",{type:"file",accept:t.accepts,class:"w-full",onChange:z,ref_key:"fileField",ref:c},null,40,Bi)])),O()?g("",!0):(i(),r("div",Ni,[K(o("input",{ref_key:"urlField",ref:u,type:"text",class:"w-full","onUpdate:modelValue":L[1]||(L[1]=A=>l.value=A),onBlur:L[2]||(L[2]=A=>b()),onPaste:k,placeholder:P.value.url},null,40,Fi),[[ce,l.value]]),a.value?(i(),r("i",Qi)):g("",!0)])),O()?g("",!0):(i(),r("div",Oi,[o("span",{role:"button",class:"btn2 btn-default btn-sm",onClick:L[3]||(L[3]=A=>_()),innerHTML:P.value.gallery},null,8,Ui)]))],2),s.value?(i(),r("div",zi,[o("div",Ki,[o("div",{class:"h-1 bg-accent shadow-xs",role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100",style:W({width:E()})},[...L[8]||(L[8]=[o("span",{class:"sr-only"},null,-1)])],4)]),o("div",{class:"rounded p-2 cursor-pointer backdrop-blur-sm backdrop-opacity-30 bg-red-700/50 text-white hover:backdrop-opacity-100 transition flex items-center gap-2",onClick:L[4]||(L[4]=A=>Re())},[o("span",{class:"grow",innerHTML:P.value.cancel},null,8,Vi),o("span",{class:"text-xs flex-none",innerHTML:E()},null,8,Wi)])])):g("",!0)],6)),K(o("input",{type:"hidden",name:t.field,"onUpdate:modelValue":L[5]||(L[5]=A=>m.value=A)},null,8,Gi),[[ce,m.value]]),j.value?(i(),r("input",Ji)):g("",!0),ne(rn,{api:t.browse,opened:d.value,i18n:e.i18n,onSelected:tn,onClosed:nn},null,8,["api","opened","i18n"]),n.value?g("",!0):(i(),r("dialog",{key:3,ref_key:"cta",ref:J,class:"dialog rounded-2xl text-center"},[o("header",Zi,[o("h4",{innerHTML:P.value.cta_title,class:"text-lg font-normal"},null,8,Yi),o("button",{type:"button",class:"text-base-content",onClick:L[6]||(L[6]=A=>Be(J.value)),title:"Close"},[...L[9]||(L[9]=[o("i",{class:"fa-regular fa-circle-xmark","aria-hidden":"true"},null,-1),o("span",{class:"sr-only"},"Close",-1)])])]),o("article",Xi,[o("div",er,[o("p",{innerHTML:ee.value},null,8,tr),M.value?g("",!0):(i(),r("p",{key:0,innerHTML:P.value.cta_helper},null,8,nr))])]),M.value?g("",!0):(i(),r("footer",ar,[o("menu",sr,[o("a",{href:t.cta,class:"btn2 btn-primary"},[L[10]||(L[10]=o("i",{class:"fa-regular fa-gem","aria-hidden":"true"},null,-1)),o("span",{innerHTML:P.value.cta_action},null,8,ir)],8,or)])]))],512))],64))}}),Kt=()=>{document.querySelectorAll(".gallery-selection").forEach(t=>{if(t.dataset.init==="1")return;t.dataset.init="1";const n=Ae({});n.component("gallery-selection",rr),n.mount(t)})};Kt();window.onEvent(function(){Kt()});const lr={class:"max-w-28 truncate"},cr={class:"opacity-60 text-[10px]"},ur=["aria-label"],dr={class:"flex flex-col gap-4 p-3 w-52"},mr={class:"flex flex-col gap-2"},fr={class:"text-xs font-medium opacity-80"},hr=["onKeydown"],vr={class:"flex flex-col gap-2"},pr={class:"text-xs font-medium opacity-80"},gr=["value"],yr={class:"flex gap-1 justify-between"},br=["onClick"],xr=["onClick"],wr=B({__name:"AliasPill",props:{alias:{},visibilityOptions:{},saveLabel:{},deleteLabel:{},aliasNameLabel:{},visibleToLabel:{}},emits:["update","delete"],setup(e,{emit:t}){const n=e,a=t,s=y(),l=y(null),u=y(n.alias.name),c=y(n.alias.visibility),f={all:"bg-sky-100 text-sky-700",members:"bg-stone-200 text-stone-700",admin:"bg-amber-100 text-amber-700","admin-self":"bg-orange-100 text-orange-700",self:"bg-purple-100 text-purple-700"},m=Z(()=>{const I="flex items-center gap-2 px-3 py-1 rounded-full text-xs cursor-pointer select-none",T=f[n.alias.visibility]??"bg-base-200 text-base-content";return`${I} ${T}`}),d=Z(()=>n.visibilityOptions.find(I=>I.value===n.alias.visibility)?.label??n.alias.visibility),p=()=>{u.value=n.alias.name,c.value=n.alias.visibility,setTimeout(()=>l.value?.focus(),50)},v=()=>{u.value.trim()&&a("update",{...n.alias,name:u.value.trim(),visibility:c.value})},w=()=>{a("delete",n.alias)};return(I,T)=>(i(),Q(yt(ln),{placement:"bottom-start",trigger:"click",interactive:!0,arrow:!1,theme:"kanka",onShow:p,ref_key:"tippyRef",ref:s},{content:Qe(({hide:M})=>[o("div",dr,[o("div",mr,[o("label",fr,h(e.aliasNameLabel),1),K(o("input",{"onUpdate:modelValue":T[1]||(T[1]=j=>u.value=j),type:"text",class:"w-full text-sm",maxlength:"45",ref_key:"popoverInput",ref:l,onKeydown:[X(ue(()=>{v(),M()},["prevent"]),["enter"]),X(M,["esc"])]},null,40,hr),[[ce,u.value]])]),o("div",vr,[o("label",pr,h(e.visibleToLabel),1),K(o("select",{"onUpdate:modelValue":T[2]||(T[2]=j=>c.value=j),class:"w-full text-sm"},[(i(!0),r(q,null,C(e.visibilityOptions,j=>(i(),r("option",{key:j.value,value:j.value},h(j.label),9,gr))),128))],512),[[bt,c.value]])]),o("div",yr,[o("button",{type:"button",class:"btn2 btn-error btn-xs btn-outline",onClick:()=>{w(),M()}},h(e.deleteLabel),9,br),o("button",{type:"button",class:"btn2 btn-primary btn-xs",onClick:()=>{v(),M()}},h(e.saveLabel),9,xr)])])]),default:Qe(()=>[o("button",{type:"button",class:S(m.value)},[o("span",lr,h(e.alias.name),1),o("span",cr,h(d.value),1),o("span",{class:"leading-none flex-none opacity-60 hover:opacity-100 border border-inherit rounded-full flex items-center align-middle w-4 h-4 justify-center",onClick:T[0]||(T[0]=ue(M=>a("delete",e.alias),["stop"])),"aria-label":e.deleteLabel},"×",8,ur)],2)]),_:1},512))}}),kr={key:0,class:"flex items-start gap-1.5 text-warning-content text-xs"},Lr={class:"flex flex-wrap gap-1 mt-0.5"},_r=["href"],Sr=B({__name:"SimilarEntityAlert",props:{entities:{},label:{}},setup(e){return(t,n)=>e.entities.length>0?(i(),r("div",kr,[n[0]||(n[0]=o("i",{class:"fa-regular fa-triangle-exclamation mt-0.5 flex-none","aria-hidden":"true"},null,-1)),o("span",null,[R(h(e.label)+" ",1),o("span",Lr,[(i(!0),r(q,null,C(e.entities,a=>(i(),r("a",{key:a.url,href:a.url,target:"_blank",class:"text-link underline"},h(a.name),9,_r))),128))])])])):g("",!0)}});function qr(){const e=y([]),t=y(!1);let n=null,a="",s="",l=null;return{similarEntities:e,isChecking:t,setup:(m,d)=>{s=m,l=d},setName:m=>{if(n&&clearTimeout(n),!m||m.length<3){e.value=[];return}n=setTimeout(()=>{if(m===a)return;a=m,t.value=!0;const d=s+"?q="+encodeURIComponent(m)+"&exclude="+(l||"");fetch(d).then(p=>p.json()).then(p=>{e.value=p,t.value=!1}).catch(()=>{t.value=!1})},400)},clear:()=>{e.value=[],a=""}}}const Er={class:"flex flex-col gap-2"},Tr=["disabled"],Cr=["value","placeholder","required"],Mr={key:0,class:"flex flex-wrap gap-1 items-center"},Ar=["placeholder","onKeydown"],$r={class:"flex gap-2"},jr=["value"],Dr={key:1,class:"flex flex-wrap gap-1"},Hr={key:0,class:"flex gap-0.5 items-center"},Ir={key:1,class:"bg-amber-100 text-amber-700 border-amber-700 p-3 rounded-xl text-xs flex gap-1"},Pr=["innerHTML"],Rr=["value"],Br=B({__name:"EntityName",props:{label:{},placeholder:{},modelValue:{},endPoint:{},entityId:{},aliases:{},aliasLimit:{},upgradeUrl:{},required:{type:Boolean},i18n:{}},emits:["update:modelValue","update:aliases"],setup(e,{emit:t}){const n=e,a=t,s=`entity-name-${Math.random().toString(36).slice(2)}`,l={addAlias:"+ Alias",aliasPlaceholder:"Alias name",aliasNameLabel:"Alias name",visibleToLabel:"Visible to",duplicateWarning:"Similar entities found:",save:"Save",delete:"Delete",aliasLimitReached:"Alias limit reached.",upgrade:"Upgrade",visibilityAll:"All",visibilityMembers:"Members",visibilityAdmin:"Admins",visibilityAdminSelf:"Me & Admins",visibilitySelf:"Only me"},u=Z(()=>{const E=n.i18n?JSON.parse(n.i18n):{};return{...l,...E}}),c=Z(()=>[{value:"all",label:u.value.visibilityAll},{value:"members",label:u.value.visibilityMembers},{value:"admin",label:u.value.visibilityAdmin},{value:"admin-self",label:u.value.visibilityAdminSelf},{value:"self",label:u.value.visibilitySelf}]),f=Z(()=>n.aliases!==void 0),m=y(n.modelValue??""),d=y(n.aliases?JSON.parse(n.aliases):[]),p=y(!1),v=y(""),w=y("all"),I=y(null);let T=-1;const M=Z(()=>n.aliasLimit!==null&&n.aliasLimit!==void 0&&d.value.length>=n.aliasLimit),j=Z(()=>{const E="text-link text-xs";return M.value?`${E} opacity-40 cursor-not-allowed`:E}),{similarEntities:P,setup:J,setName:ee}=qr();pe(()=>{n.endPoint&&J(n.endPoint,n.entityId??null)});const se=E=>{const _=E.target.value;m.value=_,a("update:modelValue",_),n.endPoint&&ee(_)},oe=()=>{M.value||(p.value=!p.value,p.value&&(v.value="",w.value="all",sn(()=>I.value?.focus())))},O=()=>{const E=v.value.trim();E&&(d.value=[...d.value,{id:T--,name:E,visibility:w.value}],a("update:aliases",d.value),U())},U=()=>{p.value=!1,v.value=""},ie=E=>{d.value=d.value.map(_=>_.id===E.id?E:_),a("update:aliases",d.value)},te=E=>{d.value=d.value.filter(_=>_.id!==E.id),a("update:aliases",d.value)};return(E,_)=>(i(),r("div",Er,[o("div",{class:S(["flex items-center justify-between",{required:e.required}])},[o("label",{for:s,class:"text-xs font-medium opacity-80"},h(e.label),1),f.value?(i(),r("button",{key:0,type:"button",disabled:M.value,class:S(j.value),onClick:oe},[_[2]||(_[2]=o("i",{class:"fa-regular fa-plus","aria-hidden":"true"},null,-1)),R(" "+h(u.value.addAlias),1)],10,Tr)):g("",!0)],2),o("input",{id:s,type:"text",name:"name",value:m.value,placeholder:e.placeholder,required:e.required,maxlength:"191",class:"w-full","data-1p-ignore":"true",onInput:se},null,40,Cr),ne(Sr,{entities:yt(P),label:u.value.duplicateWarning},null,8,["entities","label"]),p.value?(i(),r("div",Mr,[K(o("input",{"onUpdate:modelValue":_[0]||(_[0]=k=>v.value=k),type:"text",class:"grow min-w-0 text-sm !min-h-3 !py-0.5",maxlength:"45",placeholder:u.value.aliasPlaceholder,ref_key:"addInput",ref:I,onKeydown:[X(ue(O,["prevent"]),["enter"]),X(U,["esc"])]},null,40,Ar),[[ce,v.value]]),o("div",$r,[K(o("select",{"onUpdate:modelValue":_[1]||(_[1]=k=>w.value=k),class:"text-sm !min-h-3 !py-0.5"},[(i(!0),r(q,null,C(c.value,k=>(i(),r("option",{key:k.value,value:k.value},h(k.label),9,jr))),128))],512),[[bt,w.value]]),o("div",{class:"flex gap-1 flex-none"},[o("button",{type:"button",class:"px-3 py-2 rounded-lg bg-primary text-primary-content text-sm hover:opacity-80",onClick:O},[..._[3]||(_[3]=[o("span",null,"Add",-1)])]),o("button",{type:"button",class:"px-2 py-1 rounded-lg hover:bg-base-300 text-xs text-neutral-content",onClick:U},[..._[4]||(_[4]=[o("i",{class:"fa-regular fa-xmark","aria-hidden":"true"},null,-1)])])])])])):g("",!0),d.value.length>0?(i(),r("div",Dr,[(i(!0),r(q,null,C(d.value,k=>(i(),Q(wr,{key:k.id,alias:k,"visibility-options":c.value,"save-label":u.value.save,"delete-label":u.value.delete,"alias-name-label":u.value.aliasNameLabel,"visible-to-label":u.value.visibleToLabel,onUpdate:ie,onDelete:te},null,8,["alias","visibility-options","save-label","delete-label","alias-name-label","visible-to-label"]))),128))])):g("",!0),e.aliasLimit!==null&&e.aliasLimit!==void 0?(i(),r(q,{key:2},[M.value?g("",!0):(i(),r("div",Hr,[(i(!0),r(q,null,C(e.aliasLimit,k=>(i(),r("span",{key:k,class:S([k<=d.value.length?"bg-accent":"bg-base-300","h-1.5 w-4 rounded-full transition-colors"])},null,2))),128))])),M.value?(i(),r("div",Ir,[_[5]||(_[5]=o("i",{class:"fa-regular fa-warning text-base","aria-hidden":"true"},null,-1)),o("span",{innerHTML:u.value.aliasLimitReached},null,8,Pr)])):g("",!0)],64)):g("",!0),o("input",{type:"hidden",name:"aliases",value:JSON.stringify(d.value)},null,8,Rr)]))}}),Vt=()=>{document.querySelectorAll(".field-entity-name").forEach(t=>{if(t.dataset.init==="1")return;t.dataset.init="1";const n=Ae({});n.use(cn,{defaultProps:{interactive:!0}}),n.component("entity-name",Br),n.mount(t)})};Vt();window.onEvent(function(){Vt()});const _e=Array(),Wt=()=>{document.querySelectorAll('[data-toggle="tooltip-ajax"]').forEach(t=>{t._tippy||ge(t,{theme:"entity-tooltip",placement:t.dataset.direction??"bottom",allowHTML:!0,interactive:!0,delay:500,appendTo:t.dataset.append??document.body,content:'<i class="fa-solid fa-spin fa-spinner" aria-hidden="true" aria-label="loading..." />',arrow:!0,onShow(n){let a=t.dataset.id;if(a&&a in _e){n.setContent(_e[a]);return}fetch(t.dataset.url).then(s=>s.json()).then(s=>{n.setContent(s[0]),_e[a]=s[0]}).catch(s=>{n.setContent(`Failed loading tooltip. ${s}`)})}})})},Gt=()=>{let e=document.querySelectorAll('[data-toggle="tooltip"]');e.forEach(t=>{vt(t)}),e=document.querySelectorAll("[data-tooltip]"),e.forEach(t=>{vt(t)})},vt=e=>{e._tippy||ge(e,{content:e.dataset.title??e.title,theme:"kanka",delay:250,placement:e.dataset.direction??"bottom",allowHTML:e.dataset.html??!1,appendTo:e.dataset.append??document.body,arrow:!0})},Jt=()=>{document.querySelectorAll("[data-dropdown]").forEach(t=>{if(t._tippy)return;let n=t.parentNode.querySelectorAll(".dropdown-menu")[0];ge(t,{content:'<div class="dd-menu flex flex-col max-w-2xl">'+n.innerHTML+"</div>",theme:"kanka-dropdown",placement:t.dataset.direction??"bottom",zIndex:890,allowHTML:!0,arrow:!0,interactive:!0,trigger:"click",onShown(a){window.triggerEvent()}})})},Nr=(e,t)=>{ge(e,t).show()};Gt();Wt();Jt();window.initTooltips=Gt;window.ajaxTooltip=Wt;window.showTooltip=Nr;window.initDropdowns=Jt;const Zt=()=>{document.querySelectorAll('form[data-maintenance="1"]').forEach(function(t){t.addEventListener("submit",Fr)})},Fr=e=>{window.entityFormHasUnsavedChanges=!1,e.preventDefault();const t=e.target;Qr(t);let n=new FormData(t);axios.post(t.getAttribute("action"),n).then(()=>{t.submit()}).catch(a=>{a.response&&window.formErrorHandler(a.response,t),Or(t)})},Qr=e=>{e.querySelectorAll(".btn-primary").forEach((n,a)=>{a===0&&n.classList.add("loading"),n.classList.add("btn-disabled")})},Or=e=>{e.querySelectorAll(".btn-primary").forEach(n=>{n.classList.remove("btn-disabled","loading")})};Zt();window.onEvent(function(){Zt()});window.onEvent(function(){window.initForeignSelect(),window.initTags(),window.initDialogs(),window.initTooltips(),window.ajaxTooltip(),window.initDropdowns(),window.initSortable(),Pe(),Xt(),Yt(),en(),Vr()});function Ur(){let e=document.getElementById("ad-client");e&&fetch(e.src,{method:"HEAD",mode:"no-cors"}).catch(()=>{document.getElementById("adblock-plea")?.classList.remove("hidden")})}const zr=()=>{document.querySelectorAll(".nav-tabs li a")?.forEach(function(t){t.addEventListener("click",function(n){n.preventDefault();const a=t.closest(".nav-tabs-custom");a.querySelector(".nav-tabs li.active")?.classList.remove("active"),a.querySelector(".tab-pane.active")?.classList.remove("active"),t.parentElement.classList.add("active"),document.querySelector(t.getAttribute("href"))?.classList.add("active")})})},Yt=()=>{document.querySelectorAll('[data-img="delete"]')?.forEach(function(e){e.addEventListener("click",function(t){t.preventDefault(),document.querySelector("input[name="+e.dataset.target+"]").value=1,e.closest(".preview").classList.add("hidden")})})},Pe=()=>{document.querySelectorAll(".pagination-ajax-links a").forEach(function(e){e.dataset.loaded!=="1"&&(e.dataset.loaded="1",e.addEventListener("click",function(t){t.preventDefault();const n=document.querySelector(".pagination-ajax-body");n.querySelector(".modal-loading").classList.remove("hidden"),n.querySelector(".pagination-ajax-content").classList.add("hidden"),fetch(e.getAttribute("href")).then(a=>a.text()).then(a=>{n.parentNode.innerHTML=a,Pe(),window.triggerEvent()})}))})},Xt=()=>{document.querySelectorAll('[data-toggle="confirm-delete"]')?.forEach(function(e){e.dataset.loaded!=="1"&&(e.dataset.loaded="1",e.addEventListener("click",function(t){if(t.preventDefault(),e.dataset.confirming==="1"){e.classList.add("loading"),e.innerHTML="";const a=document.querySelector(e.dataset.target);a?a.requestSubmit():console.error("Unknown target",a);return}const n=e.innerHTML;e.dataset.confirming="1",e.querySelector("span").classList.add("md:inline"),e.querySelector("span").innerHTML=e.dataset.confirm,e.addEventListener("blur",function(){e.dataset.confirming="0",e.innerHTML=n},{once:!0})}))}),document.querySelectorAll('a[data-toggle="delete-form"]')?.forEach(function(e){e.dataset.loaded!=="1"&&(e.dataset.loaded="1",e.addEventListener("click",function(t){t.preventDefault(),document.querySelector(e.dataset.target).requestSubmit()}))})},Kr=()=>{document.querySelector(".submenu-switcher")?.addEventListener("change",function(e){e.preventDefault();const t=e.target,n=t.options[t.selectedIndex];window.location.href=n.dataset.route})},en=()=>{document.querySelectorAll("[data-dismisses]").forEach(t=>{t.addEventListener("click",function(n){n.preventDefault();let a=document.querySelector(this.dataset.dismisses);a.classList.remove("opacity-100"),a.classList.add("opacity-0"),a.addEventListener("transitionend",()=>{a.remove()},{once:!0})})})},Vr=()=>{const e=document.querySelector(".btn-manage-perm");e&&e.addEventListener("click",function(t){t.preventDefault(),window.closeDialog("primary-dialog");let n=e.dataset.target;document.querySelector(n).click()})};window.initForeignSelect();window.initDialogs();Kr();zr();Pe();Xt();Yt();en();Ur();
