import{S as l}from"./sortable.esm-JNWusfcT.js";const c=new IntersectionObserver(function(e){e.forEach(t=>{t.isIntersecting&&e.forEach(n=>{g(n.target)})})},{threshold:[0]}),u=()=>{if(!document.querySelector(".campaign-dashboard-widgets"))return;let e=document.getElementById("widgets");new l(e,{handle:".handle",onEnd:function(t){const n=document.getElementById("widgets").dataset.url;let a="";document.querySelectorAll('input[name="widgets[]"]').forEach(d=>{a+=`${d.name}=${encodeURIComponent(d.value)}&`}),axios.post(n,a).then(d=>{d.data.success&&d.data.message&&window.showToast(d.data.message)})}}),window.onEvent(function(){document.getElementById("summernote-config")&&window.initSummernote(),document.querySelectorAll('[data-img="delete"]').forEach(a=>{a.addEventListener("click",function(o){o.preventDefault(),document.querySelector("input[name="+a.dataset.target+"]").value=1,a.closest(".preview").classList.add("hidden")})})})},i=()=>{const e=document.querySelectorAll(".widget-calendar-switch");e.length!==0&&e.forEach(t=>{t.addEventListener("click",n=>{n.preventDefault();const a=t.dataset.url,o=t.dataset.widget;document.querySelector("#widget-body-"+o).classList.add("hidden"),document.querySelector("#widget-loading-"+o).classList.remove("hidden"),axios.post(a).then(d=>{r(o,d.data)})})})},m=()=>{const e=document.querySelector("#campaign-follow"),t=document.querySelector("#campaign-follow-text");if(!e)return;e.dataset.following?t.innerHTML=e.dataset.unfollow:t.innerHTML=e.dataset.follow,e.classList.remove("hidden"),e.addEventListener("click",function(a){e.classList.add("loading"),a.preventDefault(),axios.post(e.dataset.url).then(o=>{e.classList.remove("loading"),o.data.following?t.innerHTML=e.dataset.unfollow:t.innerHTML=e.dataset.follow})})},g=e=>{axios.get(e.dataset.render).then(t=>{let n=e.dataset.id;r(n,t.data)})},r=(e,t)=>{document.querySelector("#widget-loading-"+e).classList.add("hidden"),document.querySelector("#widget-body-"+e).innerHTML=t,document.querySelector("#widget-body-"+e).classList.remove("hidden"),window.triggerEvent(),i()},f=()=>{document.querySelectorAll(".preview-switch").forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();let n=document.querySelector("#widget-preview-body-"+e.dataset.widget);n.classList.contains("max-h-52")?(n.classList.remove("max-h-52"),e.innerHTML='<i class="fa-solid fa-chevron-up" aria-hidden="true"></i>',e.parentNode.querySelector(".gradient-to-base-100").classList.add("hidden")):(n.classList.add("max-h-52"),e.innerHTML='<i class="fa-solid fa-chevron-down" aria-hidden="true"></i>',e.parentNode.querySelector(".gradient-to-base-100").classList.remove("hidden"))})})};i();m();f();u();var s;(s=document.querySelectorAll("[data-render]"))==null||s.forEach(e=>{c.observe(e)});
