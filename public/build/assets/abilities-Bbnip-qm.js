import{d as _,r as y,c as s,a as i,b as t,f as n,n as k,F as m,g as f,e as v,i as T,o as L,s as M,q as H}from"./vue.esm-bundler-CSDHRrjm.js";const w=["data-tags"],$={class:"ability-box p-4 rounded bg-box shadow-xs flex flex-col md:flex-row items-center md:items-start gap-2 md:gap-4"},C={key:0,class:""},A=["href"],B={class:"flex flex-col gap-4 w-full"},I={class:"flex gap-2 md:gap-4 items-center w-full"},j={class:"flex gap-2 items-center text-xl grow"},N=["href","innerHTML"],z=["title"],D=["title"],E=["title"],F=["title"],V=["title"],q=["innerHTML"],P={key:1,class:""},S=["title"],U=["innerHTML"],G={key:0,class:"visible md:hidden"},J=["innerHTML"],K=["innerHTML"],O={key:2,class:"flex gap-2 items-center ability-tags"},Q=["href","data-url","innerHTML"],R=["innerHTML"],W={key:4,class:"flex gap-2 md:gap-4 ability-charges w-full items-end"},X={class:"flex gap-1 flex-wrap grow"},Y=["onClick"],Z=["innerHTML"],ee={class:"flex-none"},ie=["innerHTML"],se=["innerHTML"],te=_({__name:"Ability",props:{ability:{},permission:{}},setup(b){y(!1);const l=b,r=()=>l.permission.value,c=()=>l.ability.images.thumb?{backgroundImage:"url("+l.ability.images.thumb+")"}:{},p=e=>{window.openDialog("abilities-dialog",e.actions.edit)},a=()=>l.ability.charges-l.ability.used_charges,g=()=>l.ability.i18n.left.replace(/:amount/,""),d=e=>{let u="rounded-xl bg-base-200 text-xs py-1 px-3 text-base-content";return u+=" "+e.class},h=(e,u)=>{u>e.used_charges?e.used_charges+=1:e.used_charges-=1,axios.post(e.actions.use,{used:e.used_charges}).then(o=>{o.data.success||(e.used_charges-=1)}).catch(()=>{e.used_charges-=1})};return(e,u)=>(i(),s("div",{class:"ability","data-tags":e.ability.class},[t("div",$,[e.ability.images.has?(i(),s("div",C,[t("a",{class:"ability-image rounded-xl block w-40 h-40 cover-background",href:e.ability.images.url,style:k(c())},null,12,A)])):n("",!0),t("div",B,[t("div",I,[t("div",j,[t("a",{href:e.ability.actions.view,class:"ability-name text-2xl text-link",innerHTML:e.ability.name},null,8,N),e.ability.visibility_id===2?(i(),s("i",{key:0,class:"fa-regular fa-lock",title:e.ability.visibility},null,8,z)):n("",!0),e.ability.visibility_id===3?(i(),s("i",{key:1,class:"fa-regular fa-user-lock",title:e.ability.visibility},null,8,D)):n("",!0),e.ability.visibility_id===5?(i(),s("i",{key:2,class:"fa-regular fa-users",title:e.ability.visibility},null,8,E)):n("",!0),e.ability.visibility_id===4?(i(),s("i",{key:3,class:"fa-regular fa-user-secret",title:e.ability.visibility},null,8,F)):n("",!0),e.ability.visibility_id===1?(i(),s("i",{key:4,class:"fa-regular fa-eye",title:e.ability.visibility},null,8,V)):n("",!0)]),e.ability.type?(i(),s("div",{key:0,class:"hidden md:inline bg-base-200 p-2 rounded-xl flex-none",innerHTML:e.ability.type},null,8,q)):n("",!0),e.permission?(i(),s("div",P,[r?(i(),s("a",{key:0,role:"button",onClick:u[0]||(u[0]=o=>p(e.ability)),class:"btn2 btn-ghost btn-sm",title:e.ability.i18n.edit},[u[1]||(u[1]=t("i",{class:"fa-regular fa-pencil text-xl","aria-hidden":"true"},null,-1)),t("span",{class:"sr-only",innerHTML:e.ability.i18n.edit},null,8,U)],8,S)):n("",!0)])):n("",!0)]),e.ability.type?(i(),s("div",G,[t("div",{class:"inline-block bg-base-200 p-2 rounded-xl",innerHTML:e.ability.type},null,8,J)])):n("",!0),e.ability.entry?(i(),s("div",{key:1,class:"entity-content",innerHTML:e.ability.entry},null,8,K)):n("",!0),e.ability.tags?(i(),s("div",O,[(i(!0),s(m,null,f(e.ability.tags,o=>(i(),s("a",{class:v(d(o)),href:o.url,"data-toggle":"tooltip-ajax","data-url":o.tooltip,innerHTML:o.name},null,10,Q))),256))])):n("",!0),e.ability.note?(i(),s("div",{key:3,class:"entity-content",innerHTML:e.ability.note},null,8,R)):n("",!0),e.ability.charges&&e.permission?(i(),s("div",W,[t("div",X,[(i(!0),s(m,null,f(e.ability.charges,o=>(i(),s("div",{class:v(["charge cursor-pointer rounded-full p-2 hover:bg-accent hover:text-accent-content w-8 h-8 flex items-center justify-center",{"bg-base-200 charge-used":e.ability.used_charges>=o}]),onClick:Te=>h(e.ability,o)},[t("span",{innerHTML:o},null,8,Z)],10,Y))),256))]),t("div",ee,[t("span",{class:"text-2xl",innerHTML:a()},null,8,ie),t("span",{innerHTML:g()},null,8,se)])])):n("",!0)])])],8,w))}}),ne={class:"ability-parent flex flex-col gap-5 w-full"},ae={class:"parent-head flex gap-2 md:gap-5 items-center"},le={class:"flex flex-col gap-1 grow overflow-hidden"},oe={key:0},re=["href","innerHTML"],de=["innerHTML"],ue=["innerHTML"],ce={class:"flex-none self-end"},pe={key:0,"aria-hidden":"true",class:"fa-thin fa-chevron-circle-up fa-2x"},ge={key:1,"aria-hidden":"true",class:"fa-thin fa-chevron-circle-down fa-2x"},ye={key:2,class:"sr-only"},be={key:3,class:"sr-only"},he={key:0,class:"parent-abilities flex flex-col gap-5"},me=_({__name:"Parent",props:{group:{},permission:{},meta:{}},setup(b){const l=b,r=y(!1),c=()=>l.group.has_image?{backgroundImage:"url("+l.group.image+")"}:{},p=a=>{r.value=!r.value};return(a,g)=>(i(),s("div",ne,[t("div",ae,[a.group.has_image?(i(),s("div",{key:0,class:"parent-image rounded-full w-12 h-12 md:w-16 md:h-16 cover-background flex-none",style:k(c())},null,4)):n("",!0),t("div",le,[a.group.url?(i(),s("div",oe,[t("a",{href:a.group.url,innerHTML:a.group.name,class:"parent-name text-xl md:text-2xl"},null,8,re)])):(i(),s("span",{key:1,class:"parent-name text-xl md:text-2xl",innerHTML:a.group.name},null,8,de)),t("p",{class:"md:text-lg truncate",innerHTML:a.group.type},null,8,ue)]),t("div",ce,[t("span",{role:"button",onClick:g[0]||(g[0]=d=>p(a.group)),class:"cursor-pointer inline-block"},[r.value?(i(),s("i",ge)):(i(),s("i",pe)),r.value?(i(),s("span",be,"Collapse section")):(i(),s("span",ye,"Expand section"))])])]),r.value?n("",!0):(i(),s("div",he,[(i(!0),s(m,null,f(a.group.abilities,d=>(i(),T(te,{key:d.id,ability:d,permission:a.permission,meta:a.meta},null,8,["ability","permission","meta"]))),128))]))]))}}),fe={class:"viewport box-abilities relative flex flex-col gap-5"},_e={key:0,class:"load more text-center text-2xl"},ve={class:"flex gap-5 flex-wrap"},ke=_({__name:"Abilities",props:{id:{},api:{},permission:{}},setup(b){const l=b,r=y([]),c=y([]),p=y(!0),a=y(!0),g=()=>{axios.get(l.api).then(d=>{r.value=d.data.data.groups,c.value=d.data.data.meta,p.value=!1,a.value=!1})};return L(()=>{g()}),M(()=>{window.ajaxTooltip()}),(d,h)=>(i(),s("div",fe,[p.value?(i(),s("div",_e,h[0]||(h[0]=[t("i",{class:"fa-solid fa-spin fa-spinner","aria-hidden":"true"},null,-1)]))):n("",!0),t("div",ve,[(i(!0),s(m,null,f(r.value,e=>(i(),T(me,{key:e.id,group:e,permission:d.permission,meta:c.value},null,8,["group","permission","meta"]))),128))])]))}}),x=H({});x.component("abilities",ke);x.mount("#abilities");
