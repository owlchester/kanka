const C=(()=>{return(($,c,y,L)=>{const W=c.createElement("canvas").getContext("2d"),H={r:0,g:0,b:0,h:0,s:0,v:0,a:1};let w,o,g,d,q,v,I,M,O,z,F,E,u,D,A,J,m={};const r={el:"[data-coloris]",parent:"body",theme:"default",themeMode:"light",rtl:!1,wrap:!0,margin:2,format:"hex",formatToggle:!1,swatches:[],swatchesOnly:!1,alpha:!0,forceAlpha:!1,focusInput:!0,selectInput:!1,inline:!1,defaultColor:"#000000",clearButton:!1,clearLabel:"Clear",closeButton:!1,closeLabel:"Close",onChange:()=>L,a11y:{open:"Open color picker",close:"Close color picker",clear:"Clear the selected color",marker:"Saturation: {s}. Brightness: {v}.",hueSlider:"Hue slider",alphaSlider:"Opacity slider",input:"Color value field",format:"Color format",swatch:"Color swatch",instruction:"Saturation and brightness selector. Use up, down, left and right arrow keys to select."}},N={};let Q="",R={},j=!1;function Y(e){if(typeof e=="object")for(const t in e)switch(t){case"el":_(e.el),e.wrap!==!1&&K(e.el);break;case"parent":w=c.querySelector(e.parent),w&&(w.appendChild(o),r.parent=e.parent,w===c.body&&(w=L));break;case"themeMode":r.themeMode=e.themeMode,e.themeMode==="auto"&&$.matchMedia&&$.matchMedia("(prefers-color-scheme: dark)").matches&&(r.themeMode="dark");case"theme":e.theme&&(r.theme=e.theme),o.className=`clr-picker clr-${r.theme} clr-${r.themeMode}`,r.inline&&V();break;case"rtl":r.rtl=!!e.rtl,c.querySelectorAll(".clr-field").forEach(s=>s.classList.toggle("clr-rtl",r.rtl));break;case"margin":e.margin*=1,r.margin=isNaN(e.margin)?r.margin:e.margin;break;case"wrap":e.el&&e.wrap&&K(e.el);break;case"formatToggle":r.formatToggle=!!e.formatToggle,h("clr-format").style.display=r.formatToggle?"block":"none",r.formatToggle&&(r.format="auto");break;case"swatches":if(Array.isArray(e.swatches)){const s=[];e.swatches.forEach((n,f)=>{s.push(`<button type="button" id="clr-swatch-${f}" aria-labelledby="clr-swatch-label clr-swatch-${f}" style="color: ${n};">${n}</button>`)}),h("clr-swatches").innerHTML=s.length?`<div>${s.join("")}</div>`:"",r.swatches=e.swatches.slice()}break;case"swatchesOnly":r.swatchesOnly=!!e.swatchesOnly,o.setAttribute("data-minimal",r.swatchesOnly);break;case"alpha":r.alpha=!!e.alpha,o.setAttribute("data-alpha",r.alpha);break;case"inline":if(r.inline=!!e.inline,o.setAttribute("data-inline",r.inline),r.inline){const s=e.defaultColor||r.defaultColor;D=ee(s),V(),G(s)}break;case"clearButton":typeof e.clearButton=="object"&&(e.clearButton.label&&(r.clearLabel=e.clearButton.label,I.innerHTML=r.clearLabel),e.clearButton=e.clearButton.show),r.clearButton=!!e.clearButton,I.style.display=r.clearButton?"block":"none";break;case"clearLabel":r.clearLabel=e.clearLabel,I.innerHTML=r.clearLabel;break;case"closeButton":r.closeButton=!!e.closeButton,r.closeButton?o.insertBefore(M,q):q.appendChild(M);break;case"closeLabel":r.closeLabel=e.closeLabel,M.innerHTML=r.closeLabel;break;case"a11y":const l=e.a11y;let a=!1;if(typeof l=="object")for(const s in l)l[s]&&r.a11y[s]&&(r.a11y[s]=l[s],a=!0);if(a){const s=h("clr-open-label"),n=h("clr-swatch-label");s.innerHTML=r.a11y.open,n.innerHTML=r.a11y.swatch,M.setAttribute("aria-label",r.a11y.close),I.setAttribute("aria-label",r.a11y.clear),O.setAttribute("aria-label",r.a11y.hueSlider),F.setAttribute("aria-label",r.a11y.alphaSlider),v.setAttribute("aria-label",r.a11y.input),g.setAttribute("aria-label",r.a11y.instruction)}break;default:r[t]=e[t]}}function oe(e,t){typeof e=="string"&&typeof t=="object"&&(N[e]=t,j=!0)}function ce(e){delete N[e],Object.keys(N).length===0&&(j=!1,e===Q&&Z())}function le(e){if(j){const t=["el","wrap","rtl","inline","defaultColor","a11y"];for(let l in N){const a=N[l];if(e.matches(l)){Q=l,R={},t.forEach(s=>delete a[s]);for(let s in a)R[s]=Array.isArray(r[s])?r[s].slice():r[s];Y(a);break}}}}function Z(){Object.keys(R).length>0&&(Y(R),Q="",R={})}function _(e){i(c,"click",e,t=>{r.inline||(le(t.target),u=t.target,A=u.value,D=ee(A),o.classList.add("clr-open"),V(),G(A),(r.focusInput||r.selectInput)&&(v.focus({preventScroll:!0}),v.setSelectionRange(u.selectionStart,u.selectionEnd)),r.selectInput&&v.select(),(J||r.swatchesOnly)&&ne().shift().focus(),u.dispatchEvent(new Event("open",{bubbles:!0})))}),i(c,"input",e,t=>{const l=t.target.parentNode;l.classList.contains("clr-field")&&(l.style.color=t.target.value)})}function V(){if(!o||!u&&!r.inline)return;const e=w,t=$.scrollY,l=o.offsetWidth,a=o.offsetHeight,s={left:!1,top:!1};let n,f,k,p={x:0,y:0};if(e&&(n=$.getComputedStyle(e),f=parseFloat(n.marginTop),k=parseFloat(n.borderTopWidth),p=e.getBoundingClientRect(),p.y+=k+t),!r.inline){const b=u.getBoundingClientRect();let S=b.x,T=t+b.y+b.height+r.margin;e?(S-=p.x,T-=p.y,S+l>e.clientWidth&&(S+=b.width-l,s.left=!0),T+a>e.clientHeight-f&&a+r.margin<=b.top-(p.y-t)&&(T-=b.height+a+r.margin*2,s.top=!0),T+=e.scrollTop):(S+l>c.documentElement.clientWidth&&(S+=b.width-l,s.left=!0),T+a-t>c.documentElement.clientHeight&&a+r.margin<=b.top&&(T=t+b.y-a-r.margin,s.top=!0)),o.classList.toggle("clr-left",s.left),o.classList.toggle("clr-top",s.top),o.style.left=`${S}px`,o.style.top=`${T}px`,p.x+=o.offsetLeft,p.y+=o.offsetTop}m={width:g.offsetWidth,height:g.offsetHeight,x:g.offsetLeft+p.x,y:g.offsetTop+p.y}}function K(e){c.querySelectorAll(e).forEach(t=>{const l=t.parentNode;if(!l.classList.contains("clr-field")){const a=c.createElement("div");let s="clr-field";(r.rtl||t.classList.contains("clr-rtl"))&&(s+=" clr-rtl"),a.innerHTML='<button type="button" aria-labelledby="clr-open-label"></button>',l.insertBefore(a,t),a.setAttribute("class",s),a.style.color=t.value,a.appendChild(t)}})}function P(e){if(u&&!r.inline){const t=u;e&&(u=L,A!==t.value&&(t.value=A,t.dispatchEvent(new Event("input",{bubbles:!0})))),setTimeout(()=>{A!==t.value&&t.dispatchEvent(new Event("change",{bubbles:!0}))}),o.classList.remove("clr-open"),j&&Z(),t.dispatchEvent(new Event("close",{bubbles:!0})),r.focusInput&&t.focus({preventScroll:!0}),u=L}}function G(e){const t=ye(e),l=be(t);ae(l.s,l.v),X(t,l),O.value=l.h,o.style.color=`hsl(${l.h}, 100%, 50%)`,z.style.left=`${l.h/360*100}%`,d.style.left=`${m.width*l.s/100}px`,d.style.top=`${m.height-m.height*l.v/100}px`,F.value=l.a*100,E.style.left=`${l.a*100}%`}function ee(e){const t=e.substring(0,3).toLowerCase();return t==="rgb"||t==="hsl"?t:"hex"}function x(e){e=e!==L?e:v.value,u&&(u.value=e,u.dispatchEvent(new Event("input",{bubbles:!0}))),r.onChange&&r.onChange.call($,e,u),c.dispatchEvent(new CustomEvent("coloris:pick",{detail:{color:e,currentEl:u}}))}function re(e,t){const l={h:O.value*1,s:e/m.width*100,v:100-t/m.height*100,a:F.value/100},a=de(l);ae(l.s,l.v),X(a,l),x()}function ae(e,t){let l=r.a11y.marker;e=e.toFixed(1)*1,t=t.toFixed(1)*1,l=l.replace("{s}",e),l=l.replace("{v}",t),d.setAttribute("aria-label",l)}function ie(e){return{pageX:e.changedTouches?e.changedTouches[0].pageX:e.pageX,pageY:e.changedTouches?e.changedTouches[0].pageY:e.pageY}}function B(e){const t=ie(e);let l=t.pageX-m.x,a=t.pageY-m.y;w&&(a+=w.scrollTop),se(l,a),e.preventDefault(),e.stopPropagation()}function fe(e,t){let l=d.style.left.replace("px","")*1+e,a=d.style.top.replace("px","")*1+t;se(l,a)}function se(e,t){e=e<0?0:e>m.width?m.width:e,t=t<0?0:t>m.height?m.height:t,d.style.left=`${e}px`,d.style.top=`${t}px`,re(e,t),d.focus()}function X(e,t){e===void 0&&(e={}),t===void 0&&(t={});let l=r.format;for(const n in e)H[n]=e[n];for(const n in t)H[n]=t[n];const a=ge(H),s=a.substring(0,7);switch(d.style.color=s,E.parentNode.style.color=s,E.style.color=a,q.style.color=a,g.style.display="none",g.offsetHeight,g.style.display="",E.nextElementSibling.style.display="none",E.nextElementSibling.offsetHeight,E.nextElementSibling.style.display="",l==="mixed"?l=H.a===1?"hex":"rgb":l==="auto"&&(l=D),l){case"hex":v.value=a;break;case"rgb":v.value=me(H);break;case"hsl":v.value=ve(he(H));break}c.querySelector(`.clr-format [value="${l}"]`).checked=!0}function ue(){const e=O.value*1,t=d.style.left.replace("px","")*1,l=d.style.top.replace("px","")*1;o.style.color=`hsl(${e}, 100%, 50%)`,z.style.left=`${e/360*100}%`,re(t,l)}function pe(){const e=F.value/100;E.style.left=`${e*100}%`,X({a:e}),x()}function de(e){const t=e.s/100,l=e.v/100;let a=t*l,s=e.h/60,n=a*(1-y.abs(s%2-1)),f=l-a;a=a+f,n=n+f;const k=y.floor(s)%6,p=[a,n,f,f,n,a][k],b=[n,a,a,n,f,f][k],S=[f,f,n,a,a,n][k];return{r:y.round(p*255),g:y.round(b*255),b:y.round(S*255),a:e.a}}function he(e){const t=e.v/100,l=t*(1-e.s/100/2);let a;return l>0&&l<1&&(a=y.round((t-l)/y.min(l,1-l)*100)),{h:e.h,s:a||0,l:y.round(l*100),a:e.a}}function be(e){const t=e.r/255,l=e.g/255,a=e.b/255,s=y.max(t,l,a),n=y.min(t,l,a),f=s-n,k=s;let p=0,b=0;return f&&(s===t&&(p=(l-a)/f),s===l&&(p=2+(a-t)/f),s===a&&(p=4+(t-l)/f),s&&(b=f/s)),p=y.floor(p*60),{h:p<0?p+360:p,s:y.round(b*100),v:y.round(k*100),a:e.a}}function ye(e){const t=/^((rgba)|rgb)[\D]+([\d.]+)[\D]+([\d.]+)[\D]+([\d.]+)[\D]*?([\d.]+|$)/i;let l,a;return W.fillStyle="#000",W.fillStyle=e,l=t.exec(W.fillStyle),l?(a={r:l[3]*1,g:l[4]*1,b:l[5]*1,a:l[6]*1},a.a=+a.a.toFixed(2)):(l=W.fillStyle.replace("#","").match(/.{2}/g).map(s=>parseInt(s,16)),a={r:l[0],g:l[1],b:l[2],a:1}),a}function ge(e){let t=e.r.toString(16),l=e.g.toString(16),a=e.b.toString(16),s="";if(e.r<16&&(t="0"+t),e.g<16&&(l="0"+l),e.b<16&&(a="0"+a),r.alpha&&(e.a<1||r.forceAlpha)){const n=e.a*255|0;s=n.toString(16),n<16&&(s="0"+s)}return"#"+t+l+a+s}function me(e){return!r.alpha||e.a===1&&!r.forceAlpha?`rgb(${e.r}, ${e.g}, ${e.b})`:`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`}function ve(e){return!r.alpha||e.a===1&&!r.forceAlpha?`hsl(${e.h}, ${e.s}%, ${e.l}%)`:`hsla(${e.h}, ${e.s}%, ${e.l}%, ${e.a})`}function ke(){c.getElementById("clr-picker")||(w=L,o=c.createElement("div"),o.setAttribute("id","clr-picker"),o.className="clr-picker",o.innerHTML=`<input id="clr-color-value" name="clr-color-value" class="clr-color" type="text" value="" spellcheck="false" aria-label="${r.a11y.input}"><div id="clr-color-area" class="clr-gradient" role="application" aria-label="${r.a11y.instruction}"><div id="clr-color-marker" class="clr-marker" tabindex="0"></div></div><div class="clr-hue"><input id="clr-hue-slider" name="clr-hue-slider" type="range" min="0" max="360" step="1" aria-label="${r.a11y.hueSlider}"><div id="clr-hue-marker"></div></div><div class="clr-alpha"><input id="clr-alpha-slider" name="clr-alpha-slider" type="range" min="0" max="100" step="1" aria-label="${r.a11y.alphaSlider}"><div id="clr-alpha-marker"></div><span></span></div><div id="clr-format" class="clr-format"><fieldset class="clr-segmented"><legend>${r.a11y.format}</legend><input id="clr-f1" type="radio" name="clr-format" value="hex"><label for="clr-f1">Hex</label><input id="clr-f2" type="radio" name="clr-format" value="rgb"><label for="clr-f2">RGB</label><input id="clr-f3" type="radio" name="clr-format" value="hsl"><label for="clr-f3">HSL</label><span></span></fieldset></div><div id="clr-swatches" class="clr-swatches"></div><button type="button" id="clr-clear" class="clr-clear" aria-label="${r.a11y.clear}">${r.clearLabel}</button><div id="clr-color-preview" class="clr-preview"><button type="button" id="clr-close" class="clr-close" aria-label="${r.a11y.close}">${r.closeLabel}</button></div><span id="clr-open-label" hidden>${r.a11y.open}</span><span id="clr-swatch-label" hidden>${r.a11y.swatch}</span>`,c.body.appendChild(o),g=h("clr-color-area"),d=h("clr-color-marker"),I=h("clr-clear"),M=h("clr-close"),q=h("clr-color-preview"),v=h("clr-color-value"),O=h("clr-hue-slider"),z=h("clr-hue-marker"),F=h("clr-alpha-slider"),E=h("clr-alpha-marker"),_(r.el),K(r.el),i(o,"mousedown",e=>{o.classList.remove("clr-keyboard-nav"),e.stopPropagation()}),i(g,"mousedown",e=>{i(c,"mousemove",B)}),i(g,"touchstart",e=>{c.addEventListener("touchmove",B,{passive:!1})}),i(d,"mousedown",e=>{i(c,"mousemove",B)}),i(d,"touchstart",e=>{c.addEventListener("touchmove",B,{passive:!1})}),i(v,"change",e=>{const t=v.value;if(u||r.inline){const l=t===""?t:G(t);x(l)}}),i(I,"click",e=>{x(""),P()}),i(M,"click",e=>{x(),P()}),i(h("clr-format"),"click",".clr-format input",e=>{D=e.target.value,X(),x()}),i(o,"click",".clr-swatches button",e=>{G(e.target.textContent),x(),r.swatchesOnly&&P()}),i(c,"mouseup",e=>{c.removeEventListener("mousemove",B)}),i(c,"touchend",e=>{c.removeEventListener("touchmove",B)}),i(c,"mousedown",e=>{J=!1,o.classList.remove("clr-keyboard-nav"),P()}),i(c,"keydown",e=>{const t=e.key,l=e.target,a=e.shiftKey;if(t==="Escape"?P(!0):["Tab","ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(t)&&(J=!0,o.classList.add("clr-keyboard-nav")),t==="Tab"&&l.matches(".clr-picker *")){const n=ne(),f=n.shift(),k=n.pop();a&&l===f?(k.focus(),e.preventDefault()):!a&&l===k&&(f.focus(),e.preventDefault())}}),i(c,"click",".clr-field button",e=>{j&&Z(),e.target.nextElementSibling.dispatchEvent(new Event("click",{bubbles:!0}))}),i(d,"keydown",e=>{const t={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0]};Object.keys(t).includes(e.key)&&(fe(...t[e.key]),e.preventDefault())}),i(g,"click",B),i(O,"input",ue),i(F,"input",pe))}function ne(){return Array.from(o.querySelectorAll("input, button")).filter(l=>!!l.offsetWidth)}function h(e){return c.getElementById(e)}function i(e,t,l,a){const s=Element.prototype.matches||Element.prototype.msMatchesSelector;typeof l=="string"?e.addEventListener(t,n=>{s.call(n.target,l)&&a.call(n.target,n)}):(a=l,e.addEventListener(t,a))}function U(e,t){t=t!==L?t:[],c.readyState!=="loading"?e(...t):c.addEventListener("DOMContentLoaded",()=>{e(...t)})}NodeList!==L&&NodeList.prototype&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);function we(e,t){u=t,A=u.value,le(t),D=ee(e),V(),G(e),x(),A!==e&&u.dispatchEvent(new Event("change",{bubbles:!0}))}const te=(()=>{const e={init:ke,set:Y,wrap:K,close:P,setInstance:oe,setColor:we,removeInstance:ce,updatePosition:V,ready:U};function t(l){U(()=>{l&&(typeof l=="string"?_(l):Y(l))})}for(const l in e)t[l]=function(){for(var a=arguments.length,s=new Array(a),n=0;n<a;n++)s[n]=arguments[n];U(e[l],s)};return U(()=>{$.addEventListener("resize",l=>{t.updatePosition()}),$.addEventListener("scroll",l=>{t.updatePosition()})}),t})();return te.coloris=te,te})(window,document,Math)})();C.coloris;C.init;C.set;C.wrap;C.close;C.setInstance;C.removeInstance;C.updatePosition;export{C};
