import{l as oe,b as s,i as X,H as ve,c as a,I as M,a as t,J as W,G as z,F as j,g as E,t as ge,f as c,d as ue,r as v,o as me,x as he,w as D,e as x,K as be,m as ye,n as re,p as R,z as ke,q as xe}from"./vue.esm-bundler-D6vGqgnf.js";import{_ as we}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{v as _e}from"./v-click-outside.umd-CFxmCgl1.js";import"./_commonjsHelpers-Cpj98o6Y.js";const Pe={emits:["pagination-change-page"],props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},keepLength:{type:Boolean,default:!1}},computed:{isApiResource(){return!!this.data.meta},currentPage(){var n;return this.isApiResource?this.data.meta.current_page:(n=this.data.current_page)!=null?n:null},firstPageUrl(){var n,r,o,d,f;return(f=(d=(r=this.data.first_page_url)!=null?r:(n=this.data.meta)==null?void 0:n.first_page_url)!=null?d:(o=this.data.links)==null?void 0:o.first)!=null?f:null},from(){var n;return this.isApiResource?this.data.meta.from:(n=this.data.from)!=null?n:null},lastPage(){var n;return this.isApiResource?this.data.meta.last_page:(n=this.data.last_page)!=null?n:null},lastPageUrl(){var n,r,o,d,f;return(f=(d=(r=this.data.last_page_url)!=null?r:(n=this.data.meta)==null?void 0:n.last_page_url)!=null?d:(o=this.data.links)==null?void 0:o.last)!=null?f:null},nextPageUrl(){var n,r,o,d,f;return(f=(d=(r=this.data.next_page_url)!=null?r:(n=this.data.meta)==null?void 0:n.next_page_url)!=null?d:(o=this.data.links)==null?void 0:o.next)!=null?f:null},perPage(){var n;return this.isApiResource?this.data.meta.per_page:(n=this.data.per_page)!=null?n:null},prevPageUrl(){var n,r,o,d,f;return(f=(d=(r=this.data.prev_page_url)!=null?r:(n=this.data.meta)==null?void 0:n.prev_page_url)!=null?d:(o=this.data.links)==null?void 0:o.prev)!=null?f:null},to(){var n;return this.isApiResource?this.data.meta.to:(n=this.data.to)!=null?n:null},total(){var n;return this.isApiResource?this.data.meta.total:(n=this.data.total)!=null?n:null},pageRange(){if(this.limit===-1)return 0;if(this.limit===0)return this.lastPage;for(var n=this.currentPage,r=this.keepLength,o=this.lastPage,d=this.limit,f=n-d,h=n+d,y=(d+2)*2,m=(d+2)*2-1,b=[],l=[],g,k=1;k<=o;k++)(k===1||k===o||k>=f&&k<=h||r&&k<y&&n<y-2||r&&k>o-m&&n>o-m+2)&&b.push(k);return b.forEach(function(w){g&&(w-g===2?l.push(g+1):w-g!==1&&l.push("...")),l.push(w),g=w}),l}},methods:{previousPage(){this.selectPage(this.currentPage-1)},nextPage(){this.selectPage(this.currentPage+1)},selectPage(n){n==="..."||n===this.currentPage||this.$emit("pagination-change-page",n)}},render(){return this.$slots.default({data:this.data,limit:this.limit,computed:{isApiResource:this.isApiResource,currentPage:this.currentPage,firstPageUrl:this.firstPageUrl,from:this.from,lastPage:this.lastPage,lastPageUrl:this.lastPageUrl,nextPageUrl:this.nextPageUrl,perPage:this.perPage,prevPageUrl:this.prevPageUrl,to:this.to,total:this.total,pageRange:this.pageRange},prevButtonEvents:{click:n=>{n.preventDefault(),this.previousPage()}},nextButtonEvents:{click:n=>{n.preventDefault(),this.nextPage()}},pageButtonEvents:n=>({click:r=>{r.preventDefault(),this.selectPage(n)}})})}},Le=(n,r)=>{const o=n.__vccOpts||n;for(const[d,f]of r)o[d]=f;return o},Ce={compatConfig:{MODE:3},inheritAttrs:!1,emits:["pagination-change-page"],components:{RenderlessPagination:Pe},props:{data:{type:Object,default:()=>{}},limit:{type:Number,default:0},keepLength:{type:Boolean,default:!1},itemClasses:{type:Array,default:()=>["bg-white","text-gray-500","border-gray-300","hover:bg-gray-50"]},activeClasses:{type:Array,default:()=>["bg-blue-50","border-blue-500","text-blue-600"]}},methods:{onPaginationChangePage(n){this.$emit("pagination-change-page",n)}}},Te=["disabled"],Me=t("span",{class:"sr-only"},"Previous",-1),He=t("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 19.5L8.25 12l7.5-7.5"})],-1),$e=["aria-current","disabled"],je=["disabled"],Ee=t("span",{class:"sr-only"},"Next",-1),Be=t("svg",{class:"w-5 h-5","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 4.5l7.5 7.5-7.5 7.5"})],-1);function Ue(n,r,o,d,f,h){const y=oe("RenderlessPagination");return s(),X(y,{data:o.data,limit:o.limit,"keep-length":o.keepLength,onPaginationChangePage:h.onPaginationChangePage},{default:ve(m=>[m.computed.total>m.computed.perPage?(s(),a("nav",M({key:0},n.$attrs,{class:"inline-flex -space-x-px rounded-md shadow-sm isolate ltr:flex-row rtl:flex-row-reverse","aria-label":"Pagination"}),[t("button",M({class:["relative inline-flex items-center px-2 py-2 text-sm font-medium border rounded-l-md focus:z-20 disabled:opacity-50",o.itemClasses],disabled:!m.computed.prevPageUrl},W(m.prevButtonEvents,!0)),[z(n.$slots,"prev-nav",{},()=>[Me,He])],16,Te),(s(!0),a(j,null,E(m.computed.pageRange,(b,l)=>(s(),a("button",M({class:["relative inline-flex items-center px-4 py-2 text-sm font-medium border focus:z-20",[b==m.computed.currentPage?o.activeClasses:o.itemClasses,b==m.computed.currentPage?"z-30":""]],"aria-current":m.computed.currentPage?"page":null,key:l},W(m.pageButtonEvents(b),!0),{disabled:b===m.computed.currentPage}),ge(b),17,$e))),128)),t("button",M({class:["relative inline-flex items-center px-2 py-2 text-sm font-medium border rounded-r-md focus:z-20 disabled:opacity-50",o.itemClasses],disabled:!m.computed.nextPageUrl},W(m.nextButtonEvents,!0)),[z(n.$slots,"next-nav",{},()=>[Ee,Be])],16,je)],16)):c("",!0)]),_:3},8,["data","limit","keep-length","onPaginationChangePage"])}const Ae=Le(Ce,[["render",Ue]]),Re={key:0,class:"flex flex-col gap-4 w-full"},De={class:"flex gap-2 justify-between items-center"},ze=["innerHTML"],Oe={key:1,class:"flex flex-col gap-4 w-full"},Se={class:"flex gap-2 justify-between items-center flex-wrap"},qe={class:"flex gap-1 items-center flex-wrap"},Fe=["innerHTML"],Ie={key:0,class:"bg-base-200 flex items-stretch gap-1 rounded-xl"},Ne=["aria-label","title"],Je=["title"],Ke=["aria-label"],Ve=["href"],Ge={key:1},Qe=["aria-label","title"],We=["innerHTML"],Xe=["innerHTML"],Ye=["innerHTML"],Ze={key:0,class:"flex gap-2 items-center"},et={key:0,class:"btn2"},tt={key:1,class:"dropdown"},nt=["title"],st={key:0,class:"dropdown-menu absolute mt-2 flex flex-col gap-1 bg-base-200 shadow p-2 rounded z-10",role:"menu",id:"templates-submenu"},at=["innerHTML"],lt=["innerHTML"],it=["innerHTML"],rt={key:2,class:"btn2"},ot=["title"],ut=["title"],dt={key:5,class:"join"},pt=["href"],ct=["innerHTML"],ft={key:0,class:"dropdown relative"},vt=["innerHTML"],gt={key:0,class:"dropdown-menu absolute mt-2 flex flex-col gap-1 right-0 bg-base-200 shadow p-2 rounded z-10",role:"menu",id:"templates-submenu"},mt=["href"],ht=["innerHTML"],bt={href:"https://docs.kanka.io/en/latest/guides/templates.html",class:"flex flex-no-wrap gap-2 px-2 py-1 items-center"},yt=["innerHTML"],kt={key:1,class:"flex gap-2 items-center"},xt={class:"join"},wt=["innerHTML"],_t=["innerHTML"],Pt={key:2,class:"dropdown relative"},Lt=["innerHTML"],Ct={key:0,class:"dropdown-menu absolute mt-2 flex flex-col gap-1 right-0 bg-base-200 shadow p-2 rounded z-10",role:"menu",id:"templates-submenu"},Tt=["innerHTML"],Mt=["innerHTML"],Ht=["innerHTML"],$t=["innerHTML"],jt=["innerHTML"],Et=["innerHTML"],Bt={class:"flex gap-1 items-start"},Ut={class:"entities-grid flex flex-wrap gap-3 lg:gap-5"},At=["href"],Rt={class:"block text-center p-4 h-12 bg-box"},Dt=["innerHTML"],zt={key:0,class:"flex items-center justify-end gap-1 h-12"},Ot={key:1,class:"flex items-center"},St=["innerHTML"],qt=["action"],Ft=["value"],It=["value"],Nt=ue({__name:"Explorer",props:{api:{},module:{}},setup(n){const r=n,o=v([]),d=v(),f=v(),h=v(),y=v(),m=v(),b=v(),l=v(),g=v({}),k=v(0),w=v(0),O=v(),Y=v(!0),S=v(!1),U=v(!1),q=v(!1),H=v(!1),L=v(!0),_=v(!1),Z=v([]),P=v(!1),u=v({}),ee=v(!1);me(()=>{fetch(r.api).then(i=>i.json()).then(i=>{ae(i),k.value=i.filters.unfilteredCount,w.value=i.filters.count,O.value=i.filters.urls,u.value=i.i18n,L.value=i.nested,d.value=i.parent,Z.value=i.templates,h.value=i.permissions,ee.value=i.bookmarkable,g.value=i.urls,m.value=i.entityType,le()})});const te=()=>{P.value=!P.value,o.value.forEach(i=>{i.selected=!1})},de=()=>{if(!o.value.length)return;const i=!o.value[0].selected;o.value.forEach(e=>{e.selected=i})},ne=()=>{window.openDialog("datagrid-filters",O.value.form)},C=i=>{let e=G();e.length!==0&&(i+="?entities[]="+e.join("&entities[]="),window.openDialog("primary-dialog",i))},se=()=>{H.value=!0;let i=r.api;L.value=!L.value,F(i+"?n="+(L.value?1:0));const e=new URL(window.location.href);e.searchParams.set("n",L.value?1:0),window.history.pushState({},"",e)},pe=async(i=1)=>{q.value=!0,F(`${r.api}?page=${i}`)},F=i=>{fetch(i).then(e=>e.json()).then(e=>{ae(e),le()})},ae=i=>{o.value=[],b.value=i.entities,i.entities.data.forEach(e=>{o.value.push(e)}),f.value=i.csrf,l.value=i.order},le=()=>{Y.value=!1,q.value=!1,H.value=!1,S.value=!1},I=i=>{console.log("order",i),S.value=!0;let e=r.api;e+="?order="+i,K(i)&&(e+="&desc=1"),F(e);const T=new URL(window.location.href);T.searchParams.set("order",i),K(i)?T.searchParams.set("desc","1"):T.searchParams.delete("desc"),window.history.pushState({},"",T)},N=i=>{let e="flex items-center gap-2 px-2";return A(i)?e+" font-extrabold":e},J=i=>K(i)?"fa-regular fa-arrow-down-z-a":"fa-solid fa-arrow-down-a-z",A=i=>l.value[i],K=i=>l.value[i]==="ASC";he(()=>{window.ajaxTooltip()});const V=()=>{_.value=!1,U.value=!1},ie=()=>{G().length!==0&&y.value.submit()},ce=()=>{window.openDialog("primary-dialog",g.value.bookmark)},fe=()=>{C(g.value.delete)},G=()=>{let i=[];return o.value.filter(e=>e.selected).forEach(e=>{i.push(e.id)}),i},$=()=>h.value;return(i,e)=>{const T=oe("entities-entity"),Q=ye("click-outside");return Y.value?(s(),a("div",Re,[t("div",De,[t("h1",{class:"grow text-3xl category-title truncate",innerHTML:r.module},null,8,ze),e[19]||(e[19]=t("div",{class:"flex gap-2 items-center"},[t("button",{class:"btn2 btn-disabled",disabled:"disabled"},[t("i",{class:"fa-solid fa-spinner fa-spin","aria-label":"Loading"})])],-1))]),e[20]||(e[20]=t("div",{class:"flex gap-2 items-start"},[t("div",{class:"rounded shadow-sm w-[47%] xs:w-[25%] sm:w-48 aspect-square flex items-center justify-center text-xl text-neutral-content"},[t("i",{class:"fa-solid fa-spinner fa-spin","aria-label":"Loading"})])],-1))])):(s(),a("div",Oe,[t("div",Se,[t("div",qe,[t("h1",{class:"grow text-3xl category-title truncate",innerHTML:r.module},null,8,Fe),w.value>0?(s(),a("div",Ie,[t("div",{class:"flex items-center rounded-xl gap-2 hover:bg-base-300 px-2 py-2 cursor-pointer","aria-label":u.value.filters,title:u.value.filters,onClick:ne},e[21]||(e[21]=[t("i",{class:"fa-regular fa-filter hover:bg-base-300","aria-label":"Filter"},null,-1),t("span",{class:"rounded bg-primary text-primary-content px-2 text-sm"},"1",-1)]),8,Ne),ee.value?(s(),a("div",{key:0,class:"flex items-center justify-center rounded-xl gap-2 hover:bg-base-300 px-3 py-2 cursor-pointer hover:text-primary",title:u.value.bookmark,onClick:ce},[t("i",{class:"fa-regular fa-bookmark","aria-label":u.value.bookmark},null,8,Ke)],8,Je)):c("",!0),e[23]||(e[23]=t("div",{class:"w-0 h-auto my-2 border-base-content border-l"},null,-1)),t("a",{class:"flex items-center rounded-xl gap-2 hover:bg-base-300 px-2 py-2 text-base-content hover:text-primary",href:O.value.clear},e[22]||(e[22]=[t("i",{class:"fa-regular fa-eraser","aria-label":"Clear"},null,-1)]),8,Ve)])):(s(),a("div",Ge,[t("i",{class:"fa-regular fa-filter text-lg rounded hover:text-primary-content cursor-pointer px-2 py-1 hover:bg-primary","aria-label":u.value.filters,title:u.value.filters,onClick:ne},null,8,Qe)])),$()&&!P.value?(s(),a("button",{key:2,onClick:e[0]||(e[0]=p=>te()),class:"rounded rounded-full border-primary text-primary border px-3 py-1 text-xs uppercase hover:bg-primary hover:text-primary-content",innerHTML:u.value.select},null,8,We)):c("",!0),$()&&P.value?(s(),a("button",{key:3,onClick:e[1]||(e[1]=p=>te()),class:"rounded rounded-full bg-primary text-primary-content px-3 py-1 text-xs uppercase",innerHTML:u.value.done},null,8,Xe)):c("",!0),$()&&P.value?(s(),a("button",{key:4,onClick:e[2]||(e[2]=p=>de()),class:"rounded rounded-full border-primary text-primary border px-3 py-1 text-xs uppercase hover:bg-primary hover:text-primary-content",innerHTML:u.value.selectAll},null,8,Ye)):c("",!0)]),P.value?(s(),a("div",kt,[t("div",xt,[h.value.admin?(s(),a("button",{key:0,class:"btn2 btn-primary join-item btn-bulk-batch",onClick:e[10]||(e[10]=p=>C(g.value.batch))},[e[34]||(e[34]=t("i",{class:"fa-regular fa-pencil","aria-hidden":"true"},null,-1)),t("span",{class:"hidden md:inline",innerHTML:u.value.bulkEdit},null,8,wt)])):(s(),a("button",{key:1,class:"btn2 join-item btn-primary",onClick:e[11]||(e[11]=p=>ie())},[e[35]||(e[35]=t("i",{class:"fa-regular fa-print","aria-hidden":"true"},null,-1)),t("span",{class:"hidden md:inline",innerHTML:u.value.bulkPrint},null,8,_t)])),$()?(s(),a("div",Pt,[t("button",{type:"button",class:"btn2 btn-primary join-item","aria-expanded":"false","aria-label":"Create from template","aria-haspopup":"menu","aria-controls":"templates-submenu",onClick:e[12]||(e[12]=p=>_.value=!_.value)},[e[36]||(e[36]=t("i",{class:"fa-solid fa-caret-down","aria-hidden":"true"},null,-1)),t("span",{class:"sr-only",innerHTML:u.value.actions},null,8,Lt)]),_.value?D((s(),a("div",Ct,[h.value.admin?(s(),a("button",{key:0,onClick:e[13]||(e[13]=p=>C(g.value.permissions)),class:"flex items-center gap-2 px-2 py-1 cursor-pointer text-nowrap hover:text-primary"},[e[37]||(e[37]=t("i",{class:"fa-regular fa-lock","aria-hidden":"true"},null,-1)),t("span",{innerHTML:u.value.bulkPermissions},null,8,Tt)])):c("",!0),h.value.admin?(s(),a("button",{key:1,onClick:e[14]||(e[14]=p=>C(g.value.transform)),class:"flex items-center gap-2 px-2 py-1 cursor-pointer text-nowrap hover:text-primary"},[e[38]||(e[38]=t("i",{class:"fa-regular fa-exchange-alt","aria-hidden":"true"},null,-1)),t("span",{innerHTML:u.value.bulkTransform},null,8,Mt)])):c("",!0),t("button",{onClick:e[15]||(e[15]=p=>C(g.value.copy)),class:"flex items-center gap-2 px-2 py-1 cursor-pointer text-nowrap hover:text-primary"},[e[39]||(e[39]=t("i",{class:"fa-regular fa-clone","aria-hidden":"true"},null,-1)),t("span",{innerHTML:u.value.bulkCopy},null,8,Ht)]),h.value.admin?(s(),a("button",{key:2,onClick:e[16]||(e[16]=p=>C(g.value.template)),class:"flex items-center gap-2 px-2 py-1 cursor-pointer text-nowrap hover:text-primary"},[e[40]||(e[40]=t("i",{class:"fa-regular fa-table","aria-hidden":"true"},null,-1)),t("span",{innerHTML:u.value.bulkTemplate},null,8,$t)])):c("",!0),h.value.admin?(s(),a("button",{key:3,onClick:e[17]||(e[17]=p=>ie()),class:"flex items-center gap-2 px-2 py-1 cursor-pointer text-nowrap hover:text-primary"},[e[41]||(e[41]=t("i",{class:"fa-regular fa-print","aria-hidden":"true"},null,-1)),t("span",{innerHTML:u.value.bulkPrint},null,8,jt)])):c("",!0),h.value.delete?(s(),a("button",{key:4,onClick:e[18]||(e[18]=p=>fe()),class:"flex items-center gap-2 px-2 py-1 cursor-pointer text-error hover:bg-error hover:text-error-content rounded"},[e[42]||(e[42]=t("i",{class:"fa-regular fa-trash","aria-hidden":"true"},null,-1)),t("span",{innerHTML:u.value.bulkDelete},null,8,Et)])):c("",!0)])),[[Q,V]]):c("",!0)])):c("",!0)])])):(s(),a("div",Ze,[S.value?(s(),a("button",et,e[24]||(e[24]=[t("i",{class:"fa-solid fa-spinner fa-spin","aria-label":"Loading"},null,-1)]))):(s(),a("div",tt,[t("button",{onClick:e[3]||(e[3]=p=>U.value=!U.value),class:"btn2",title:u.value.order},e[25]||(e[25]=[t("i",{class:"fa-solid fa-arrow-down-a-z","aria-hidden":"true"},null,-1)]),8,nt),U.value?D((s(),a("div",st,[t("button",{onClick:e[4]||(e[4]=p=>I("name")),class:x(N("name"))},[A("name")?(s(),a("i",{key:0,class:x(J("name"))},null,2)):c("",!0),t("span",{innerHTML:u.value.fields.name},null,8,at)],2),t("button",{onClick:e[5]||(e[5]=p=>I("type")),class:x(N("type"))},[A("type")?(s(),a("i",{key:0,class:x(J("type"))},null,2)):c("",!0),t("span",{innerHTML:u.value.fields.type},null,8,lt)],2),t("button",{onClick:e[6]||(e[6]=p=>I("is_private")),class:x(N("is_private"))},[A("is_private")?(s(),a("i",{key:0,class:x(J("is_private"))},null,2)):c("",!0),t("span",{innerHTML:u.value.fields.is_private},null,8,it)],2)])),[[Q,V]]):c("",!0)])),H.value?(s(),a("button",rt,e[26]||(e[26]=[t("i",{class:"fa-solid fa-spinner fa-spin","aria-label":"Loading"},null,-1)]))):c("",!0),L.value&&!H.value?(s(),a("button",{key:3,onClick:e[7]||(e[7]=p=>se()),class:"btn2",title:u.value.flatten},e[27]||(e[27]=[t("i",{class:"fa-solid fa-layer-group","aria-hidden":"true"},null,-1)]),8,ot)):H.value?c("",!0):(s(),a("button",{key:4,onClick:e[8]||(e[8]=p=>se()),class:"btn2",title:u.value.nest},e[28]||(e[28]=[t("i",{class:"fa-solid fa-boxes-stacked","aria-hidden":"true"},null,-1)]),8,ut)),$()&&h.value.create?(s(),a("div",dt,[t("a",{href:g.value.create,class:"btn2 btn-primary join-item btn-new-entity"},[e[29]||(e[29]=t("i",{class:"fa-regular fa-plus","aria-hidden":"true"},null,-1)),t("span",{class:"hidden md:inline",innerHTML:m.value.singular},null,8,ct)],8,pt),h.value.template?(s(),a("div",ft,[t("button",{type:"button",class:"btn2 btn-primary join-item","aria-expanded":"false","aria-label":"Create from template","aria-haspopup":"menu","aria-controls":"templates-submenu",onClick:e[9]||(e[9]=p=>_.value=!_.value)},[e[30]||(e[30]=t("i",{class:"fa-solid fa-caret-down","aria-hidden":"true"},null,-1)),t("span",{class:"sr-only",innerHTML:u.value.actions},null,8,vt)]),_.value?D((s(),a("div",gt,[(s(!0),a(j,null,E(Z.value,p=>(s(),a("a",{href:p.url,key:p.id,class:"new-entity-from-template text-base-content flex items-center gap-2 px-2 py-1"},[e[31]||(e[31]=t("i",{class:"fa-solid fa-star","aria-hidden":"true"},null,-1)),t("span",{innerHTML:p.name},null,8,ht)],8,mt))),128)),e[33]||(e[33]=t("hr",{class:"m-0"},null,-1)),t("a",bt,[e[32]||(e[32]=t("i",{class:"fa-solid fa-external-link","aria-hidden":"true"},null,-1)),t("span",{class:"text-nowrap",innerHTML:u.value.templates},null,8,yt)])])),[[Q,V]]):c("",!0)])):c("",!0)])):c("",!0)]))]),t("div",Bt,[t("div",Ut,[d.value?(s(),a("a",{key:0,href:d.value.urls.parent,class:"entity w-[47%] xs:w-[25%] sm:w-48 overflow-hidden rounded flex flex-col shadow-sm hover:shadow-md sm"},[e[43]||(e[43]=t("div",{class:"w-46 flex items-center justify-center grow text-6xl"},[t("i",{class:"fa-solid fa-arrow-left","aria-hidden":"true"})],-1)),t("div",Rt,[t("span",{innerHTML:d.value.links.back},null,8,Dt)])],8,At)):c("",!0),(s(!0),a(j,null,E(o.value,p=>(s(),X(T,{key:p.id,entity:p,"is-parent":!1,i18n:u.value,selecting:P.value},null,8,["entity","i18n","selecting"]))),128))])]),(s(),a("div",zt,[q.value?(s(),a("div",Ot,e[44]||(e[44]=[t("i",{class:"fa-solid fa-spinner fa-spin","aria-label":"Loading"},null,-1)]))):(s(),X(be(Ae),{key:0,data:b.value,itemClasses:["bg-base-200","text-base-content","border-none","hover:bg-base-300"],activeClasses:["bg-base-100","border-none","text-base-content"],onPaginationChangePage:pe},null,8,["data"]))])),o.value.length===0?(s(),a("p",{key:1,class:"help-text italic",innerHTML:u.value.noResults},null,8,St)):c("",!0),t("form",{method:"POST",action:g.value.print,ref_key:"printForm",ref:y},[(s(!0),a(j,null,E(G(),p=>(s(),a("input",{type:"hidden",name:"model[]",value:p},null,8,Ft))),256)),t("input",{type:"hidden",name:"_token",value:f.value},null,8,It)],8,qt)]))}}}),Jt=["data-stack"],Kt=["href","title"],Vt=["title"],Gt=["aria-label"],Qt={key:0,class:"fa-regular fa-check","aria-label":"selected"},Wt=["href","data-id","data-url","innerHTML"],Xt=["data-stack"],Yt=["href","title"],Zt=["title"],en=["aria-label"],tn={key:0,class:"fa-regular fa-check","aria-label":"selected"},nn=["href","data-id","data-url","innerHTML"],sn=ue({__name:"Entity",props:{entity:{},isParent:{type:Boolean},selecting:{type:Boolean},i18n:{}},setup(n){const r=n,o=()=>{let l="entity overflow-hidden rounded shadow-sm hover:shadow-md w-[47%] xs:w-[25%] sm:w-48 aspect-square flex flex-col bg-box";return r.isParent&&(l+="shadow-lg stacking-parent font-bold"),l},d=()=>({backgroundImage:"url("+r.entity.images.thumb+")"}),f=()=>{let l={};return l["data-entity"]=r.entity.id,l["data-entity-type"]=r.entity.entityType.code,l["data-type"]=r.entity.type,r.entity.attributes.forEach(g=>{l[`data-${g}`]=!0}),l},h=()=>r.entity.children>0,y=l=>{r.selecting?m():window.location.href=l.target.href},m=()=>{r.entity.selected=!r.entity.selected},b=()=>{let l="rounded rounded-full opacity-80 h-6 w-6 absolute left-1.5 top-1.5 border border-primary flex items-center justify-center text-xl";return r.entity.selected?l+" bg-primary text-primary-content":l+" bg-base-100 "};return(l,g)=>h()?(s(),a("div",{key:0,class:"stack inline-grid items-center align-items-end w-[47%] xs:w-[25%] sm:w-48","data-stack":l.entity.children},[t("div",M({class:"entity overflow-hidden rounded shadow-sm hover:shadow-md aspect-square w-full flex flex-col bg-box"},f()),[t("a",{href:l.entity.urls.children,title:l.entity.name,class:"block avatar grow relative cover-background overflow-hidden text-center",style:re(d()),onClick:R(y,["prevent"])},[l.entity.is_private&&!l.selecting?(s(),a("div",{key:0,class:"bubble-private absolute left-1.5 top-1.5 text-xs shadow-xs flex justify-center align-items-center items-center aspect-square rounded-full w-6 h-6 bg-box opacity-80 text-base-content",title:l.i18n.is_private},[t("i",{class:"fa-regular fa-lock","aria-label":l.i18n.is_private},null,8,Gt)],8,Vt)):l.selecting?(s(),a("div",{key:1,class:x(b())},[l.entity.selected?(s(),a("i",Qt)):c("",!0)],2)):c("",!0)],12,Kt),t("a",{href:l.entity.urls.show,class:"block text-center relative truncate h-12 p-4","data-toggle":"tooltip-ajax","data-id":l.entity.id,"data-url":l.entity.urls.tooltip,innerHTML:l.entity.name,onClick:R(y,["prevent"])},null,8,Wt)],16),(s(!0),a(j,null,E(l.entity.children,k=>(s(),a("div",{class:"entity entity-stack bg-base-300 w-full overflow-hidden rounded aspect-square flex flex-col shadow-sm",title:"{{ __('datagrids.tooltips.nested') }}","data-stack":k},g[0]||(g[0]=[t("div",{class:"block grow"},null,-1),t("div",{class:"block h-12 p-4 bg-box"},null,-1)]),8,Xt))),256))],8,Jt)):(s(),a("div",M({key:1,class:o()},f()),[t("a",{href:l.entity.urls.show,class:"block avatar grow relative cover-background",style:re(d()),title:l.entity.name,onClick:R(y,["prevent"])},[l.entity.is_private&&!l.selecting?(s(),a("div",{key:0,class:"bubble-private absolute left-1.5 top-1.5 text-xs shadow-xs flex justify-center align-items-center items-center aspect-square rounded-full w-6 h-6 bg-box opacity-80 text-base-content",title:l.i18n.is_private},[t("i",{class:"fa-regular fa-lock","aria-label":l.i18n.is_private},null,8,en)],8,Zt)):l.selecting?(s(),a("div",{key:1,class:x(b())},[l.entity.selected?(s(),a("i",tn)):c("",!0)],2)):c("",!0)],12,Yt),t("a",{href:l.entity.urls.show,class:"block text-center relative truncate h-12 p-4","data-toggle":"tooltip-ajax","data-id":l.entity.id,"data-url":l.entity.urls.tooltip,innerHTML:l.entity.name,onClick:R(y,["prevent"])},null,8,nn)],16))}}),an={data(){return{open:!1}},methods:{handleClickOutside(){this.open&&(this.open=!1)}}},ln=["do"],rn={class:"relative mx-auto"},on={class:"absolute pin-l mt-px"};function un(n,r,o,d,f,h){return s(),a("div",{do:h.handleClickOutside},[t("div",rn,[t("div",{role:"button",class:"inline-block select-none",onClick:r[0]||(r[0]=y=>f.open=!f.open)},[z(n.$slots,"link")]),D(t("div",on,[z(n.$slots,"dropdown")],512),[[ke,f.open]])])],8,ln)}const dn=we(an,[["render",un]]),B=xe({});B.component("entities-explorer",Nt);B.component("entities-entity",sn);B.component("dropdown",dn);B.use(_e);B.mount("#entities-explorer");
