import{d as f,r as b,b as i,c as s,a as t,n as v,f as n,F as g,g as m,e as _,i as k,o as x,x as L,q as M}from"./vue.esm-bundler-Dgt_CrCE.js";const H=["data-tags"],w={class:"ability-box p-4 rounded bg-box shadow-xs flex flex-col md:flex-row items-center md:items-start gap-2 md:gap-4"},$={key:0,class:""},C=["href"],A={class:"flex flex-col gap-4 w-full"},B={class:"flex gap-2 md:gap-4 items-center w-full"},I={class:"flex gap-2 items-center text-xl grow"},j=["href","innerHTML"],N=["title"],z=["title"],E=["title"],F=["title"],V=["title"],q=["innerHTML"],D={key:1,class:""},P=["title"],S=["innerHTML"],U={key:0,class:"visible md:hidden"},G=["innerHTML"],J=["innerHTML"],K={key:2,class:"flex gap-2 items-center ability-tags"},O=["href","data-url","innerHTML"],Q=["innerHTML"],R={key:4,class:"flex gap-2 md:gap-4 ability-charges w-full items-end"},W={class:"flex gap-1 flex-wrap grow"},X=["onClick"],Y=["innerHTML"],Z={class:"flex-none"},ee=["innerHTML"],ie=["innerHTML"],se=f({__name:"Ability",props:{ability:{},permission:{}},setup(h){b(!1);const r=h,d=()=>r.ability.images.thumb?{backgroundImage:"url("+r.ability.images.thumb+")"}:{},c=e=>{window.openDialog("abilities-dialog",e.actions.edit)},p=()=>r.ability.charges-r.ability.used_charges,a=()=>r.ability.i18n.left.replace(/:amount/,""),y=e=>{let l="rounded-xl bg-base-200 text-xs py-1 px-3 text-base-content";return l+=" "+e.class},u=(e,l)=>{l>e.used_charges?e.used_charges+=1:e.used_charges-=1,axios.post(e.actions.use,{used:e.used_charges}).then(o=>{o.data.success||(e.used_charges-=1)}).catch(()=>{e.used_charges-=1})};return(e,l)=>(i(),s("div",{class:"ability","data-tags":e.ability.class},[t("div",w,[e.ability.images.has?(i(),s("div",$,[t("a",{class:"ability-image rounded-xl block w-40 h-40 cover-background",href:e.ability.images.url,style:v(d())},null,12,C)])):n("",!0),t("div",A,[t("div",B,[t("div",I,[t("a",{href:e.ability.actions.view,class:"ability-name text-2xl",innerHTML:e.ability.name},null,8,j),e.ability.visibility_id===2?(i(),s("i",{key:0,class:"fa-solid fa-lock",title:e.ability.visibility},null,8,N)):n("",!0),e.ability.visibility_id===3?(i(),s("i",{key:1,class:"fa-solid fa-user-lock",title:e.ability.visibility},null,8,z)):n("",!0),e.ability.visibility_id===5?(i(),s("i",{key:2,class:"fa-solid fa-users",title:e.ability.visibility},null,8,E)):n("",!0),e.ability.visibility_id===4?(i(),s("i",{key:3,class:"fa-solid fa-user-secret",title:e.ability.visibility},null,8,F)):n("",!0),e.ability.visibility_id===1?(i(),s("i",{key:4,class:"fa-solid fa-eye",title:e.ability.visibility},null,8,V)):n("",!0)]),e.ability.type?(i(),s("div",{key:0,class:"hidden md:inline bg-base-200 p-2 rounded-xl flex-none",innerHTML:e.ability.type},null,8,q)):n("",!0),e.permission?(i(),s("div",D,[(i(),s("a",{key:0,role:"button",onClick:l[0]||(l[0]=o=>c(e.ability)),class:"btn2 btn-ghost btn-sm",title:e.ability.i18n.edit},[l[1]||(l[1]=t("i",{class:"fa-solid fa-pencil text-xl","aria-hidden":"true"},null,-1)),t("span",{class:"sr-only",innerHTML:e.ability.i18n.edit},null,8,S)],8,P))])):n("",!0)]),e.ability.type?(i(),s("div",U,[t("div",{class:"inline-block bg-base-200 p-2 rounded-xl",innerHTML:e.ability.type},null,8,G)])):n("",!0),e.ability.entry?(i(),s("div",{key:1,class:"entity-content",innerHTML:e.ability.entry},null,8,J)):n("",!0),e.ability.tags?(i(),s("div",K,[(i(!0),s(g,null,m(e.ability.tags,o=>(i(),s("a",{class:_(y(o)),href:o.url,"data-toggle":"tooltip-ajax","data-url":o.tooltip,innerHTML:o.name},null,10,O))),256))])):n("",!0),e.ability.note?(i(),s("div",{key:3,class:"entity-content",innerHTML:e.ability.note},null,8,Q)):n("",!0),e.ability.charges&&e.permission?(i(),s("div",R,[t("div",W,[(i(!0),s(g,null,m(e.ability.charges,o=>(i(),s("div",{class:_(["charge cursor-pointer rounded-full p-2 hover:bg-accent hover:text-accent-content w-8 h-8 flex items-center justify-center",{"bg-base-200 charge-used":e.ability.used_charges>=o}]),onClick:ke=>u(e.ability,o)},[t("span",{innerHTML:o},null,8,Y)],10,X))),256))]),t("div",Z,[t("span",{class:"text-2xl",innerHTML:p()},null,8,ee),t("span",{innerHTML:a()},null,8,ie)])])):n("",!0)])])],8,H))}}),te={class:"ability-parent flex flex-col gap-5 w-full"},ne={class:"parent-head flex gap-2 md:gap-5 items-center"},ae={class:"flex flex-col gap-1 grow overflow-hidden"},le={key:0},oe=["href","innerHTML"],re=["innerHTML"],de=["innerHTML"],ue={class:"flex-none self-end"},ce={key:0,"aria-hidden":"true",class:"fa-thin fa-chevron-circle-up fa-2x"},pe={key:1,"aria-hidden":"true",class:"fa-thin fa-chevron-circle-down fa-2x"},ye={key:2,class:"sr-only"},be={key:3,class:"sr-only"},he={key:0,class:"parent-abilities flex flex-col gap-5"},ge=f({__name:"Parent",props:{group:{},permission:{},meta:{}},setup(h){const r=h,d=b(!1),c=()=>r.group.has_image?{backgroundImage:"url("+r.group.image+")"}:{},p=a=>{d.value=!d.value};return(a,y)=>(i(),s("div",te,[t("div",ne,[a.group.has_image?(i(),s("div",{key:0,class:"parent-image rounded-full w-12 h-12 md:w-16 md:h-16 cover-background flex-none",style:v(c())},null,4)):n("",!0),t("div",ae,[a.group.url?(i(),s("div",le,[t("a",{href:a.group.url,innerHTML:a.group.name,class:"parent-name text-xl md:text-2xl"},null,8,oe)])):(i(),s("span",{key:1,class:"parent-name text-xl md:text-2xl",innerHTML:a.group.name},null,8,re)),t("p",{class:"md:text-lg truncate",innerHTML:a.group.type},null,8,de)]),t("div",ue,[t("span",{role:"button",onClick:y[0]||(y[0]=u=>p(a.group)),class:"cursor-pointer inline-block"},[d.value?(i(),s("i",pe)):(i(),s("i",ce)),d.value?(i(),s("span",be,"Collapse section")):(i(),s("span",ye,"Expand section"))])])]),d.value?n("",!0):(i(),s("div",he,[(i(!0),s(g,null,m(a.group.abilities,u=>(i(),k(se,{key:u.id,ability:u,permission:a.permission,meta:a.meta},null,8,["ability","permission","meta"]))),128))]))]))}}),me={class:"viewport box-abilities relative flex flex-col gap-5"},fe={key:0,class:"load more text-center text-2xl"},_e={class:"flex gap-5 flex-wrap"},ve=f({__name:"Abilities",props:{id:{},api:{},permission:{}},setup(h){const r=h,d=b([]),c=b([]),p=b(!0),a=b(!0),y=()=>{axios.get(r.api).then(u=>{d.value=u.data.data.groups,c.value=u.data.data.meta,p.value=!1,a.value=!1})};return x(()=>{y()}),L(()=>{window.ajaxTooltip()}),(u,e)=>(i(),s("div",me,[p.value?(i(),s("div",fe,e[0]||(e[0]=[t("i",{class:"fa-solid fa-spin fa-spinner","aria-hidden":"true"},null,-1)]))):n("",!0),t("div",_e,[(i(!0),s(g,null,m(d.value,l=>(i(),k(ge,{key:l.id,group:l,permission:u.permission,meta:c.value},null,8,["group","permission","meta"]))),128))])]))}}),T=M({});T.component("abilities",ve);T.mount("#abilities");
