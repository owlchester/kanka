import{S as r}from"./sortable.esm-89cfb839.js";const c=new IntersectionObserver(function(e){e.forEach(t=>{t.isIntersecting&&e.forEach(n=>{g(n.target)})})},{threshold:[0]}),u=()=>{if(!document.querySelector(".campaign-dashboard-widgets"))return;let e=document.getElementById("widgets");new r(e,{handle:".handle",onEnd:function(t){const n=document.getElementById("widgets").dataset.url;let o="";document.querySelectorAll('input[name="widgets[]"]').forEach(d=>{o+=`${d.name}=${encodeURIComponent(d.value)}&`}),axios.post(n,o).then(d=>{d.data.success&&d.data.message&&window.showToast(d.data.message)})}}),window.onEvent(function(){document.getElementById("summernote-config")&&window.initSummernote(),document.querySelectorAll('[data-img="delete"]').forEach(o=>{o.addEventListener("click",function(a){a.preventDefault(),document.querySelector("input[name="+o.dataset.target+"]").value=1,o.closest(".preview").classList.add("hidden")})})})},i=()=>{const e=document.querySelectorAll(".widget-calendar-switch");e.length!==0&&e.forEach(t=>{t.addEventListener("click",n=>{n.preventDefault();const o=t.dataset.url,a=t.dataset.widget;document.querySelector("#widget-body-"+a).classList.add("hidden"),document.querySelector("#widget-loading-"+a).classList.remove("hidden"),axios.post(o).then(d=>{l(a,d.data)})})})},m=()=>{const e=document.querySelector("#campaign-follow"),t=document.querySelector("#campaign-follow-text");if(!e)return;e.dataset.following?t.innerHTML=e.dataset.unfollow:t.innerHTML=e.dataset.follow,e.classList.remove("hidden"),e.addEventListener("click",function(o){e.classList.add("loading"),o.preventDefault(),axios.post(e.dataset.url).then(a=>{e.classList.remove("loading"),a.data.following?t.innerHTML=e.dataset.unfollow:t.innerHTML=e.dataset.follow})})},g=e=>{axios.get(e.dataset.render).then(t=>{let n=e.dataset.id;l(n,t.data)})},l=(e,t)=>{document.querySelector("#widget-loading-"+e).classList.add("hidden"),document.querySelector("#widget-body-"+e).innerHTML=t,document.querySelector("#widget-body-"+e).classList.remove("hidden"),window.triggerEvent(),i()},f=()=>{document.querySelectorAll("[data-pulse]").forEach(e=>{e.addEventListener("click",h)})},h=e=>{e.preventDefault();let t=document.querySelector(globalThis.dataset.pulse),n=globalThis.dataset.content;window.showTooltip(t,{content:n,theme:"kanka",placement:"bottom",allowHTML:!0,arrow:!0,interactive:!0,trigger:"manual"})},w=()=>{document.querySelectorAll(".preview-switch").forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();let n=document.querySelector("#widget-preview-body-"+e.dataset.widget);n.classList.contains("max-h-52")?(n.classList.remove("max-h-52"),e.innerHTML='<i class="fa-solid fa-chevron-up" aria-hidden="true"></i>',e.parentNode.querySelector(".gradient-to-base-100").classList.add("hidden")):(n.classList.add("max-h-52"),e.innerHTML='<i class="fa-solid fa-chevron-down" aria-hidden="true"></i>',e.parentNode.querySelector(".gradient-to-base-100").classList.remove("hidden"))})})};i();m();f();w();u();var s;(s=document.querySelectorAll("[data-render]"))==null||s.forEach(e=>{c.observe(e)});
