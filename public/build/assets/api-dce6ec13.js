import{c as r,a as e,e as c,F as u,r as h,w as y,j as f,v as b,k as g,f as k,b as i,t as d,x as w,y as M,p as T}from"./vue.esm-bundler-8de02e4e.js";import{_ as x}from"./_plugin-vue_export-helper-c27b6911.js";const F={data(){return{clients:[],confirmClient:null,createForm:{errors:[],name:"",redirect:""},editForm:{errors:[],name:"",redirect:""}}},ready(){this.prepareComponent()},mounted(){this.prepareComponent()},methods:{prepareComponent(){this.getClients()},getClients(){axios.get("/oauth/clients").then(o=>{this.clients=o.data})},showCreateClientForm(){this.openModal("createModal"),this.$refs.createName.focus()},store(){this.persistClient("post","/oauth/clients",this.createForm,"createModal")},edit(o){this.editForm.id=o.id,this.editForm.name=o.name,this.editForm.redirect=o.redirect,this.openModal("editModal"),this.$refs.editName.focus()},update(){this.persistClient("put","/oauth/clients/"+this.editForm.id,this.editForm,"editModal")},persistClient(o,t,a,m){a.errors=[],axios[o](t,a).then(n=>{this.getClients(),a.name="",a.redirect="",a.errors=[],this.closeModal(m)}).catch(n=>{typeof n.response.data=="object"?a.errors=_.flatten(_.toArray(n.response.data.errors)):a.errors=["Something went wrong. Please try again."]})},destroy(o){axios.delete("/oauth/clients/"+o.id).then(t=>{this.getClients(),window.showToast("OAuth client deleted succesfully.")})},openModal(o){this.$refs[o].showModal(),this.$refs[o].addEventListener("click",function(t){let a=this.getBoundingClientRect();!(a.top<=t.clientY&&t.clientY<=a.top+a.height&&a.left<=t.clientX&&t.clientX<=a.left+a.width)&&t.target.tagName==="DIALOG"&&this.close()})},closeModal(o){this.$refs[o].close()},deleteConfirm(o){if(this.confirmClient&&o.id===this.confirmClient.id)return this.destroy(o);this.confirmClient=o}}},A={class:"card card-default"},S={class:"card-header"},N={class:"flex justify-between items-center"},$=e("span",{class:"text-lg"}," OAuth Clients ",-1),I={class:"card-body"},j={key:0,class:"mb-0"},D={key:1,class:"table table-borderless mb-0"},L=e("thead",null,[e("tr",null,[e("th",null,"Client ID"),e("th",null,"Name"),e("th",null,"Secret"),e("th"),e("th")])],-1),R={style:{"vertical-align":"middle"}},U={style:{"vertical-align":"middle"}},Y={style:{"vertical-align":"middle"}},z={style:{"vertical-align":"middle"}},V=["onClick"],P={class:"text-right",style:{"vertical-align":"middle"}},O=["onClick"],B=["onClick"],K={class:"dialog rounded-2xl text-center",id:"modal-create-client",ref:"createModal","aria-modal":"true","aria-labelledby":"modal-create-client-label"},q=e("h4",{id:"modal-create-client-label"}," Create Client ",-1),E=e("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),X=e("span",{class:"sr-only"},"Close",-1),W=[E,X],G={class:"text-justify"},H={key:0,class:"rounded p-4 bg-red-100 text-red-800 w-full"},J=e("p",{class:"mb-0"},[e("strong",null,"Whoops!"),k(" Something went wrong!")],-1),Q=e("br",null,null,-1),Z={class:"mb-5"},ee=e("label",{class:"font-extrabold required"},"Client name",-1),te=e("span",{class:"text-sm text-muted"}," Something your users will recognize and trust. ",-1),se={class:"mb-5"},oe=e("label",{class:"font-extrabold required"},"Redirect URL",-1),le=e("span",{class:"text-sm text-muted"}," Your application's authorization callback URL. ",-1),ne={class:"grid grid-cols-2 gap-2 w-full"},re={class:"dialog rounded-2xl text-center",id:"modal-edit-client",ref:"editModal","aria-modal":"true","aria-labelledby":"modal-edit-client-label"},ie=e("h4",{id:"modal-edit-client-label"}," Create Client ",-1),ae=e("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),de=e("span",{class:"sr-only"},"Close",-1),ce=[ae,de],ue={class:"text-justify"},he={key:0,class:"alert alert-danger"},me=e("p",{class:"mb-0"},[e("strong",null,"Whoops!"),k(" Something went wrong!")],-1),_e=e("br",null,null,-1),pe={role:"form",autocomplete:"off"},fe={class:"form-group grid grid-cols-2 gap-5"},be=e("label",{class:"col-md-3 col-form-label"},"Name",-1),ge={class:"col-md-9"},ke=e("span",{class:"form-text text-muted"}," Something your users will recognize and trust. ",-1),Ce={class:"form-group grid grid-cols-2 gap-5"},ye=e("label",{class:"col-md-3 col-form-label"},"Redirect URL",-1),xe={class:"col-md-9"},ve=e("span",{class:"form-text text-muted"}," Your application's authorization callback URL. ",-1),we={class:"grid grid-cols-2 gap-2 w-full"};function Me(o,t,a,m,n,l){return i(),r("div",null,[e("div",A,[e("div",S,[e("div",N,[$,e("a",{class:"btn2 btn-primary btn-outline btn-sm",tabindex:"-1",onClick:t[0]||(t[0]=(...s)=>l.showCreateClientForm&&l.showCreateClientForm(...s))}," Create New Client ")])]),e("div",I,[n.clients.length===0?(i(),r("p",j," You have not created any OAuth clients. ")):c("",!0),n.clients.length>0?(i(),r("table",D,[L,e("tbody",null,[(i(!0),r(u,null,h(n.clients,s=>(i(),r("tr",null,[e("td",R,d(s.id),1),e("td",U,d(s.name),1),e("td",Y,[e("code",null,d(s.secret),1)]),e("td",z,[e("a",{class:"cursor-pointer",tabindex:"-1",onClick:p=>l.edit(s)}," Edit ",8,V)]),e("td",P,[!this.confirmClient||this.confirmClient.id!=s.id?(i(),r("a",{key:0,class:"btn2 btn-error btn-outline btn-xs",onClick:p=>l.deleteConfirm(s)}," Delete ",8,O)):(i(),r("a",{key:1,class:"btn2 btn-error btn-xs",onClick:p=>l.deleteConfirm(s)}," Confirm delete ",8,B))])]))),256))])])):c("",!0)])]),e("dialog",K,[e("header",null,[q,e("button",{type:"button",class:"rounded-full",onClick:t[1]||(t[1]=s=>l.closeModal("createModal")),title:"Close"},W)]),e("article",G,[n.createForm.errors.length>0?(i(),r("div",H,[J,Q,e("ul",null,[(i(!0),r(u,null,h(n.createForm.errors,s=>(i(),r("li",null,d(s),1))),256))])])):c("",!0),e("form",{role:"form",class:"w-full",onSubmit:t[6]||(t[6]=y((...s)=>l.store&&l.store(...s),["prevent"])),autocomplete:"off"},[e("div",Z,[ee,f(e("input",{id:"create-client-name",type:"text",class:"rounded border w-full p-2",name:"name",placeholder:"Name the token","onUpdate:modelValue":t[2]||(t[2]=s=>n.createForm.name=s),onKeyup:t[3]||(t[3]=g((...s)=>l.store&&l.store(...s),["enter"])),ref:"createName"},null,544),[[b,n.createForm.name]]),te]),e("div",se,[oe,f(e("input",{type:"text",class:"rounded border w-full p-2",name:"redirect",onKeyup:t[4]||(t[4]=g((...s)=>l.store&&l.store(...s),["enter"])),"onUpdate:modelValue":t[5]||(t[5]=s=>n.createForm.redirect=s)},null,544),[[b,n.createForm.redirect]]),le])],32),e("form",{role:"form",class:"w-full mb-5",onSubmit:t[7]||(t[7]=y((...s)=>l.store&&l.store(...s),["prevent"])),autocomplete:"off"},null,32),e("div",ne,[e("button",{type:"button",class:"btn2 btn-ghost",onClick:t[8]||(t[8]=s=>l.closeModal("createModal"))},"Close"),e("button",{type:"button",class:"btn2 btn-primary",onClick:t[9]||(t[9]=(...s)=>l.store&&l.store(...s))}," Create ")])])],512),e("dialog",re,[e("header",null,[ie,e("button",{type:"button",class:"rounded-full",onClick:t[10]||(t[10]=s=>l.closeModal("editModal")),title:"Close"},ce)]),e("article",ue,[n.editForm.errors.length>0?(i(),r("div",he,[me,_e,e("ul",null,[(i(!0),r(u,null,h(n.editForm.errors,s=>(i(),r("li",null,d(s),1))),256))])])):c("",!0),e("form",pe,[e("div",fe,[be,e("div",ge,[f(e("input",{id:"edit-client-name",type:"text",class:"w-full",onKeyup:t[11]||(t[11]=g((...s)=>l.update&&l.update(...s),["enter"])),"onUpdate:modelValue":t[12]||(t[12]=s=>n.editForm.name=s),ref:"editName"},null,544),[[b,n.editForm.name]]),ke])]),e("div",Ce,[ye,e("div",xe,[f(e("input",{type:"text",class:"w-full",name:"redirect",onKeyup:t[13]||(t[13]=g((...s)=>l.update&&l.update(...s),["enter"])),"onUpdate:modelValue":t[14]||(t[14]=s=>n.editForm.redirect=s)},null,544),[[b,n.editForm.redirect]]),ve])])]),e("div",we,[e("button",{type:"button",class:"btn2 btn-ghost",onClick:t[15]||(t[15]=s=>l.closeModal("editModal"))},"Close"),e("button",{type:"button",class:"btn2 btn-primary",onClick:t[16]||(t[16]=(...s)=>l.update&&l.update(...s))}," Create ")])])],512)])}const Te=x(F,[["render",Me]]);const Fe={data(){return{tokens:[]}},ready(){this.prepareComponent()},mounted(){this.prepareComponent()},methods:{prepareComponent(){this.getTokens()},getTokens(){axios.get("/oauth/tokens").then(o=>{this.tokens=o.data})},revoke(o){axios.delete("/oauth/tokens/"+o.id).then(t=>{this.getTokens()})}}},v=o=>(w("data-v-73922f67"),o=o(),M(),o),Ae={key:0},Se={class:"card card-default"},Ne=v(()=>e("div",{class:"card-header text-lg"},"Authorized Applications",-1)),$e={class:"card-body"},Ie={class:"table table-borderless mb-0"},je=v(()=>e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Scopes"),e("th")])],-1)),De={style:{"vertical-align":"middle"}},Le={style:{"vertical-align":"middle"}},Re={key:0},Ue={style:{"vertical-align":"middle"}},Ye=["onClick"];function ze(o,t,a,m,n,l){return i(),r("div",null,[n.tokens.length>0?(i(),r("div",Ae,[e("div",Se,[Ne,e("div",$e,[e("table",Ie,[je,e("tbody",null,[(i(!0),r(u,null,h(n.tokens,s=>(i(),r("tr",null,[e("td",De,d(s.client.name),1),e("td",Le,[s.scopes.length>0?(i(),r("span",Re,d(s.scopes.join(", ")),1)):c("",!0)]),e("td",Ue,[e("a",{class:"action-link text-error",onClick:p=>l.revoke(s)}," Revoke ",8,Ye)])]))),256))])])])])])):c("",!0)])}const Ve=x(Fe,[["render",ze],["__scopeId","data-v-73922f67"]]),Pe={data(){return{accessToken:null,tokens:[],scopes:[],confirmToken:null,form:{name:"",scopes:[],errors:[]}}},ready(){this.prepareComponent()},mounted(){this.prepareComponent()},methods:{prepareComponent(){this.getTokens(),this.getScopes()},getTokens(){axios.get("/oauth/personal-access-tokens").then(o=>{this.tokens=o.data})},getScopes(){axios.get("/oauth/scopes").then(o=>{this.scopes=o.data})},showCreateTokenForm(){this.openModal("createModal"),this.$refs.createName.focus()},store(){this.accessToken=null,this.form.errors=[],axios.post("/oauth/personal-access-tokens",this.form).then(o=>{this.form.name="",this.form.scopes=[],this.form.errors=[],this.tokens.push(o.data.token),this.showAccessToken(o.data.accessToken)}).catch(o=>{typeof o.response.data=="object"?this.form.errors=_.flatten(_.toArray(o.response.data.errors)):this.form.errors=["Something went wrong. Please try again."]})},toggleScope(o){this.scopeIsAssigned(o)?this.form.scopes=_.reject(this.form.scopes,t=>t==o):this.form.scopes.push(o)},scopeIsAssigned(o){return _.indexOf(this.form.scopes,o)>=0},showAccessToken(o){this.closeModal("createModal"),this.accessToken=o,this.openModal("accessModal")},revoke(o){axios.delete("/oauth/personal-access-tokens/"+o.id).then(t=>{this.getTokens(),window.showToast("API token deleted succesfully.")})},openModal(o){this.$refs[o].showModal(),this.$refs[o].addEventListener("click",function(t){let a=this.getBoundingClientRect();!(a.top<=t.clientY&&t.clientY<=a.top+a.height&&a.left<=t.clientX&&t.clientX<=a.left+a.width)&&t.target.tagName==="DIALOG"&&this.close()})},closeModal(o){this.$refs[o].close()},deleteConfirm(o){if(this.confirmToken&&o.id===this.confirmToken.id)return this.revoke(o);this.confirmToken=o}}},Oe={class:""},Be={class:"flex flex-col gap-5"},Ke={class:"flex justify-between items-center"},qe=e("span",{class:"text-lg"}," Personal Access Tokens ",-1),Ee={key:0,class:""},Xe={key:1,class:"table table-borderless mb-0 w-full"},We=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th")])],-1),Ge={style:{"vertical-align":"middle"}},He={class:"text-right",style:{"vertical-align":"middle"}},Je=["onClick"],Qe=["onClick"],Ze={class:"dialog rounded-2xl text-center",id:"modal-create-token",ref:"createModal","aria-modal":"true","aria-labelledby":"modal-create-token-label"},et=e("h4",{id:"modal-create-token-label"}," Create Token ",-1),tt=e("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),st=e("span",{class:"sr-only"},"Close",-1),ot=[tt,st],lt={class:"text-justify"},nt={key:0,class:"rounded p-4 bg-red-100 text-red-800 w-full"},rt=e("p",{class:"mb-0"},[e("strong",null,"Whoops!"),k(" Something went wrong!")],-1),it=e("br",null,null,-1),at=e("label",{class:"font-extrabold required"},"Token name",-1),dt={key:0,class:"form-group grid grid-cols-2 gap-4"},ct=e("label",{class:"col-md-4 col-form-label"},"Scopes",-1),ut={class:"col-md-6"},ht={class:"checkbox"},mt=["onClick","checked"],_t={class:"grid grid-cols-2 gap-2 w-full"},pt={class:"dialog rounded-2xl text-center",id:"modal-access-token",ref:"accessModal","aria-modal":"true","aria-labelledby":"modal-access-token-label"},ft=e("h4",{id:"modal-access-token-label"}," Personal Access Token ",-1),bt=e("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),gt=e("span",{class:"sr-only"},"Close",-1),kt=[bt,gt],Ct={class:"text-justify"},yt=e("p",{class:"mb-2"}," Here is your new personal access token. This is the only time it will be shown so don't lose it! You may now use this token to make API requests. ",-1),xt={class:"w-full",rows:"10"};function vt(o,t,a,m,n,l){return i(),r("div",Oe,[e("div",Be,[e("div",Ke,[qe,e("a",{class:"btn2 btn-primary btn-outline btn-sm",tabindex:"-1",onClick:t[0]||(t[0]=(...s)=>l.showCreateTokenForm&&l.showCreateTokenForm(...s))}," Create New Token ")]),n.tokens.length===0?(i(),r("p",Ee," You have not created any personal access tokens. ")):c("",!0),n.tokens.length>0?(i(),r("table",Xe,[We,e("tbody",null,[(i(!0),r(u,null,h(n.tokens,s=>(i(),r("tr",null,[e("td",Ge,d(s.name),1),e("td",He,[!this.confirmToken||this.confirmToken.id!=s.id?(i(),r("a",{key:0,class:"btn2 btn-error btn-outline btn-xs",onClick:p=>l.deleteConfirm(s)}," Delete ",8,Je)):(i(),r("a",{key:1,class:"btn2 btn-error btn-xs",onClick:p=>l.deleteConfirm(s)}," Confirm delete ",8,Qe))])]))),256))])])):c("",!0)]),e("dialog",Ze,[e("header",null,[et,e("button",{type:"button",class:"rounded-full",onClick:t[1]||(t[1]=s=>l.closeModal("createModal")),title:"Close"},ot)]),e("article",lt,[n.form.errors.length>0?(i(),r("div",nt,[rt,it,e("ul",null,[(i(!0),r(u,null,h(n.form.errors,s=>(i(),r("li",null,d(s),1))),256))])])):c("",!0),e("form",{role:"form",class:"w-full mb-5",onSubmit:t[3]||(t[3]=y((...s)=>l.store&&l.store(...s),["prevent"])),autocomplete:"off"},[at,f(e("input",{id:"create-token-name",type:"text",class:"rounded border w-full p-2",name:"name",placeholder:"Name the token","onUpdate:modelValue":t[2]||(t[2]=s=>n.form.name=s),ref:"createName"},null,512),[[b,n.form.name]]),n.scopes.length>0?(i(),r("div",dt,[ct,e("div",ut,[(i(!0),r(u,null,h(n.scopes,s=>(i(),r("div",null,[e("div",ht,[e("label",null,[e("input",{type:"checkbox",onClick:p=>l.toggleScope(s.id),checked:l.scopeIsAssigned(s.id)},null,8,mt),k(" "+d(s.id),1)])])]))),256))])])):c("",!0)],32),e("div",_t,[e("button",{type:"button",class:"btn2 btn-ghost",onClick:t[4]||(t[4]=s=>l.closeModal("createModal"))},"Close"),e("button",{type:"button",class:"btn2 btn-primary",onClick:t[5]||(t[5]=(...s)=>l.store&&l.store(...s))}," Create ")])])],512),e("dialog",pt,[e("header",null,[ft,e("button",{type:"button",class:"rounded-full",onClick:t[6]||(t[6]=s=>l.closeModal("accessModal")),title:"Close"},kt)]),e("article",Ct,[yt,e("textarea",xt,d(n.accessToken),1),e("button",{type:"button",class:"btn2 btn-ghost",onClick:t[7]||(t[7]=s=>l.closeModal("accessModal"))},"Close")])],512)])}const wt=x(Pe,[["render",vt]]),C=T({});C.component("passport-clients",Te);C.component("passport-authorized-clients",Ve);C.component("passport-personal-access-tokens",wt);C.mount("#api");
