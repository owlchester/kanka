import{c as r,a as i,b as t,f as u,F as c,g as m,t as d,h as g,p as x,w as b,v as h,k,q as w}from"./vue.esm-bundler-BOz2yYwR.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const v={data(){return{secret:null,clients:[],confirmClient:null,createForm:{errors:[],name:"",redirect:""},editForm:{errors:[],name:"",redirect:""}}},ready(){this.prepareComponent()},mounted(){this.prepareComponent()},methods:{prepareComponent(){this.getClients()},getClients(){axios.get("/oauth/clients").then(l=>{this.clients=l.data})},showCreateClientForm(){this.openModal("createModal"),this.$refs.createName.focus()},store(){this.persistClient("post","/oauth/clients",this.createForm,"createModal")},edit(l){this.editForm.id=l.id,this.editForm.name=l.name,this.editForm.redirect=l.redirect,this.openModal("editModal"),this.$refs.editName.focus()},update(){this.persistClient("put","/oauth/clients/"+this.editForm.id,this.editForm,"editModal")},persistClient(l,e,a,p){a.errors=[],axios[l](e,a).then(n=>{this.getClients(),a.name="",a.redirect="",a.errors=[],l==="post"&&this.showSecret(n.data.secret),this.closeModal(p)}).catch(n=>{typeof n.response.data=="object"?a.errors=_.flatten(_.toArray(n.response.data.errors)):a.errors=["Something went wrong. Please try again."]})},destroy(l){axios.delete("/oauth/clients/"+l.id).then(e=>{this.getClients(),window.showToast("OAuth client deleted succesfully.")})},openModal(l){this.$refs[l].showModal(),this.$refs[l].addEventListener("click",function(e){let a=this.getBoundingClientRect();!(a.top<=e.clientY&&e.clientY<=a.top+a.height&&a.left<=e.clientX&&e.clientX<=a.left+a.width)&&e.target.tagName==="DIALOG"&&this.close()})},closeModal(l){this.$refs[l].close()},deleteConfirm(l){if(this.confirmClient&&l.id===this.confirmClient.id)return this.destroy(l);this.confirmClient=l},showSecret(l){this.closeModal("createModal"),this.secret=l,this.openModal("accessModal")}}},M={class:"card card-default"},T={class:"card-header"},F={class:"flex justify-between items-center"},A={class:"card-body"},S={key:0,class:"mb-0"},N={key:1,class:"table table-borderless mb-0"},j={style:{"vertical-align":"middle"}},I={style:{"vertical-align":"middle"}},D={style:{"vertical-align":"middle"}},Y=["onClick"],L={class:"text-right",style:{"vertical-align":"middle"}},R=["onClick"],U=["onClick"],q={class:"dialog rounded-2xl",id:"modal-create-client",ref:"createModal","aria-modal":"true","aria-labelledby":"modal-create-client-label"},P={class:"flex gap-6 items-center p-4 md:p-6 justify-between w-full"},V={class:"p-4"},z={key:0,class:"rounded p-4 bg-red-100 text-red-800 w-full"},O={class:"mb-5"},B={class:""},K={class:"flex justify-between items-center gap-2 w-full"},$={class:"dialog rounded-2xl",id:"modal-edit-client",ref:"editModal","aria-modal":"true","aria-labelledby":"modal-edit-client-label"},E={class:"flex gap-6 items-center p-4 md:p-6 justify-between"},X={class:"p-4"},W={key:0,class:"alert alert-danger"},G={role:"form",class:"flex flex-col gap-5",autocomplete:"off"},H={class:""},J={class:""},Q={class:"flex justify-between items-center gap-2 w-full"},Z={class:"dialog rounded-2xl",id:"modal-access-token",ref:"accessModal","aria-modal":"true","aria-labelledby":"modal-access-token-label"},ee={class:"flex gap-6 items-center p-4 md:p-6 justify-between"},te={class:"text-justify p-4"};function se(l,e,a,p,n,o){return i(),r("div",null,[t("div",M,[t("div",T,[t("div",F,[e[18]||(e[18]=t("span",{class:"text-lg"}," OAuth Clients ",-1)),t("a",{class:"btn2 btn-primary btn-outline btn-sm",tabindex:"-1",onClick:e[0]||(e[0]=(...s)=>o.showCreateClientForm&&o.showCreateClientForm(...s))}," Create New Client ")])]),t("div",A,[n.clients.length===0?(i(),r("p",S," You have not created any OAuth clients. ")):u("",!0),n.clients.length>0?(i(),r("table",N,[e[20]||(e[20]=t("thead",null,[t("tr",null,[t("th",null,"Client ID"),t("th",null,"Name"),t("th",null,"Secret"),t("th"),t("th")])],-1)),t("tbody",null,[(i(!0),r(c,null,m(n.clients,s=>(i(),r("tr",null,[t("td",j,d(s.id),1),t("td",I,d(s.name),1),e[19]||(e[19]=t("td",{style:{"vertical-align":"middle"}},[t("code",null,"******")],-1)),t("td",D,[t("a",{class:"cursor-pointer",tabindex:"-1",onClick:f=>o.edit(s)}," Edit ",8,Y)]),t("td",L,[!this.confirmClient||this.confirmClient.id!=s.id?(i(),r("a",{key:0,class:"btn2 btn-error btn-outline btn-xs",onClick:f=>o.deleteConfirm(s)}," Delete ",8,R)):(i(),r("a",{key:1,class:"btn2 btn-error btn-xs",onClick:f=>o.deleteConfirm(s)}," Confirm delete ",8,U))])]))),256))])])):u("",!0)])]),t("dialog",q,[t("header",P,[e[22]||(e[22]=t("h4",{id:"modal-create-client-label",class:"text-lg font-normal"}," Create Client ",-1)),t("button",{type:"button",class:"rounded-full",onClick:e[1]||(e[1]=s=>o.closeModal("createModal")),title:"Close"},e[21]||(e[21]=[t("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),t("span",{class:"sr-only"},"Close",-1)]))]),t("article",V,[n.createForm.errors.length>0?(i(),r("div",z,[e[23]||(e[23]=t("p",{class:"mb-0"},[t("strong",null,"Whoops!"),g(" Something went wrong!")],-1)),e[24]||(e[24]=t("br",null,null,-1)),t("ul",null,[(i(!0),r(c,null,m(n.createForm.errors,s=>(i(),r("li",null,d(s),1))),256))])])):u("",!0),t("form",{role:"form",class:"w-full",onSubmit:e[6]||(e[6]=x((...s)=>o.store&&o.store(...s),["prevent"])),autocomplete:"off"},[t("div",O,[e[25]||(e[25]=t("label",{class:"font-extrabold required"},"Client name",-1)),b(t("input",{id:"create-client-name",type:"text",class:"rounded border w-full p-2",name:"name",placeholder:"Name the token","onUpdate:modelValue":e[2]||(e[2]=s=>n.createForm.name=s),onKeyup:e[3]||(e[3]=k((...s)=>o.store&&o.store(...s),["enter"])),ref:"createName"},null,544),[[h,n.createForm.name]]),e[26]||(e[26]=t("span",{class:"text-sm text-neutral-content"}," Something your users will recognize and trust. ",-1))]),t("div",B,[e[27]||(e[27]=t("label",{class:"font-extrabold required"},"Redirect URL",-1)),b(t("input",{type:"text",class:"rounded border w-full p-2",name:"redirect",onKeyup:e[4]||(e[4]=k((...s)=>o.store&&o.store(...s),["enter"])),"onUpdate:modelValue":e[5]||(e[5]=s=>n.createForm.redirect=s)},null,544),[[h,n.createForm.redirect]]),e[28]||(e[28]=t("span",{class:"text-sm text-neutral-content"}," Your application's authorization callback URL. ",-1))])],32),t("div",K,[t("button",{type:"button",class:"btn2 btn-outline",onClick:e[7]||(e[7]=s=>o.closeModal("createModal"))},"Close"),t("button",{type:"button",class:"btn2 btn-primary",onClick:e[8]||(e[8]=(...s)=>o.store&&o.store(...s))}," Create ")])])],512),t("dialog",$,[t("header",E,[e[30]||(e[30]=t("h4",{id:"modal-edit-client-label",class:"text-lg font-normal"}," Create Client ",-1)),t("button",{type:"button",class:"rounded-full",onClick:e[9]||(e[9]=s=>o.closeModal("editModal")),title:"Close"},e[29]||(e[29]=[t("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),t("span",{class:"sr-only"},"Close",-1)]))]),t("article",X,[n.editForm.errors.length>0?(i(),r("div",W,[e[31]||(e[31]=t("p",{class:"mb-0"},[t("strong",null,"Whoops!"),g(" Something went wrong!")],-1)),t("ul",null,[(i(!0),r(c,null,m(n.editForm.errors,s=>(i(),r("li",null,d(s),1))),256))])])):u("",!0),t("form",G,[t("div",H,[e[32]||(e[32]=t("label",{class:"font-extrabold required"},"Name",-1)),b(t("input",{id:"edit-client-name",type:"text",class:"w-full",onKeyup:e[10]||(e[10]=k((...s)=>o.update&&o.update(...s),["enter"])),"onUpdate:modelValue":e[11]||(e[11]=s=>n.editForm.name=s),ref:"editName"},null,544),[[h,n.editForm.name]]),e[33]||(e[33]=t("span",{class:"text-sm text-neutral-content"}," Something your users will recognize and trust. ",-1))]),t("div",J,[e[34]||(e[34]=t("label",{class:"font-extrabold required"},"Redirect URL",-1)),b(t("input",{type:"text",class:"w-full",name:"redirect",onKeyup:e[12]||(e[12]=k((...s)=>o.update&&o.update(...s),["enter"])),"onUpdate:modelValue":e[13]||(e[13]=s=>n.editForm.redirect=s)},null,544),[[h,n.editForm.redirect]]),e[35]||(e[35]=t("span",{class:"text-sm text-neutral-content"}," Your application's authorization callback URL. ",-1))])]),t("div",Q,[t("button",{type:"button",class:"btn2 btn-outline",onClick:e[14]||(e[14]=s=>o.closeModal("editModal"))},"Close"),t("button",{type:"button",class:"btn2 btn-primary",onClick:e[15]||(e[15]=(...s)=>o.update&&o.update(...s))}," Create ")])])],512),t("dialog",Z,[t("header",ee,[e[37]||(e[37]=t("h4",{id:"modal-access-token-label",class:"text-lg font-normal"}," OAuth Client Secret ",-1)),t("button",{type:"button",class:"rounded-full",onClick:e[16]||(e[16]=s=>o.closeModal("accessModal")),title:"Close"},e[36]||(e[36]=[t("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),t("span",{class:"sr-only"},"Close",-1)]))]),t("article",te,[e[38]||(e[38]=t("p",{class:"mb-2"}," Here is your oauth client secret token. This is the only time it will be shown so don't lose it! You may now use this token to make API requests. ",-1)),e[39]||(e[39]=t("input",{type:"text",class:"w-full",rows:"1"},null,-1)),g(d(n.secret)+" ",1),t("button",{type:"button",class:"btn2 btn-outline",onClick:e[17]||(e[17]=s=>o.closeModal("accessModal"))},"Close")])],512)])}const le=C(v,[["render",se]]),oe={data(){return{tokens:[]}},ready(){this.prepareComponent()},mounted(){this.prepareComponent()},methods:{prepareComponent(){this.getTokens()},getTokens(){axios.get("/oauth/tokens").then(l=>{this.tokens=l.data})},revoke(l){axios.delete("/oauth/tokens/"+l.id).then(e=>{this.getTokens()})}}},ne={key:0},re={class:"card card-default"},ie={class:"card-body"},ae={class:"table table-borderless mb-0"},de={style:{"vertical-align":"middle"}},ue={style:{"vertical-align":"middle"}},ce={key:0},me={style:{"vertical-align":"middle"}},pe=["onClick"];function fe(l,e,a,p,n,o){return i(),r("div",null,[n.tokens.length>0?(i(),r("div",ne,[t("div",re,[e[1]||(e[1]=t("div",{class:"card-header text-lg"},"Authorized Applications",-1)),t("div",ie,[t("table",ae,[e[0]||(e[0]=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",null,"Scopes"),t("th")])],-1)),t("tbody",null,[(i(!0),r(c,null,m(n.tokens,s=>(i(),r("tr",null,[t("td",de,d(s.client.name),1),t("td",ue,[s.scopes.length>0?(i(),r("span",ce,d(s.scopes.join(", ")),1)):u("",!0)]),t("td",me,[t("a",{class:"action-link text-error",onClick:f=>o.revoke(s)}," Revoke ",8,pe)])]))),256))])])])])])):u("",!0)])}const be=C(oe,[["render",fe],["__scopeId","data-v-73922f67"]]),he={data(){return{accessToken:null,tokens:[],scopes:[],confirmToken:null,form:{name:"",scopes:[],errors:[]}}},ready(){this.prepareComponent()},mounted(){this.prepareComponent()},methods:{prepareComponent(){this.getTokens(),this.getScopes()},getTokens(){axios.get("/oauth/personal-access-tokens").then(l=>{this.tokens=l.data})},getScopes(){axios.get("/oauth/scopes").then(l=>{this.scopes=l.data})},showCreateTokenForm(){this.openModal("createModal"),this.$refs.createName.focus()},store(){this.accessToken=null,this.form.errors=[],axios.post("/oauth/personal-access-tokens",this.form).then(l=>{this.form.name="",this.form.scopes=[],this.form.errors=[],this.getTokens(),this.showAccessToken(l.data.accessToken)}).catch(l=>{typeof l.response.data=="object"?this.form.errors=_.flatten(_.toArray(l.response.data.errors)):this.form.errors=["Something went wrong. Please try again."]})},toggleScope(l){this.scopeIsAssigned(l)?this.form.scopes=_.reject(this.form.scopes,e=>e==l):this.form.scopes.push(l)},scopeIsAssigned(l){return _.indexOf(this.form.scopes,l)>=0},showAccessToken(l){this.closeModal("createModal"),this.accessToken=l,this.openModal("accessModal")},revoke(l){axios.delete("/oauth/personal-access-tokens/"+l.id).then(e=>{this.getTokens(),window.showToast("API token deleted succesfully.")})},openModal(l){this.$refs[l].showModal(),this.$refs[l].addEventListener("click",function(e){let a=this.getBoundingClientRect();!(a.top<=e.clientY&&e.clientY<=a.top+a.height&&a.left<=e.clientX&&e.clientX<=a.left+a.width)&&e.target.tagName==="DIALOG"&&this.close()})},closeModal(l){this.$refs[l].close()},deleteConfirm(l){if(this.confirmToken&&l.id===this.confirmToken.id)return this.revoke(l);this.confirmToken=l}}},ge={class:""},ke={class:"flex flex-col gap-5"},ye={class:"flex justify-between items-center"},Ce={key:0,class:""},xe={key:1,class:"table table-borderless mb-0 w-full"},we={style:{"vertical-align":"middle"}},ve={class:"text-right",style:{"vertical-align":"middle"}},Me=["onClick"],Te=["onClick"],_e={class:"dialog rounded-2xl text-center",id:"modal-create-token",ref:"createModal","aria-modal":"true","aria-labelledby":"modal-create-token-label"},Fe={class:"flex gap-6 items-center p-4 md:p-6 justify-between"},Ae={class:"text-justify"},Se={key:0,class:"rounded p-4 bg-red-100 text-red-800 w-full"},Ne={key:0,class:"form-group grid grid-cols-2 gap-4"},je={class:"col-md-6"},Ie={class:"checkbox"},De=["onClick","checked"],Ye={class:"flex justify-between items-center gap-2 p-4 w-full"},Le={class:"dialog rounded-2xl text-center",id:"modal-access-token",ref:"accessModal","aria-modal":"true","aria-labelledby":"modal-access-token-label"},Re={class:"flex gap-6 items-center p-4 md:p-6 justify-between"},Ue={class:"text-justify p-4"},qe={class:"w-full",rows:"10"};function Pe(l,e,a,p,n,o){return i(),r("div",ge,[t("div",ke,[t("div",ye,[e[8]||(e[8]=t("span",{class:"text-lg"}," Personal Access Tokens ",-1)),t("a",{class:"btn2 btn-primary btn-outline btn-sm",tabindex:"-1",onClick:e[0]||(e[0]=(...s)=>o.showCreateTokenForm&&o.showCreateTokenForm(...s))}," Create New Token ")]),n.tokens.length===0?(i(),r("p",Ce," You have not created any personal access tokens. ")):u("",!0),n.tokens.length>0?(i(),r("table",xe,[e[9]||(e[9]=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th")])],-1)),t("tbody",null,[(i(!0),r(c,null,m(n.tokens,s=>(i(),r("tr",null,[t("td",we,d(s.name),1),t("td",ve,[!this.confirmToken||this.confirmToken.id!=s.id?(i(),r("a",{key:0,class:"btn2 btn-error btn-outline btn-xs",onClick:f=>o.deleteConfirm(s)}," Delete ",8,Me)):(i(),r("a",{key:1,class:"btn2 btn-error btn-xs",onClick:f=>o.deleteConfirm(s)}," Confirm delete ",8,Te))])]))),256))])])):u("",!0)]),t("dialog",_e,[t("header",Fe,[e[11]||(e[11]=t("h4",{id:"modal-create-token-label",class:"text-lg font-normal"}," Create Token ",-1)),t("button",{type:"button",class:"rounded-full",onClick:e[1]||(e[1]=s=>o.closeModal("createModal")),title:"Close"},e[10]||(e[10]=[t("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),t("span",{class:"sr-only"},"Close",-1)]))]),t("article",Ae,[n.form.errors.length>0?(i(),r("div",Se,[e[12]||(e[12]=t("p",{class:"mb-0"},[t("strong",null,"Whoops!"),g(" Something went wrong!")],-1)),e[13]||(e[13]=t("br",null,null,-1)),t("ul",null,[(i(!0),r(c,null,m(n.form.errors,s=>(i(),r("li",null,d(s),1))),256))])])):u("",!0),t("form",{role:"form",class:"w-full p-4",onSubmit:e[3]||(e[3]=x((...s)=>o.store&&o.store(...s),["prevent"])),autocomplete:"off"},[e[15]||(e[15]=t("label",{class:"font-extrabold required"},"Token name",-1)),b(t("input",{id:"create-token-name",type:"text",class:"rounded border w-full p-2",name:"name",placeholder:"Name the token","onUpdate:modelValue":e[2]||(e[2]=s=>n.form.name=s),ref:"createName"},null,512),[[h,n.form.name]]),n.scopes.length>0?(i(),r("div",Ne,[e[14]||(e[14]=t("label",{class:"col-md-4 col-form-label"},"Scopes",-1)),t("div",je,[(i(!0),r(c,null,m(n.scopes,s=>(i(),r("div",null,[t("div",Ie,[t("label",null,[t("input",{type:"checkbox",onClick:f=>o.toggleScope(s.id),checked:o.scopeIsAssigned(s.id)},null,8,De),g(" "+d(s.id),1)])])]))),256))])])):u("",!0)],32),t("div",Ye,[t("button",{type:"button",class:"btn2 btn-outline",onClick:e[4]||(e[4]=s=>o.closeModal("createModal"))},"Close"),t("button",{type:"button",class:"btn2 btn-primary",onClick:e[5]||(e[5]=(...s)=>o.store&&o.store(...s))}," Create ")])])],512),t("dialog",Le,[t("header",Re,[e[17]||(e[17]=t("h4",{id:"modal-access-token-label",class:"text-lg font-normal"}," Personal Access Token ",-1)),t("button",{type:"button",class:"rounded-full",onClick:e[6]||(e[6]=s=>o.closeModal("accessModal")),title:"Close"},e[16]||(e[16]=[t("i",{class:"fa-solid fa-times","aria-hidden":"true"},null,-1),t("span",{class:"sr-only"},"Close",-1)]))]),t("article",Ue,[e[18]||(e[18]=t("p",{class:"mb-2"}," Here is your new personal access token. This is the only time it will be shown so don't lose it! You may now use this token to make API requests. ",-1)),t("textarea",qe,d(n.accessToken),1),t("button",{type:"button",class:"btn2 btn-outline",onClick:e[7]||(e[7]=s=>o.closeModal("accessModal"))},"Close")])],512)])}const Ve=C(he,[["render",Pe]]),y=w({});y.component("passport-clients",le);y.component("passport-authorized-clients",be);y.component("passport-personal-access-tokens",Ve);y.mount("#api");
