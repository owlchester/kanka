const l=document.getElementById("dialog-backdrop");let d;const u=()=>{document.querySelectorAll('[data-toggle="dialog"]').forEach(e=>{e.addEventListener("click",s)}),document.querySelectorAll('[data-toggle="dialog-ajax"]').forEach(e=>{e.addEventListener("click",s)})},r=new Event("dialog.loaded");function s(e){e.preventDefault();let t=this.dataset.target;if(!t)return;let o=this.dataset.url,n=this.dataset.focus;a(t,o,n)}const a=(e,t,o)=>{if(e=document.getElementById(e),e.removeAttribute("open"),e.setAttribute("aria-hidden",!1),e.show(),document.addEventListener("keydown",c),l.classList.remove("hidden"),e.dataset.dismissible!=="false"&&l.addEventListener("click",function(n){e.close()}),e.addEventListener("click",function(n){let i=e.getBoundingClientRect();!(i.top<=n.clientY&&n.clientY<=i.top+i.height&&i.left<=n.clientX&&n.clientX<=i.left+i.width)&&n.target.tagName==="DIALOG"&&e.close()}),e.addEventListener("close",function(n){l.classList.add("hidden"),e.setAttribute("aria-hidden",!0),document.removeEventListener("keydown",c)}),t)f(t,e);else if(o){let n=document.querySelector(o);if(!n)return;n.focus()}},c=e=>{if(e.key==="Escape"){const t=document.activeElement;if(["INPUT","SELECT","TEXTAREA"].includes(t.tagName)){document.activeElement.blur();return}const n=document.querySelector('dialog[aria-hidden="false"]');n||document.removeEventListener("keydown",c),n.close()}},f=(e,t)=>{d?t.innerHTML=d:d=t.innerHTML,fetch(e,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then(o=>o.text()).then(o=>{t.innerHTML=o,t.show(),typeof $=="function"?window.triggerEvent():document.dispatchEvent(r),Alpine.initTree(t),console.log("alpine triggered on",t)})},m=e=>{document.getElementById(e).close()};window.initDialogs=u;window.openDialog=a;window.closeDialog=m;
